{
  "hash": "73657af0b050614c03564907136f3def",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"A Knowledge-Sharing Model of Chatbots\"\nengine: knitr\nexecute:\n  echo: false\n  warning: false\n  error: false\n  cache: true # caches chunk output\nauthor: \"Tom Cunningham\"\ndate: \"Sept 24 2025\"\nbibliography: ai.bib\nformat: html\n---\n\n## Abstract\n\nThis note formalizes a common intuitive model of chatbots as sharing existing knowledge. People will consult a chatbot when they encounter a question for which they do not know the answer, but they expect the answer exists somewhere in the public domain (and therefore the chatbot's training set). The model gives strong predictions about chatbot adoption across demographics, occupations, and tasks.  Insofar as wages are driven by differences in knowledge then we should expect chatbots to flatten those differences, and cause (1) higher average consumption; (2) lower wages for the highest-paid; (3) lower trade, i.e. lower GDP (because more tasks move into home production).\n\n\n#                       EXTRAPOLATION / unified theory of chatbot vs human\n\nTwo sentence version.\n: LLMs observe more data than humans, but are worse at extrapolating from those data points, this therefore makes them good at *common* problems and bad at *rare* problems.\n\n      The economic and safety implications are downstream of this:\n      \n      1. LLMs speeds up common tasks; (2) LLMs are good at tasks that take humans a short time (without context); (3) .\n\n##       Overview\n\nPuzzle: why are LLMs better than humans at some tasks, worse at others.\n: LLMs beat almost all humans on some tasks (exam questions, interview questions), but lose to most humans on others (agentic tasks, playing games).\n: People have proposed various properties of the tasks which might fit this: computational complexity; time horizon; verifiabilit.\n\nAnswer: success depends on similarity to the tasks in training set.\n: For simplicity, treat humans and LLMs both as solving a supervised learning problem. Additionally assume that LLMs are worse at extrapolation.\n\nThe theory has clear testable implications.\n:  - Given some task, and two agents, the agent will be more likely to succeed if it has more experience with closer tasks.\n\nHelps explain many facts:\n:  1. LLMs pass aptitude tests but do not have the aptitude to do the job.\n    2. LLMs can do short-horizon tasks as well as humans, but not long-horizon tasks.\n\n\n##       Applications\n\nChatbot use.\n:  1. Chatbots are used for new-to-you questions.\n\nAptitude tests.\n: Why can LLMs pass exams and evals, but not act in the real world? \n\nTime horizon.\n:    - Tasks that take longer are farther from distribution, and so take humans longer time to assemble the properties of the question.\n     - The theory predicts outliers: (1) tasks that are additively separable.\n\nLLM transcendence.\n: Zhang on transcendence: (1) skill denoising; (2) skill selection; (3) skill generalization. They have a model where different experts learn edges on a graph, you could think about this as *compound* questions where you need to know the answer to two subquestions, there you clearly get transcendence.\n\nEconomic impacts / adoption\n:  - Software engineering/\n\n##       Formalization\n\nAtomic questions, scalar answers.\n:  \n   - You get a questions $q\\in Q$, from $f(q)$, you choose an answer $a\\in\\mathcal{R}$, with payoff $y(q,a)$, and no correlation in payoffs.\n   - Venn diagram: your experience, others' experience.\n\nVector questions, linear-Gaussian answers.\n:  - Get a closed form expression for (A) human; (B) agent; (C) agent-first.\n\nScalar questions.\n:  - If random answers, then equivalent to atomic questions.\n\n##       Twitter Version\n\nHere's a theory of LLM and human capabilities.\n\nPuzzle: why are LLMs better than humans at some tasks (exams, interviews), but worse at other tasks (interaction, long horizon, games)? Why is the frontier jagged?\n\nExplanation: LLMs have more data but worse extrapolation. This implies they outperform humans on tasks that are *common* but underperform on tasks that are *rare*.\n\n\n##       Related\n\nAgarwal Gans & Goldfarb, [Prediction Machines](https://cdn.chools.in/DIG_LIB/E-Book/Prediction%20Machines-The%20Simple%20Economics%20of%20Artificial%20Intelligence%20by%20Ajay%20Agrawal_.pdf?utm_source=chatgpt.com)\n\n> \"One major benefit of prediction machines is that they can scale in a way that humans cannot. One downside is that they struggle to make predictions in unusual cases for which there isn’t much historical data. Combined, this means that many human-machine collaborations will take the form of “prediction by exception.”\"\n\n> \"prediction machines learn when data is plentiful, which happens when they are dealing with more routine or frequent scenarios.\"\n\n@brynjolfsson2023generative:\n\n> \"AI access has the smallest reduction in handle time for problems where human agents are already well trained (very routine problems) or where its training data may be sparse (very rare problems). We see the largest improvements in the handle time for moderately uncommon problems. \"\n\n# Introduction\n\nThis note treats chatbots as lowering the cost of access to existing\npublic knowledge. A chatbot is essentially a database of questions for\nwhich the answer already exists in the public domain (and hence in the\nLLM training data). It implies that people will consult a chatbot when\nthey encounter a question for which (i) they do not know the answer, and\n(ii) they expect that someone else does know the answer, and has\ndocumented it in the public domain.\n\nThe model expresses a very common view of LLMs, but has not been stated\nas explicitly before as far as I am aware. LLM chatbots clearly do many\nthings which would not normally be described as answering questions\n(drawing pictures, drafting text, editing text, writing code), however\nthe majority share of chatbot queries appear to be asking for\ninformation (@chatterji2025chatgpt). The core predictions can be\nexpressed assuming a discrete set of questions, but I also derive\npredictions from a fuller model which allows for the user and chatbot to\ninterpolate between answers among different related questions.\n\nThis model gives a variety of predictions about when chatbots will be\nused:\n\n1.  **Chatbots will be consulted more by novices more than experts in a\n    domain.** This is because novices are more likely to encounter a\n    question that they have not encountered before. A corollary is that\n    chatbots will be used where you are a *relative* novice, e.g. a\n    doctor will be more likely to use a chatbot for a legal question,\n    and a lawyer will be relatively more likely to use a chatbot for a\n    medical question.\n\n2.  **Chatbots will be used more in occupations with high returns to\n    experience.** In domains where workers frequently encounter problems\n    that are neither highly repetitive, nor entirely idiosyncratic, then\n    we would expect high returns to experience, and also high chatbot\n    use.\n\n3.  **Chatbots will be used more in occupations with high mobility.** If\n    the same questions tend to recur across jobs within the same\n    occupation then we expect high mobility between jobs, and also high\n    chatbot use.\n\n4.  **Chatbots will be consulted more for well-documented domains.**\n    Chatbots will be used more for questions about technologies that are\n    public than technologies that are proprietary (which do not appear\n    in the training material), and prevalence of questions about a\n    technology should be convex in the popularity of that technology.\n\nThe model also gives us basic predictions about the equilibrium effect\nof chatbots:\n\n1.  **Chatbots raise welfare through better decisions.** We should also\n    expect increases in welfare if agents can adjust on other margins,\n    especially through reducing the use of other information-sources\n    (books, web search), and through expanding the set of questions that\n    a person attempts to answer.\n\n2.  **Chatbots flatten comparative advantage.** If comparative advantage\n    is due to differences in knowledge (the set of questions for which\n    you know the answer) then chatbots will flatten those differences.\n    In a class of trade models where productivity differences are\n    entirely driven by knowledge gaps, this is formally equivalent to\n    \"catch up\" technology growth, where the catch-up implies: (1) higher\n    average wages; (2) lower wages for the highest-paid; (3) lower\n    trade, i.e. lower GDP (@dornbusch1977comparative,\n    @wilson1980general).\n\n#### Existing models of AI adoption.\n\nWe can compare this to a few existing models of AI:\n\n- **AI performs a task autonomously.** [@zeira1998workers] models\n  automation as allowing capital to perform some task instead of labor.\n  We then expect workers who previously specialized in those tasks to\n  see declines in their wages, e.g. [@acemoglu2011handbook],\n  [@acemoglu2018race].\n\n- **AI reduces the time required to perform a task.**\n  [@eloundou2023gpts] treats LLMs as reducing the time required to\n  complete a task by a fixed proportion.\\[UNFINISHED\\]\n\n- **AI supplies knowledge.**\n  @ide2024artificialintelligenceknowledgeeconomy and @autor2025expertise\n  \\[UNFINISHED\\]. Important point about Garicano/Ide/Talamas model: (1)\n  whether the knowledge required for a problem is known ex ante or ex\n  post; (2) whether you can rank knowledge on a scale.\n\n  Note: @garicano2006organization says \\\"Our theory suggests that the\n  impact of communication technology during the last years of the 1990s\n  and early 2000s should lead organizations toward increasing\n  centralization, an equalization of routine jobs, and a reduction of\n  self-employment as hierarchies get larger through larger spans of\n  control and more layers \\... Our interpretation is that the underlying\n  source of variation is the costs of acquiring and communicating\n  information: improvements in the cost of accessing knowledge, mostly\n  concentrated in the 1980s and early 1990s but present throughout the\n  period, followed by improvements in communication technology in the\n  late 1990s.\\\"\n\n#### Vector model.\n\nWe also describe a model in which each question is a vector, based on an\nearlier model of LLMs written for a different purpose,\n@cunningham2023imitation.\n\nSuppose each question $\\bm{q}$ is a vector of binary characteristics,\nand the true answer is a scalar, $a$, determined by a set of unobserved\nweights, $\\bm{w}$, with $a=\\bm{w}\\bm{q}$. The human guesses the answer\nto the new question by interpolating among previously-seen questions and\nanswers ($(\\bm{q}^i,a^i)_{i=1,\\ldots,n}$). They can also consult a\nchatbot which answers questions in the same way, but with a different\nset of previously-seen questions (i.e. the chatbot's training data). We\ncan then give a crisp closed-form expression for the expected benefit of\nconsulting a chatbot, based on the relationship between the question\n$q$, the human's experience $Q_1$, and the chatbot's experience, $Q_2$.\nWe expect a chatbot to be consulted when you encounter a question that\nhas components which fall outside the space formed from by your\nknowledge set (questions for which you know the answer), but which fall\ninside the space formed by the chatbot's knowledge set.\n\n## Conjectures About Adoption\n\nWe can make some conjectures about adoption by occupation and by task:\n\n  **Occupation**                    **Predicted ChatGPT use**   **Reason**\n  --------------------------------- --------------------------- ------------------------------------------------------------\n  software engineer - python        high                        problems novel, discrete, similar to those on internet\n  software engineer - proprietary   low                         problems novel, discrete, not similar to those on internet\n  physician                         high                        problems novel, discrete, similar to those on internet\n  contact center worker             low                         problems novel, discrete, not similar to those on internet\n  architect                         low                         problems novel, not discrete, not text-based\n  manual worker                     low                         problems not text-based\n\n  : Conjectures about adoption by occupation\n\n  **Task**                                                      **Predicted chatbot use**   **Reason**\n  ------------------------------------------------------------- --------------------------- ---------------------------------------------------------\n  Intellectual curiosity                                        high                        novel, discrete, similar to those on the internet\n  Diagnosing medical problems                                   high                        novel, discrete, similar to those on the internet\n  Problems with widely-adopted systems (car, house, computer)   high                        novel, discrete, similar to those on the internet\n  Problems with idiosyncratic systems (custom setups)           low                         novel, discrete, *not* similar to those on the internet\n\n  : Conjectures about adoption by task\n\n## Additional issues.\n\n1.  **Why are LLMs used as advisors, not agents?** It's notable that\n    LLMs are relatively rarely given autonomy to make a decision without\n    human oversight. ChatGPT is mostly built as an advisor, it cannot\n    take actions on your behalf. This could be accommodated by this\n    model if most questions have large private components, such that\n    ChatGPT's answer is worse than the human's, but the\n    ChatGPT-augmented answer is better than the human's.\n\n2.  **Relationship to time-savings.** This model quantifies the benefit\n    from ChatGPT as the *accuracy* of an answer to a question. Much\n    other literature on LLMs measures the value in time-savings, e.g.\n    most RCTs of LLM augmentation (both in the laboratory and the\n    field), and many self-reports. We could convert the accuracy\n    increase to a time-savings if we say that people can spend more time\n    to increase accuracy.\n\n3.  **How does ChatGPT differ from Google?** If we interpret ChatGPT's\n    training set as the content of the public internet then the same\n    model could be applied to a search engine. We could distinguish\n    ChatGPT in two ways: (1) the cost of consulting ChatGPT is\n    significantly lower because it will give an answer immediately,\n    instead of directing the human to another page where they have to\n    skim the text; (2) ChatGPT can *interpolate* questions in its\n    training data, e.g. it will give an answer to your question even if\n    nobody has answered that question before, but the answer can be\n    predicted from the answer to other questions.\n\n4.  **Dimensionality of the domain.** We might be able to extend the\n    model to distinguish between two types of dimensionality: (1)\n    surface dimensionality (how many letters it takes to express the\n    question/prompt); (2) the latent dimensionality of the domain. In\n    general the returns to experience will depend on the latent\n    dimensionality of the domain: if the latent dimensionality is low\n    then a few examples is enough to learn the patterns, if the latent\n    dimensionality is high then error continuously decreases with\n    experience (there's a nice closed-form expression for this).\n\n5.  **High-dimensional answers.** Our model assumes *scalar* answers. In\n    fact ChatGPT gives high-dimensional outputs. I think we can say some\n    nice things here.\n\n6.  **Tacit knowledge.** For some ChatGPT prompts the user can\n    *recognize* a correct answer, but cannot produce a correct answer\n    themselves (AKA a generation-validation gap). E.g. asking for a\n    picture, asking for a poem. The generation-validation asymmetry can\n    be due either to (1) computational difficulty; (2) tacit knowledge.\n\n7.  **Routine questions.** For some ChatGPT prompts the user can clearly\n    do the task themselves, without any extra information but it's\n    time-consuming: e.g. doing a simple mathematical operation,\n    alphabetizing a list, typing out boilerplate code. These types of\n    queries don't fit our model so well.\n\n# Model with Atomic Questions\n\nHere we define the simplest model: given some question you will consult\nthe chatbot if and only if (1) you do not know the answer to this\nquestion; (2) the chatbot does know the answer to this question.\n\nSuppose you are confronted by a question ($q\\in\\mathcal{Q}$), and you\nhave to supply an answer, $\\hat{a}\\in\\mathcal{R}$.\n\nThe chatbot's set of prior questions-observed is\n$\\bm{Q}_1\\subseteq \\mathcal{Q}$, the user's set is\n$\\bm{Q}_2\\subseteq \\mathcal{Q}$, with the composition of both sets\npublic knowledge (i.e. you know *whether* the chatbot knows the answer\nto each question, without you knowing what that answer is).\n\nIt is clear that the user will consult the chatbot if and only if\n$q\\in Q_1$ and $q\\not{\\in}Q_2$. In the vector model below, this discrete\nrule is replaced by a continuous analogue: you benefit from consulting\nthe chatbot when the components of the question that lie outside your\nown experience overlap with the subspace spanned by the chatbot's\nexperience.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](2025-06-14-model-of-chatbots_files/figure-html/fig-venn-1.png){#fig-venn width=672}\n:::\n:::\n\n\n\n# What Would a Satisfying Theory Look Like?\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](2025-06-14-model-of-chatbots_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\nSome implications:\n\n:     1. LLMs are capped at human abilities.\n      1. LLMs are capped at training data.\n      2. Chatbots consulted on questions that are *new to you*: doctors use it for legal questions; lawyers use it for medical questions.\n      3. Chatbots relatively worse at off-distribution questions.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](2025-06-14-model-of-chatbots_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](2025-06-14-model-of-chatbots_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](2025-06-14-model-of-chatbots_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n# Model with Vector Questions\n\n#### The State of the World and Questions.\n\nThe state of the world is defined by a vector of $p$ unobserved\nparameters, $\\bm{w} \\in \\mathbb{R}^p$. A question is a vector of $p$\nbinary features, $\\bm{q} \\in \\{-1, 1\\}^p$. The true answer to a question\n$\\bm{q}$ is a scalar $a$ determined by the linear relationship:\n$$a = \\bm{q}'\\bm{w} = \\sum_{k=1}^p q_k w_k$$\n\n#### Agents and Information.\n\nThere is a set of agents, indexed by $i \\in \\mathcal{I}$. Each agent $i$\npossesses an information set $\\mathcal{D}_i$, which consists of $n_i$\nquestions they have previously encountered, along with their true\nanswers. We can represent this information as a pair\n$(\\bm{Q}_i, \\bm{a}_i)$:\n\n- $\\bm{Q}_i$ is an $n_i \\times p$ matrix where each row is a question\n  vector. Let the $j$-th question for agent $i$ be $\\bm{q}_{i,j}'$, so\n  that:\n  $$\\bm{Q}_i = \\begin{bmatrix} \\bm{q}_{i,1}' \\\\ \\vdots \\\\ \\bm{q}_{i,n_i}' \\end{bmatrix} = \\begin{bmatrix} q_{i,1,1} & \\cdots & q_{i,1,p} \\\\ \\vdots & \\ddots & \\vdots \\\\ q_{i,n_i,1} & \\cdots & q_{i,n_i,p} \\end{bmatrix}$$\n\n- $\\bm{a}_i$ is an $n_i \\times 1$ vector of the corresponding answers.\n  The answers are generated according to the true model:\n  $$\\bm{a}_i = \\bm{Q}_i \\bm{w}$$\n\n#### Beliefs.\n\nAll agents share a common prior belief about the state of the world,\nassuming the weights $\\bm{w}$ are drawn from a multivariate Gaussian\ndistribution: $$\\bm{w} \\sim N(\\bm{0}, \\Sigma)$$ where $\\Sigma$ is a\n$p \\times p$ positive-semidefinite covariance matrix. A common\nassumption we will use is an isotropic prior, where\n$\\Sigma = \\sigma^2 \\bm{I}_p$ for some scalar $\\sigma^2 > 0$. This\nimplies that, a priori, the weights are uncorrelated and have equal\nvariance.\n\nGiven their information set $\\mathcal{D}_i$, agent $i$ forms a posterior\nbelief about $\\bm{w}$. When a new question $\\bm{q}_{\\text{new}}$ arises,\nthe agent uses their posterior distribution to form an estimate of the\nanswer,\n$\\hat{a}_{\\text{new}} = \\bm{q}_{\\text{new}}' \\mathbb{E}[\\bm{w} \\mid \\mathcal{D}_i]$.\n\nThroughout the analysis below we make two simplifying assumptions.\nFirst, observations are noiseless: when an agent has seen a question\nbefore, they observe its exact true answer, so that\n$\\bm{a}_i = \\bm{Q}_i\\bm{w}$. Second, the matrices\n$\\bm{Q}_i\\Sigma\\bm{Q}_i^{\\top}$ (and, under an isotropic prior,\n$\\bm{Q}_i\\bm{Q}_i^{\\top}$) are invertible, so that the posterior\nexpressions are well defined. Both assumptions can be relaxed (for\nexample by allowing noisy answers), at the cost of slightly more\ninvolved algebra but with the same basic geometry: what matters is how a\nnew question projects onto the subspaces spanned by past questions.\n\n# Propositions\n\n::: proposition\n**Proposition 1** (Posterior over $\\bm{w}$ given $\\bm{Q}$ and $\\bm{a}$).\n*The agent's posterior mean and variance will be: $$\\begin{aligned}\n      \\hat{\\bm w}&= \\Sigma \\bm{Q}^{\\top}(\\bm{Q}\\Sigma \\bm{Q}^{\\top})^{-1}\\bm a\\\\\n      \\Sigma_{\\mid a} &=\\Sigma-\\Sigma \\bm{Q}^{\\top}(\\bm{Q}\\Sigma \\bm{Q}^{\\top})^{-1}\\bm{Q}\\Sigma.\n   \\end{aligned}$$*\n:::\n\n:::: greyproof\n::: proof\n*Proof.* The derivation follows from the standard formula for\nconditional Gaussian distributions. We begin by defining the joint\ndistribution of the weights $\\bm{w}$ and the answers $\\bm{a}$. The\nweights and answers are jointly Gaussian:\n$$\\begin{pmatrix} \\bm{w} \\\\ \\bm{a} \\end{pmatrix} \\sim N\\left(\n      \\begin{pmatrix} \\bm{0} \\\\ \\bm{0} \\end{pmatrix},\n      \\begin{pmatrix} \n         \\Sigma & \\Sigma \\bm{Q}' \\\\\n         \\bm{Q}\\Sigma & \\bm{Q}\\Sigma \\bm{Q}'\n      \\end{pmatrix}\n   \\right)$$ where the covariance terms are derived as follows:\n\n- $Cov(\\bm{w}, \\bm{w}) = \\Sigma$ (prior covariance)\n\n- $Cov(\\bm{a}, \\bm{a}) = Cov(\\bm{Q}\\bm{w}, \\bm{Q}\\bm{w}) = \\bm{Q} Cov(\\bm{w}, \\bm{w}) \\bm{Q}' = \\bm{Q}\\Sigma \\bm{Q}'$\n\n- $Cov(\\bm{w}, \\bm{a}) = Cov(\\bm{w}, \\bm{Q}\\bm{w}) = Cov(\\bm{w}, \\bm{w})\\bm{Q}' = \\Sigma \\bm{Q}'$\n\nThe conditional mean $E[\\bm{w}|\\bm{a}]$ is given by the formula:\n$$E[\\bm{w}|\\bm{a}] = E[\\bm{w}] + Cov(\\bm{w},\\bm{a})Var(\\bm{a})^{-1}(\\bm{a} - E[\\bm{a}])$$\n\nSubstituting the values from our model ($E[\\bm{w}] = \\bm{0}$,\n$E[\\bm{a}] = \\bm{0}$):\n$$\\hat{\\bm{w}} = \\bm{0} + (\\Sigma \\bm{Q}')(\\bm{Q}\\Sigma \\bm{Q}')^{-1}(\\bm{a} - \\bm{0}) = \\Sigma \\bm{Q}'(\\bm{Q}\\Sigma \\bm{Q}')^{-1}\\bm{a}$$\n\nThis gives us the posterior mean of the weights. The posterior\ncovariance is given by:\n$$Var(\\bm{w}|\\bm{a}) = Var(\\bm{w}) - Cov(\\bm{w},\\bm{a})Var(\\bm{a})^{-1}Cov(\\bm{a},\\bm{w}) = \\Sigma - \\Sigma \\bm{Q}'(\\bm{Q}\\Sigma \\bm{Q}')^{-1}\\bm{Q}\\Sigma.$$ ◻\n:::\n::::\n\n::: proposition\n**Proposition 2** (Expected error for a given question). *The expected\nsquared error for a new question $\\bm q$ is:\n$$\\mathbb{E}[(\\bm q'(\\bm w - \\hat{\\bm w}))^2] = \\bm q' \\Sigma_{\\mid a} \\bm q$$\nFor an isotropic prior where $\\Sigma = \\sigma^2 \\bm{I}$, the error is\nproportional to the squared distance of $\\bm q$ from the subspace\nspanned by the previously seen questions in $\\bm{Q}$:\n$$\\mathbb{E}[(\\bm q'(\\bm w - \\hat{\\bm w}))^2] = \\sigma^2 \\|(\\bm{I}-\\bm{P_Q})\\bm q\\|^2$$\nwhere $\\bm{P_Q}$ is the projection matrix onto the row-span of\n$\\bm{Q}$.*\n:::\n\n:::: greyproof\n::: proof\n*Proof.* The prediction error is\n$\\bm{q}'\\bm{w} - \\bm{q}'\\hat{\\bm{w}} = \\bm{q}'(\\bm{w} - \\hat{\\bm{w}})$.\nThe expected squared error is the variance of this prediction error.\n$$\\begin{aligned}\n\\mathbb{E}[(\\bm q'(\\bm w - \\hat{\\bm w}))^2] &= \\mathbb{E}[\\bm q'(\\bm w - \\hat{\\bm w})(\\bm w - \\hat{\\bm w})'\\bm q] \\\\\n&= \\bm q' \\mathbb{E}[(\\bm w - \\hat{\\bm w})(\\bm w - \\hat{\\bm w})'] \\bm q \\\\\n&= \\bm q' Var(\\bm w \\mid \\bm a) \\bm q = \\bm q' \\Sigma_{\\mid a} \\bm q\n\\end{aligned}$$ This proves the first part of the proposition. For the\nsecond part, we assume an isotropic prior $\\Sigma = \\sigma^2\\bm{I}$.\nSubstituting this into the expression for $\\Sigma_{\\mid a}$ from\nProposition 1: $$\\begin{aligned}\n\\Sigma_{\\mid a} &= \\sigma^2\\bm{I} - (\\sigma^2\\bm{I})\\bm{Q}'(\\bm{Q}(\\sigma^2\\bm{I})\\bm{Q}')^{-1}\\bm{Q}(\\sigma^2\\bm{I}) \\\\\n&= \\sigma^2\\bm{I} - \\sigma^4 \\bm{Q}'(\\sigma^2\\bm{Q}\\bm{Q}')^{-1}\\bm{Q} \\\\\n&= \\sigma^2\\bm{I} - \\sigma^4 (\\sigma^2)^{-1} \\bm{Q}'(\\bm{Q}\\bm{Q}')^{-1}\\bm{Q} \\\\\n&= \\sigma^2(\\bm{I} - \\bm{Q}'(\\bm{Q}\\bm{Q}')^{-1}\\bm{Q})\n\\end{aligned}$$ Let $\\bm{P_Q} = \\bm{Q}'(\\bm{Q}\\bm{Q}')^{-1}\\bm{Q}$,\nwhich is the projection matrix onto the row space of $\\bm{Q}$. Then\n$\\Sigma_{\\mid a} = \\sigma^2(\\bm{I} - \\bm{P_Q})$. The expected squared\nerror is:\n$$\\mathbb{E}[(\\bm q'(\\bm w - \\hat{\\bm w}))^2] = \\bm q' \\sigma^2(\\bm{I} - \\bm{P_Q}) \\bm q = \\sigma^2 \\bm q'(\\bm{I} - \\bm{P_Q})\\bm q$$\nSince $\\bm{I} - \\bm{P_Q}$ is an idempotent projection matrix,\n$\\bm q'(\\bm{I} - \\bm{P_Q})\\bm q = \\bm q'(\\bm{I} - \\bm{P_Q})'(\\bm{I} - \\bm{P_Q})\\bm q = \\|(\\bm{I} - \\bm{P_Q})\\bm q\\|^2$.\nThus,\n$$\\mathbb{E}[(\\bm q'(\\bm w - \\hat{\\bm w}))^2] = \\sigma^2 \\|(\\bm{I}-\\bm{P_Q})\\bm q\\|^2$$ ◻\n:::\n::::\n\n::: proposition\n**Proposition 3** (Error decreases with more independent questions).\n*The average expected squared error over all possible new questions\n$\\bm{q}$ decreases linearly with the number of linearly independent\nquestions in the training set $\\bm{Q}$. Specifically, with an isotropic\nprior $\\Sigma = \\sigma^2 \\bm{I}$, the average error is:\n$$\\mathbb{E}_{\\bm{q}}[\\text{error}(\\bm{q})] = \\sigma^2 (p - \\operatorname{rank}(\\bm{Q}))$$\nwhere the expectation is taken over new questions $\\bm{q}$ with i.i.d.\ncomponents drawn uniformly from $\\{-1,1\\}$.*\n:::\n\n:::: greyproof\n::: proof\n*Proof.* The proof proceeds in two steps. First, we write the expression\nfor the error for a given new question $\\bm q$. Second, we average this\nerror over the distribution of all possible questions.\n\n1.  **Predictive error for a fixed $\\bm q$.** From Proposition 2, the\n    expected squared error for a specific new question $\\bm q$, given an\n    isotropic prior $\\Sigma = \\sigma^2 \\bm{I}$, is:\n    $$\\text{error}(\\bm q) = \\mathbb{E}[(\\bm q'(\\bm w - \\hat{\\bm w}))^2] = \\sigma^2 \\bm q'(\\bm{I}-\\bm{P_Q})\\bm q$$\n    where $\\bm{P_Q} = \\bm{Q}'(\\bm{Q}\\bm{Q}')^{-1}\\bm{Q}$ is the\n    projection matrix onto the row-span of $\\bm{Q}$.\n\n2.  **Average over random new questions.** We now take the expectation\n    of this error over the distribution of new questions $\\bm q$. The\n    components of $\\bm q$ are i.i.d. uniform on $\\{-1,1\\}$, which\n    implies that $\\mathbb{E}[\\bm q] = \\bm 0$ and\n    $\\mathbb{E}[\\bm q \\bm q'] = \\bm{I}_p$. The average error is:\n    $$\\begin{aligned}\n           \\mathbb{E}_{\\bm q}[\\text{error}(\\bm q)] &= \\mathbb{E}_{\\bm q}[\\sigma^2 \\bm q'(\\bm{I}-\\bm{P_Q})\\bm q] \\\\\n                                                  &= \\sigma^2 \\mathbb{E}_{\\bm q}[\\operatorname{tr}(\\bm q'(\\bm{I}-\\bm{P_Q})\\bm q)] \\\\\n                                                  &= \\sigma^2 \\mathbb{E}_{\\bm q}[\\operatorname{tr}((\\bm{I}-\\bm{P_Q})\\bm q \\bm q')] \\\\\n                                                  &= \\sigma^2 \\operatorname{tr}((\\bm{I}-\\bm{P_Q})\\mathbb{E}_{\\bm q}[\\bm q \\bm q']) \\\\\n                                                  &= \\sigma^2 \\operatorname{tr}(\\bm{I}-\\bm{P_Q}) \\\\\n                                                  &= \\sigma^2 (\\operatorname{tr}(\\bm{I}) - \\operatorname{tr}(\\bm{P_Q}))\n        \\end{aligned}$$ The trace of the identity matrix is $p$. The\n    trace of a projection matrix is the dimension of the subspace it\n    projects onto, so\n    $\\operatorname{tr}(\\bm{P_Q}) = \\operatorname{rank}(\\bm{Q})$. Thus,\n    the average error is:\n    $$\\mathbb{E}_{\\bm q}[\\text{error}(\\bm q)] = \\sigma^2 (p - \\operatorname{rank}(\\bm{Q}))$$\n    Since the rank of $\\bm{Q}$ increases with each linearly independent\n    question added, the average error decreases linearly until\n    $\\operatorname{rank}(\\bm{Q})=p$, at which point it becomes zero.\n\n ◻\n:::\n::::\n\n::: proposition\n**Proposition 4** (Two--stage updating with agents 1 and 2). *Consider\ntwo agents who share an isotropic prior\n$\\bm{w}\\sim N(\\bm{0},\\,\\sigma^{2}\\bm{I}_p)$.*\n\n- *Agent $1$ observes data $(\\bm{Q}_1,\\bm{a}_1)$ and forms the posterior\n  mean\n  $$\\hat{\\bm w}_1 = \\bm{Q}_1^{\\top}(\\bm{Q}_1\\bm{Q}_1^{\\top})^{-1}\\bm{a}_1, \\qquad \\bm{P}_1 := \\bm{Q}_1^{\\top}(\\bm{Q}_1\\bm{Q}_1^{\\top})^{-1}\\bm{Q}_1.$$*\n\n- *Agent $2$ observes data $(\\bm{Q}_2,\\bm{a}_2)$ and forms the posterior\n  mean\n  $$\\hat{\\bm w}_2 = \\bm{Q}_2^{\\top}(\\bm{Q}_2\\bm{Q}_2^{\\top})^{-1}\\bm{a}_2, \\qquad \\bm{P}_2 := \\bm{Q}_2^{\\top}(\\bm{Q}_2\\bm{Q}_2^{\\top})^{-1}\\bm{Q}_2.$$*\n\n- *A new question $\\bm{q}\\in\\{-1,1\\}^{p}$ arrives. Agent $1$ announces\n  the estimate $\\hat{a}_1 = \\bm{q}'\\hat{\\bm w}_1$.*\n\n*Let $$\\begin{align}\n      \\mu_2 &= \\bm{q}'\\hat{\\bm w}_2, &  \\sigma_2^{2} &= \\sigma^{2}\\,\\bm{q}'(\\bm{I}-\\bm{P}_2)\\bm{q},\\\\\n      \\mu_{2,1} &= \\bm{q}'\\bm{P}_1\\hat{\\bm w}_2, & \\sigma_{21} &= \\sigma^{2}\\,\\bm{q}'(\\bm{I}-\\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q},\\\\\n      \\sigma_{1\\mid 2}^{2} &= \\sigma^{2}\\,\\bm{q}'\\bm{P}_1(\\bm{I}-\\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q}, & \\kappa &= \\frac{\\sigma_{21}}{\\sigma_{1\\mid2}^{2}}.\n\\end{align}$$*\n\n*Then, the posterior distribution of the true answer $a=\\bm{q}'\\bm{w}$\nfor agent $2$ before seeing $\\hat{a}_1$ is $N(\\mu_2,\\,\\sigma_2^{2})$,\nand after observing $\\hat{a}_1$ it is\n$$a\\mid \\hat{a}_1,\\bm{a}_2 \\;\\sim\\; N\\bigl(\\mu_{2\\mid1},\\,\\sigma_{2\\mid1}^{2}\\bigr),\\qquad\n      \\mu_{2\\mid1}=\\mu_{2}+\\kappa\\bigl(\\hat{a}_1-\\mu_{2,1}\\bigr),\\quad\n      \\sigma_{2\\mid1}^{2}=\\sigma_{2}^{2}-\\kappa\\,\\sigma_{21}.$$*\n:::\n\n:::: greyproof\n::: proof\n*Proof.* The estimate of agent 1 is a linear function of the true\nweights $\\bm{w}$, since $\\bm{a}_1 = \\bm{Q}_1\\bm{w}$, so\n$\\hat{a}_1 = \\bm{q}'\\hat{\\bm w}_1 = \\bm{q}'\\bm{Q}_1^{\\top}(\\bm{Q}_1\\bm{Q}_1^{\\top})^{-1}\\bm{a}_1 = \\bm{q}'\\bm{P}_1\\bm{w}$.\n\nConditioning on agent $2$'s data, the posterior for $\\bm{w}$ is\n$N(\\hat{\\bm w}_2,\\,\\Sigma_2)$ with\n$\\Sigma_2 = \\sigma^{2}(\\bm{I}-\\bm{P}_2)$. The pair $(a,\\hat{a}_1)$ is\ntherefore jointly Gaussian, since both are linear functions of $\\bm{w}$.\nTheir joint distribution conditional on agent 2's data has:\n\n- $E[a | \\bm{a}_2] = \\bm{q}'\\hat{\\bm{w}}_2 = \\mu_2$\n\n- $E[\\hat{a}_1 | \\bm{a}_2] = \\bm{q}'\\bm{P}_1\\hat{\\bm{w}}_2 = \\mu_{2,1}$\n\n- $\\text{Var}(a | \\bm{a}_2) = \\bm{q}'\\sigma^2(\\bm{I} - \\bm{P}_2)\\bm{q} = \\sigma_2^2$\n\n- $\\text{Var}(\\hat{a}_1 | \\bm{a}_2) = \\bm{q}'\\bm{P}_1\\sigma^2(\\bm{I} - \\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q} = \\sigma_{1|2}^2$\n\n- $\\text{Cov}(a, \\hat{a}_1 | \\bm{a}_2) = \\bm{q}'\\sigma^2(\\bm{I} - \\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q} = \\sigma_{21}$\n\nSo the covariance matrix of $(a, \\hat{a}_1)$ conditional on agent 2's\ndata is: $$\\begin{pmatrix}\n  \\sigma_2^{2} & \\sigma_{21} \\\\\n  \\sigma_{21} & \\sigma_{1\\mid2}^{2}\n\\end{pmatrix}$$\n\nFor any joint Gaussian vector, the conditional distribution of the first\ncomponent given the second is again Gaussian with\n$$\\mu_{2\\mid1}=\\mu_{2}+\\frac{\\sigma_{21}}{\\sigma_{1\\mid2}^{2}}\\bigl(\\hat{a}_1-\\mu_{2,1}\\bigr), \\qquad\n\\sigma_{2\\mid1}^{2}=\\sigma_{2}^{2}-\\frac{\\sigma_{21}^{2}}{\\sigma_{1\\mid2}^{2}}.$$\nIdentifying $\\kappa=\\sigma_{21}/\\sigma_{1\\mid2}^{2}$ yields the stated\nresult. ◻\n:::\n::::\n\n::: proposition\n**Proposition 5** (Conditions for valuable two-stage updating). *In the\nsetting of Proposition 4, consulting agent 1 provides value to agent 2\nif and only if:\n$$\\bm{q}'(\\bm{I} - \\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q} \\neq 0$$ When this\ncondition holds:*\n\n- *The posterior mean changes: $\\mu_{2|1} \\neq \\mu_2$*\n\n- *The posterior variance decreases: $\\sigma_{2|1}^2 < \\sigma_2^2$*\n\n*When this condition fails, consulting agent 1 provides no additional\ninformation: $\\mu_{2|1} = \\mu_2$ and $\\sigma_{2|1}^2 = \\sigma_2^2$.*\n:::\n\n:::: greyproof\n::: proof\n*Proof.* From Proposition 4, the change in the posterior mean is\n$\\mu_{2|1} - \\mu_2 = \\kappa(\\hat{a}_1 - \\mu_{2,1})$, and the change in\nposterior variance is\n$\\sigma_2^2 - \\sigma_{2|1}^2 = \\kappa \\sigma_{21}$, where\n$\\kappa = \\frac{\\sigma_{21}}{\\sigma_{1|2}^2}$ and\n$\\sigma_{21} = \\sigma^2 \\bm{q}'(\\bm{I} - \\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q}$.\n\nIf $\\sigma_{21} = 0$, then $\\kappa = 0$, so $\\mu_{2|1} = \\mu_2$ and\n$\\sigma_{2|1}^2 = \\sigma_2^2$.\n\nIf $\\sigma_{21} \\neq 0$, then $\\kappa \\neq 0$ (since\n$\\sigma_{1|2}^2 \\geq 0$ with equality only when\n$\\bm{P}_1(\\bm{I} - \\bm{P}_2) = \\bm{0}$, which implies\n$\\sigma_{21} = 0$). In this case, both the mean and variance will\ngenerally change unless $\\hat{a}_1 = \\mu_{2,1}$, which occurs with\nprobability zero.\n\nTherefore, two-stage updating provides value if and only if\n$\\sigma_{21} = \\sigma^2 \\bm{q}'(\\bm{I} - \\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q} \\neq 0$. ◻\n:::\n::::\n\nThe intuition behind Proposition 5 is straightforward: **it is\nworthwhile to consult another agent if and only if the component of the\nquestion that you don't understand overlaps with the other agent's area\nof expertise.**\n\nMore precisely:\n\n- $(\\bm{I} - \\bm{P}_2)\\bm{q}$ represents the *residual* of the question\n  after projecting it onto agent 2's own experience. This is the part of\n  the question that agent 2 finds novel or unfamiliar.\n\n- $\\bm{P}_1^{\\top}\\bm{q}$ represents the component of the question that\n  lies within agent 1's area of expertise (the row space of their\n  experience matrix $\\bm{Q}_1$).\n\n- The condition $\\bm{q}'(\\bm{I} - \\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q} \\neq 0$\n  requires that these two components are not orthogonal---there must be\n  some overlap between what agent 2 doesn't know and what agent 1 does\n  know.\n\nPut informally: consultation becomes valuable when there is overlap\nbetween agent 2's knowledge gaps and agent 1's strengths.\n\nIn the context of the ChatGPT model, this suggests that an AI assistant\nis most valuable for questions where:\n\n1.  The question contains elements that are novel to the human user\n    (large $\\|(\\bm{I} - \\bm{P}_2)\\bm{q}\\|$)\n\n2.  These novel elements fall within the AI's training domain (non-zero\n    projection onto the AI's knowledge space)\n\n## Human alone, chatbot alone, or consultation?\n\nWe can characterize the conditions for the three possible actions:\n\nSuppose there is some small $\\varepsilon$ cost to delegating a question\nto the chatbot, and some slightly larger $\\delta>\\varepsilon$ cost to\nconsulting the chatbot first, and then giving a human-adjusted answer.\nThen we can characterize the conditions for the three regions:\n\n$$S_{1\\to 2} = \\bm{q}'(\\bm{I}-\\bm{P}_2)\\bm{P}_1^{\\top}\\bm{q} \\quad\\text{(chatbot has info the human lacks)}$$\n$$S_{2\\to 1} = \\bm{q}'(\\bm{I}-\\bm{P}_1)\\bm{P}_2^{\\top}\\bm{q} \\quad\\text{(human has info the chatbot lacks)}$$\n\n::: {#tab:policies}\n  Policy                                Condition                        Interpretation\n  --------------- ------------------------------------------------------ --------------------------------------------------------------------------------------------------------------------------------------------------\n  Human alone       $S_{1\\to 2} = 0 \\;\\text{and}\\; S_{2\\to 1} \\neq 0$    Chatbot has no relevant information beyond what the human already knows, while the human has some information the chatbot lacks.\n  Chatbot alone     $S_{2\\to 1} = 0 \\;\\text{and}\\; S_{1\\to 2} \\neq 0$    Human has no relevant information beyond what the chatbot already knows, while the chatbot has some information the human lacks.\n  Consultation     $S_{1\\to 2} \\neq 0 \\;\\text{and}\\; S_{2\\to 1} \\neq 0$  Each has relevant information that the other lacks, so combining them is worthwhile despite the higher consultation cost $\\delta > \\varepsilon$.\n\n  : Information-structure conditions for preferring human alone, chatbot\n  alone, or consultation.\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}