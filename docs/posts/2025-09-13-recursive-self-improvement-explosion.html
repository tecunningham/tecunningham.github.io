<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

   <meta charset="utf-8">
   <meta name="generator" content="quarto-1.8.25">


   <meta name="author" content="Tom Cunningham">
   <meta name="dcterms.date" content="2026-01-04">
   <meta name="description" content="Tom Cunningham blog">

   <title>Recursive Self-Improvement | Tom Cunningham – Tom Cunningham</title>
   <style>
      code {
         white-space: pre-wrap;
      }

      span.smallcaps {
         font-variant: small-caps;
      }

      div.columns {
         display: flex;
         gap: min(4vw, 1.5em);
      }

      div.column {
         flex: auto;
         overflow-x: auto;
      }

      div.hanging-indent {
         margin-left: 1.5em;
         text-indent: -1.5em;
      }

      ul.task-list {
         list-style: none;
      }

      ul.task-list li input[type="checkbox"] {
         width: 0.8em;
         margin: 0 0.8em 0.2em -1em;
         /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */
         vertical-align: middle;
      }
   </style>


   <script src="../site_libs/quarto-nav/quarto-nav.js"></script>
   <script src="../site_libs/quarto-nav/headroom.min.js"></script>
   <script src="../site_libs/clipboard/clipboard.min.js"></script>
   <script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
   <script src="../site_libs/quarto-search/fuse.min.js"></script>
   <script src="../site_libs/quarto-search/quarto-search.js"></script>
   <meta name="quarto:offset" content="../">
   <script src="../site_libs/quarto-html/quarto.js" type="module"></script>
   <script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
   <script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
   <script src="../site_libs/quarto-html/popper.min.js"></script>
   <script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
   <script src="../site_libs/quarto-html/anchor.min.js"></script>
   <link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
   <link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css"
      rel="stylesheet" id="quarto-text-highlighting-styles">
   <script src="../site_libs/bootstrap/bootstrap.min.js"></script>
   <link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
   <link href="../site_libs/bootstrap/bootstrap-d5e7c60e6424aa6ccf163f01508596ce.min.css" rel="stylesheet"
      append-hash="true" id="quarto-bootstrap" data-mode="light">
   <script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

   <script type="text/javascript">

      (function (i, s, o, g, r, a, m) {
         i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
         }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-12027453-1', 'auto');

      ga('send', {
         hitType: 'pageview',
         'anonymizeIp': true,
      });
   </script>
   <script>window.MathJax = {
         loader: { load: ["https://cdn.jsdelivr.net/gh/sonoisa/XyJax-v3@3.0.1/build/xypic.js"] },
         tex: {
            packages: { '[+]': ['xypic', 'bm'] },
            macros: {
               bm: ["\\boldsymbol{#1}", 1],
               ut: ["\\underbrace{#1}_{\\text{#2}}", 2],
               utt: ["\\underbrace{#1}_{\\substack{\\text{#2}\\\\\\text{#3}}}", 3]
            }
         }
      };
   </script>
   <style>
      h1 {
         border-bottom: 8px solid #557;
      }

      h2 {
         border-bottom: 1px solid #ccc;
      }

      .greyproof {
         background-color: #f5f5f5;
         padding: 1em;
         margin: 1em 0;
         border-radius: 4px;
      }
   </style>
   <meta name="quarto:status" content="draft">

   <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
   <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg-full.js" type="text/javascript"></script>

   <script type="text/javascript">
      const typesetMath = (el) => {
         if (window.MathJax) {
            // MathJax Typeset
            window.MathJax.typeset([el]);
         } else if (window.katex) {
            // KaTeX Render
            var mathElements = el.getElementsByClassName("math");
            var macros = [];
            for (var i = 0; i < mathElements.length; i++) {
               var texText = mathElements[i].firstChild;
               if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
                  window.katex.render(texText.data, mathElements[i], {
                     displayMode: mathElements[i].classList.contains('display'),
                     throwOnError: false,
                     macros: macros,
                     fleqn: false
                  });
               }
            }
         }
      }
      window.Quarto = {
         typesetMath
      };
   </script>

   <link rel="stylesheet" href="../styles.css">
   <meta name="twitter:title" content="Recursive Self-Improvement | Tom Cunningham">
   <meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed quarto-light">

   <div id="quarto-search-results"></div>
   <header id="quarto-header" class="headroom fixed-top quarto-banner">
      <div id="quarto-draft-alert" class="alert alert-warning"><i class="bi bi-pencil-square"></i>Draft</div>
      <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
         <div class="navbar-container container-fluid">
            <div class="navbar-brand-container mx-auto">
               <a href="../index.html" class="navbar-brand navbar-brand-logo">
               </a>
               <a class="navbar-brand" href="../index.html">
                  <span class="navbar-title">Tom Cunningham</span>
               </a>
            </div>
            <div id="quarto-search" class="" title="Search"></div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
               aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation"
               onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
               <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
               <ul class="navbar-nav navbar-nav-scroll ms-auto">
                  <li class="nav-item">
                     <a class="nav-link" href=".././about.html">
                        <span class="menu-text">About</span></a>
                  </li>
                  <li class="nav-item compact">
                     <a class="nav-link" href="https://twitter.com/testingham"> <i class="bi bi-twitter" role="img">
                        </i>
                        <span class="menu-text"></span></a>
                  </li>
                  <li class="nav-item compact">
                     <a class="nav-link" href="https://www.linkedin.com/in/tom-cunningham-a9433/"> <i
                           class="bi bi-linkedin" role="img">
                        </i>
                        <span class="menu-text"></span></a>
                  </li>
                  <li class="nav-item compact">
                     <a class="nav-link" href="https://tecunningham.github.io/index.xml"> <i class="bi bi-rss-fill"
                           role="img">
                        </i>
                        <span class="menu-text"></span></a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="https://scholar.google.com/citations?user=MDB_DgkAAAAJ">
                        <span class="menu-text">scholar</span></a>
                  </li>
               </ul>
            </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
            </div>
         </div> <!-- /container-fluid -->
      </nav>
   </header>
   <!-- content -->
   <header id="title-block-header" class="quarto-title-block default page-columns page-full">
      <div class="quarto-title-banner page-columns page-full">
         <div class="quarto-title column-body">
            <h1 class="title">Recursive Self-Improvement</h1>
         </div>
      </div>


      <div class="quarto-title-meta">

         <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
               <p>Tom Cunningham </p>
            </div>
            <<<<<<< HEAD </div>

               <div>
                  <div class="quarto-title-meta-heading">Published</div>
                  <div class="quarto-title-meta-contents">
                     <p class="date">January 4, 2026</p>
                  </div>
               </div>


               =======
         </div>

         <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
               <p class="date">January 5, 2026</p>
               >>>>>>> 0107478 (substitution)
            </div>


   </header>
   <div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
      <!-- sidebar -->
      <!-- margin-sidebar -->
      <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">

      </div>
      <!-- main -->
      <main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





         <style>
            h1 {
               border-bottom: 4px solid black;
            }

            h2 {
               border-bottom: 1px solid gray;
               padding-bottom: 0px;
               color: black;
            }

            dl {
               display: grid;
            }

            dt {
               grid-column-start: 1;
               width: 4cm;
            }

            dd {
               grid-column-start: 2;
               margin-left: 2em;
            }
         </style>
         <section id="summary" class="level1">
            <h1>Summary</h1>
            <dl>
               <dt>TL;DR: an explosion is AI capabilities is <em>possible</em> but it’s intrinsically difficult to
                  forecasat.</dt>
               <dd>
                  <p>Define an explosion as a significant acceleration of the historical rates of progress in AI,
                     e.g.&nbsp;measured by effective compute required for a given level of accuracy
                     (e.g.&nbsp;perplexity).</p>
               </dd>
               <dt>Progress in AI is rapid but smooth.</dt>
               <dd>
                  <p>We can measure progress in various ways, algorithmic progress has accelerated over the last 10-15
                     years. Epoch estimate that algorithmic efficiency has been growing at 3X/year between 2012-2024,
                     measured by effective compute.</p>
               </dd>
               <dt>Forecasters expect an 8-20% chance of an explosion by 2030.</dt>
               <dd>
                  They define an explosion as a 3X speedup in the historical rate of progress by some measure, from the
                  METR/FRI survey.
               </dd>
               <dt>AI has already been accelerating AI research.</dt>
               <dd>
                  <p>AI has been self-accelerating for decades: (1) automatic differentiation; (2) bayesian optimization
                     of hyperparameters; (3) neural architecture search; (4) LLM coding autocomplete and chatbots; (5)
                     LLM coding agents.</p>
               </dd>
               <dt>There’s good theoretical reason to expect an explosion.</dt>
               <dd>
                  <p>(…)</p>
               </dd>
               <dt>AI speedups to discovery depends on the shape of the underlying landscape.</dt>
               <dd>
                  <p>(abc)</p>
               </dd>
               <dt>AI usefulness for optimization depends on features of the setup.</dt>
               <dd>
                  <p>Hassabis says AI will make progress wherever there’s (1) combinatorial search space; (2) clear
                     feedback; (3) lots of data or an automatic validator. But there’s clearly a fourth condition: that
                     the data has some lower-dimensional latent structure. There are many problems that satisfy the
                     first 3 but where we don’t expect substantial progress from autonomous NNs: (A) the telephone book;
                     (B) mapping out stars in the sky; (C) documenting the genome.</p>
               </dd>
            </dl>
         </section>
         <section id="models" class="level1">
            <h1>Models</h1>
            <dl>
               <dt>AK model of recursive growth.</dt>
               <dd>
                  <p>Suppose we have <span class="math inline">\(Y=AK^\alpha\)</span>, and also we use some share <span
                        class="math inline">\(s\)</span> of output on R&amp;D, which increases productivity <span
                        class="math inline">\(A=sY^\beta\)</span>, then if <span
                        class="math inline">\(\beta+\alpha&gt;1\)</span> we get a continuously increasing growth rate.
                     Aghion, Jones and Jones (2017) elaborate on this model, where AI gradually is able to take over
                     human tasks, &amp; they get a similar condition.</p>
               </dd>
               <dd>
                  <p>The critical question is whether the returns to R&amp;D effort are sufficiently steep. Some classic
                     papers: Bloom et al.&nbsp;“are we running out of ideas”; and Erdil.</p>
               </dd>
            </dl>
         </section>
         <section id="figure-evals" class="level1">
            <h1>Figure / Evals</h1>
            <p>Q: what evals would be useful? Suppose we can plot the following:</p>
            <div class="cell">
               <div class="cell-output-display">
                  <div>
                     <figure class="figure">
                        <p><img
                              src="2025-09-13-recursive-self-improvement-explosion_files/figure-html/unnamed-chunk-1-1.png"
                              class="img-fluid figure-img" width="672"></p>
                     </figure>
                  </div>
               </div>
            </div>
            <p>We could plot data from a variety of differnt experiments on this plot, &amp; ask some interesting
               questions:</p>
            <ol type="1">
               <li>At what time horizon do we forecast models beating human-level ability at training models?</li>
               <li>Do we see grokking, i.e.&nbsp;discontinuous jumps in model-training ability?</li>
               <li>Are some models better than others at model-training?</li>
            </ol>
         </section>
         <section id="references" class="level1">
            <h1>References</h1>
            <dl>
               <dt>FRI/METR forecasts of AI progress.</dt>
               <dd>
                  (…)
               </dd>
               <dt>Kortum (1997) <a href="https://egc.yale.edu/sites/default/files/Kortum_1997.pdf">“Research,
                     Patenting, and Technological Change”</a></dt>
               <dd>
                  <p>He assumes that technological progress comes from taking random draws from a distribution
                     (undirected search). Then growth over time will be characterized by the extreme value distribution
                     of the underlying distribution, &amp; returns to experience will depend on the thickeness of tails.
                     Alternative assumptions:</p>
                  <ul>
                     <li>Bounded: growth slows as it approaches a ceiling.</li>
                     <li>Exponential (thin tails): <span class="math inline">\(A=\ln n\)</span></li>
                     <li>Pareto (thick tails): <span class="math inline">\(A = n^\gamma\)</span></li>
                  </ul>
               </dd>
               <dt>Erdil, Besiroglu, Ho (2024) <a
                     href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4814445">“Estimating Idea Production: A
                     Methodological Survey”</a></dt>
               <dd>
                  <p>They discuss the difficulty of estimating the returns to R&amp;D on productivity across a few
                     different domains. They have nice estimates for chess inputs &amp; outputs. They also estimate
                     algorithmic progress:</p>
                  <ul>
                     <li>Computer vision: doubling time 9 months 2012-2022.</li>
                     <li>RL sample efficiency: doubling time 11 months, 2015-2019.</li>
                     <li>SAT solvers: doubling time 2 years, 1997-2018.</li>
                     <li>Linear programming: doubling time 6 years, 1998-2018.</li>
                  </ul>
                  <p>They include a nice derivation of the critical threshold for hyperbolic growth:</p>
                  <p><span class="math display">\[\begin{aligned}
                        Y &amp;= AK^\alpha \\
                        \dot{K} &amp;\propto Y &amp;&amp; \text{(constant savings rate)}\\
                        \dot{A}/A &amp;\propto A^{-\beta}K^\lambda &amp;&amp; \text{(productivity growth)}
                        \end{aligned}\]</span></p>
                  <p>You’ll get steady-state growth if and only if <span
                        class="math inline">\(\lambda/\beta+\alpha=1\)</span>. You’ll get hyperbolic growth if <span
                        class="math inline">\(\lambda/\beta+\alpha&gt;1\)</span>.</p>
               </dd>
               <dt>Aghion, Jones, and Jones (2019) “Artificial Intelligence and Economic Growth”</dt>
               <dd>
                  They give conditions under which automating R&amp;D will cause an explosion in GDP growth (i.e.&nbsp;a
                  steadily increasing rate of growth, AKA hyperbolic growth).
               </dd>
            </dl>
            <dl>
               <dt>Eric Drexler (2025) <a
                     href="https://aiprospects.substack.com/p/the-reality-of-recursive-improvement">“The Reality of
                     Recursive Self-Improvement”</a></dt>
               <dd>
                  <p>He argues that . Automating steps in the optimization loop: - Automating differentiation. - Neural
                     architecture search. - Bayesian optimization.</p>
                  <blockquote class="blockquote">
                     <p>“The fundamental mechanism is systemic friction reduction — aggregate improvements expand
                        possibilities by enabling faster progress and more ambitious goals</p>
                  </blockquote>
                  <blockquote class="blockquote">
                     <p>“In hyperparameter optimization, advances in Bayesian and multi-fidelity methods often achieve
                        order-of-magnitude savings compared to naive grid search. What once required thousands of full
                        model trainings can now be accomplished with fewer and more intelligent probes. As daunting
                        costs of innovation fall, research becomes faster and more ambitious.</p>
                  </blockquote>
                  <blockquote class="blockquote">
                     <p>“The trajectory toward comprehensive AI capabilities makes these developments predictable, not
                        in detail, but in outline.</p>
                  </blockquote>
               </dd>
               <dt>Eric Drexler (Aug 2025) <a
                     href="https://aiprospects.substack.com/p/the-reality-of-recursive-improvement">“The Reality of
                     Recursive Self-Improvement”</a></dt>
               <dd>
                  <p>Automating steps in the optimization loop:</p>
                  <ul>
                     <li>Automating differentiation.</li>
                     <li>Neural architecture search.</li>
                     <li>Bayesian optimization.</li>
                  </ul>
               </dd>
               <dd>
                  <blockquote class="blockquote">
                     <p>“The fundamental mechanism is systemic friction reduction — aggregate improvements expand
                        possibilities by enabling faster progress and more ambitious goals</p>
                  </blockquote>
                  <blockquote class="blockquote">
                     <p>“In hyperparameter optimization, advances in Bayesian and multi-fidelity methods often achieve
                        order-of-magnitude savings compared to naive grid search. What once required thousands of full
                        model trainings can now be accomplished with fewer and more intelligent probes. As daunting
                        costs of innovation fall, research becomes faster and more ambitious.</p>
                  </blockquote>
                  <blockquote class="blockquote">
                     <p>“The trajectory toward comprehensive AI capabilities makes these developments predictable, not
                        in detail, but in outline.</p>
                  </blockquote>
               </dd>
            </dl>
         </section>
         <section id="we-need-more-bottom-up-modelling-of-ais-economic-effect-unfinished"
            class="level1 page-columns page-full">
            <h1>We need more bottom-up modelling of AI’s economic effect [UNFINISHED]</h1>
            <dl class="page-columns page-full">
               <dt>There are two approaches to modelling AI’s effect.</dt>
               <dd>
                  <p>From a lot of conversations about recursive self-improvement I realized it’s useful to distinguish
                     between two qualitatively different ways of thinking about AI’s ability to do work:</p>
                  <ol type="1">
                     <li><em>Top down:</em> AI replaces each of the human subtasks.</li>
                     <li><em>Bottom-up:</em> AI just does the entire procedure from first principles.</li>
                  </ol>
                  <p>I think 80% of discussion of economic impacts was of the top-down type.</p>
               </dd>
               <dt>What would bottom-up modelling look like?</dt>
               <dd>
                  There are some papers with “model organisms” of recursive self-improvement: Grefenstette (1986) <a
                     href="https://ui.adsabs.harvard.edu/abs/1986ITSMC..16..122G/abstract">genetic algorithm to learn
                     parameters for genetic algorithsm</a>; <a href="https://arxiv.org/pdf/2003.03384">AutoML-Zero</a>
                  (2020); Schmidhuber (2003) <a href="https://arxiv.org/abs/cs/0309048?utm_source=chatgpt.com">Godel
                     Machines</a>.
               </dd>
               <dt>What are the implications for recursive self-improvement?</dt>
               <dd>
                  AI treats it as a pure optimization problem, already it’s better at chip design, algorithm design.
               </dd>
               <dt>Some related discussion:</dt>
               <dd class="page-columns page-full">
                  <p>Nathan Lambert recapitulates some discussions from the Curve about recursive self-improvement <a
                        href="https://www.interconnects.ai/p/thoughts-on-the-curve">here</a>.</p>
                  <p>This is related to the Bresnahan/systems view of AI. He talks about the first wave of ML models:
                     “The transition to ICT-based production has largely proceeded at the production system level, not
                     the task level.”<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>
                  </p>
                  <div class="no-row-height column-margin column-container">
                     <div id="fn1">
                        <p><sup>1</sup>&nbsp;“My empirical conclusion about these applications is that the lazy idea of
                           AI – that is, of computer systems that are able to perform productive tasks previously done
                           by humans– is irrelevant to understanding how these technologies create value.
                           Here“irrelevant” does not mean that substitution of machine for human tasks is less important
                           than other determinants of the value in use of AITs. It means irrelevant: task-level
                           substitution of machine for human plays no role in these highly valuable systems.”</p>
                     </div>
                  </div>
               </dd>
            </dl>


         </section>


      </main> <!-- /main -->
      <script id="quarto-html-after-body" type="application/javascript">
         window.document.addEventListener("DOMContentLoaded", function (event) {
            const icon = "";
            const anchorJS = new window.AnchorJS();
            anchorJS.options = {
               placement: 'right',
               icon: icon
            };
            anchorJS.add('.anchored');
            const isCodeAnnotation = (el) => {
               for (const clz of el.classList) {
                  if (clz.startsWith('code-annotation-')) {
                     return true;
                  }
               }
               return false;
            }
            const onCopySuccess = function (e) {
               // button target
               const button = e.trigger;
               // don't keep focus
               button.blur();
               // flash "checked"
               button.classList.add('code-copy-button-checked');
               var currentTitle = button.getAttribute("title");
               button.setAttribute("title", "Copied!");
               let tooltip;
               if (window.bootstrap) {
                  button.setAttribute("data-bs-toggle", "tooltip");
                  button.setAttribute("data-bs-placement", "left");
                  button.setAttribute("data-bs-title", "Copied!");
                  tooltip = new bootstrap.Tooltip(button,
                     {
                        trigger: "manual",
                        customClass: "code-copy-button-tooltip",
                        offset: [0, -8]
                     });
                  tooltip.show();
               }
               setTimeout(function () {
                  if (tooltip) {
                     tooltip.hide();
                     button.removeAttribute("data-bs-title");
                     button.removeAttribute("data-bs-toggle");
                     button.removeAttribute("data-bs-placement");
                  }
                  button.setAttribute("title", currentTitle);
                  button.classList.remove('code-copy-button-checked');
               }, 1000);
               // clear code selection
               e.clearSelection();
            }
            const getTextToCopy = function (trigger) {
               const outerScaffold = trigger.parentElement.cloneNode(true);
               const codeEl = outerScaffold.querySelector('code');
               for (const childEl of codeEl.children) {
                  if (isCodeAnnotation(childEl)) {
                     childEl.remove();
                  }
               }
               return codeEl.innerText;
            }
            const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
               text: getTextToCopy
            });
            clipboard.on('success', onCopySuccess);
            if (window.document.getElementById('quarto-embedded-source-code-modal')) {
               const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
                  text: getTextToCopy,
                  container: window.document.getElementById('quarto-embedded-source-code-modal')
               });
               clipboardModal.on('success', onCopySuccess);
            }
            var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
            var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("tecunningham\.github\.io");
            var isInternal = (href) => {
               return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
            }
            // Inspect non-navigation links and adorn them if external
            var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
            for (var i = 0; i < links.length; i++) {
               const link = links[i];
               if (!isInternal(link.href)) {
                  // undo the damage that might have been done by quarto-nav.js in the case of
                  // links that we want to consider external
                  if (link.dataset.originalHref !== undefined) {
                     link.href = link.dataset.originalHref;
                  }
               }
            }
            function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
               const config = {
                  allowHTML: true,
                  maxWidth: 500,
                  delay: 100,
                  arrow: false,
                  appendTo: function (el) {
                     return el.parentElement;
                  },
                  interactive: true,
                  interactiveBorder: 10,
                  theme: 'quarto',
                  placement: 'bottom-start',
               };
               if (contentFn) {
                  config.content = contentFn;
               }
               if (onTriggerFn) {
                  config.onTrigger = onTriggerFn;
               }
               if (onUntriggerFn) {
                  config.onUntrigger = onUntriggerFn;
               }
               window.tippy(el, config);
            }
            const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
            for (var i = 0; i < noterefs.length; i++) {
               const ref = noterefs[i];
               tippyHover(ref, function () {
                  // use id or data attribute instead here
                  let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
                  try { href = new URL(href).hash; } catch { }
                  const id = href.replace(/^#\/?/, "");
                  const note = window.document.getElementById(id);
                  if (note) {
                     return note.innerHTML;
                  } else {
                     return "";
                  }
               });
            }
            const xrefs = window.document.querySelectorAll('a.quarto-xref');
            const processXRef = (id, note) => {
               // Strip column container classes
               const stripColumnClz = (el) => {
                  el.classList.remove("page-full", "page-columns");
                  if (el.children) {
                     for (const child of el.children) {
                        stripColumnClz(child);
                     }
                  }
               }
               stripColumnClz(note)
               if (id === null || id.startsWith('sec-')) {
                  // Special case sections, only their first couple elements
                  const container = document.createElement("div");
                  if (note.children && note.children.length > 2) {
                     container.appendChild(note.children[0].cloneNode(true));
                     for (let i = 1; i < note.children.length; i++) {
                        const child = note.children[i];
                        if (child.tagName === "P" && child.innerText === "") {
                           continue;
                        } else {
                           container.appendChild(child.cloneNode(true));
                           break;
                        }
                     }
                     if (window.Quarto?.typesetMath) {
                        window.Quarto.typesetMath(container);
                     }
                     return container.innerHTML
                  } else {
                     if (window.Quarto?.typesetMath) {
                        window.Quarto.typesetMath(note);
                     }
                     return note.innerHTML;
                  }
               } else {
                  // Remove any anchor links if they are present
                  const anchorLink = note.querySelector('a.anchorjs-link');
                  if (anchorLink) {
                     anchorLink.remove();
                  }
                  if (window.Quarto?.typesetMath) {
                     window.Quarto.typesetMath(note);
                  }
                  if (note.classList.contains("callout")) {
                     return note.outerHTML;
                  } else {
                     return note.innerHTML;
                  }
               }
            }
            for (var i = 0; i < xrefs.length; i++) {
               const xref = xrefs[i];
               tippyHover(xref, undefined, function (instance) {
                  instance.disable();
                  let url = xref.getAttribute('href');
                  let hash = undefined;
                  if (url.startsWith('#')) {
                     hash = url;
                  } else {
                     try { hash = new URL(url).hash; } catch { }
                  }
                  if (hash) {
                     const id = hash.replace(/^#\/?/, "");
                     const note = window.document.getElementById(id);
                     if (note !== null) {
                        try {
                           const html = processXRef(id, note.cloneNode(true));
                           instance.setContent(html);
                        } finally {
                           instance.enable();
                           instance.show();
                        }
                     } else {
                        // See if we can fetch this
                        fetch(url.split('#')[0])
                           .then(res => res.text())
                           .then(html => {
                              const parser = new DOMParser();
                              const htmlDoc = parser.parseFromString(html, "text/html");
                              const note = htmlDoc.getElementById(id);
                              if (note !== null) {
                                 const html = processXRef(id, note);
                                 instance.setContent(html);
                              }
                           }).finally(() => {
                              instance.enable();
                              instance.show();
                           });
                     }
                  } else {
                     // See if we can fetch a full url (with no hash to target)
                     // This is a special case and we should probably do some content thinning / targeting
                     fetch(url)
                        .then(res => res.text())
                        .then(html => {
                           const parser = new DOMParser();
                           const htmlDoc = parser.parseFromString(html, "text/html");
                           const note = htmlDoc.querySelector('main.content');
                           if (note !== null) {
                              // This should only happen for chapter cross references
                              // (since there is no id in the URL)
                              // remove the first header
                              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                                 note.children[0].remove();
                              }
                              const html = processXRef(null, note);
                              instance.setContent(html);
                           }
                        }).finally(() => {
                           instance.enable();
                           instance.show();
                        });
                  }
               }, function (instance) {
               });
            }
            let selectedAnnoteEl;
            const selectorForAnnotation = (cell, annotation) => {
               let cellAttr = 'data-code-cell="' + cell + '"';
               let lineAttr = 'data-code-annotation="' + annotation + '"';
               const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
               return selector;
            }
            const selectCodeLines = (annoteEl) => {
               const doc = window.document;
               const targetCell = annoteEl.getAttribute("data-target-cell");
               const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
               const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
               const lines = annoteSpan.getAttribute("data-code-lines").split(",");
               const lineIds = lines.map((line) => {
                  return targetCell + "-" + line;
               })
               let top = null;
               let height = null;
               let parent = null;
               if (lineIds.length > 0) {
                  //compute the position of the single el (top and bottom and make a div)
                  const el = window.document.getElementById(lineIds[0]);
                  top = el.offsetTop;
                  height = el.offsetHeight;
                  parent = el.parentElement.parentElement;
                  if (lineIds.length > 1) {
                     const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                     const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                     height = bottom - top;
                  }
                  if (top !== null && height !== null && parent !== null) {
                     // cook up a div (if necessary) and position it 
                     let div = window.document.getElementById("code-annotation-line-highlight");
                     if (div === null) {
                        div = window.document.createElement("div");
                        div.setAttribute("id", "code-annotation-line-highlight");
                        div.style.position = 'absolute';
                        parent.appendChild(div);
                     }
                     div.style.top = top - 2 + "px";
                     div.style.height = height + 4 + "px";
                     div.style.left = 0;
                     let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                     if (gutterDiv === null) {
                        gutterDiv = window.document.createElement("div");
                        gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                        gutterDiv.style.position = 'absolute';
                        const codeCell = window.document.getElementById(targetCell);
                        const gutter = codeCell.querySelector('.code-annotation-gutter');
                        gutter.appendChild(gutterDiv);
                     }
                     gutterDiv.style.top = top - 2 + "px";
                     gutterDiv.style.height = height + 4 + "px";
                  }
                  selectedAnnoteEl = annoteEl;
               }
            };
            const unselectCodeLines = () => {
               const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
               elementsIds.forEach((elId) => {
                  const div = window.document.getElementById(elId);
                  if (div) {
                     div.remove();
                  }
               });
               selectedAnnoteEl = undefined;
            };
            // Handle positioning of the toggle
            window.addEventListener(
               "resize",
               throttle(() => {
                  elRect = undefined;
                  if (selectedAnnoteEl) {
                     selectCodeLines(selectedAnnoteEl);
                  }
               }, 10)
            );
            function throttle(fn, ms) {
               let throttle = false;
               let timer;
               return (...args) => {
                  if (!throttle) { // first call gets through
                     fn.apply(this, args);
                     throttle = true;
                  } else { // all the others get throttled
                     if (timer) clearTimeout(timer); // cancel #2
                     timer = setTimeout(() => {
                        fn.apply(this, args);
                        timer = throttle = false;
                     }, ms);
                  }
               };
            }
            // Attach click handler to the DT
            const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
            for (const annoteDlNode of annoteDls) {
               annoteDlNode.addEventListener('click', (event) => {
                  const clickedEl = event.target;
                  if (clickedEl !== selectedAnnoteEl) {
                     unselectCodeLines();
                     const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
                     if (activeEl) {
                        activeEl.classList.remove('code-annotation-active');
                     }
                     selectCodeLines(clickedEl);
                     clickedEl.classList.add('code-annotation-active');
                  } else {
                     // Unselect the line
                     unselectCodeLines();
                     clickedEl.classList.remove('code-annotation-active');
                  }
               });
            }
            const findCites = (el) => {
               const parentEl = el.parentElement;
               if (parentEl) {
                  const cites = parentEl.dataset.cites;
                  if (cites) {
                     return {
                        el,
                        cites: cites.split(' ')
                     };
                  } else {
                     return findCites(el.parentElement)
                  }
               } else {
                  return undefined;
               }
            };
            var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
            for (var i = 0; i < bibliorefs.length; i++) {
               const ref = bibliorefs[i];
               const citeInfo = findCites(ref);
               if (citeInfo) {
                  tippyHover(citeInfo.el, function () {
                     var popup = window.document.createElement('div');
                     citeInfo.cites.forEach(function (cite) {
                        var citeDiv = window.document.createElement('div');
                        citeDiv.classList.add('hanging-indent');
                        citeDiv.classList.add('csl-entry');
                        var biblioDiv = window.document.getElementById('ref-' + cite);
                        if (biblioDiv) {
                           citeDiv.innerHTML = biblioDiv.innerHTML;
                        }
                        popup.appendChild(citeDiv);
                     });
                     return popup.innerHTML;
                  });
               }
            }
         });
      </script>
   </div> <!-- /content -->




</body>

</html>