<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tom Cunningham">
<meta name="dcterms.date" content="2024-04-27">
<meta name="description" content="Tom Cunningham blog">

<title>&lt;em&gt;Bloodhounds and Bulldogs&lt;/em&gt; | Tom Cunningham – Tom Cunningham</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-12027453-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>
<style>
   h1 {  border-bottom: 4px solid black;}
   h2 {  border-bottom: 1px solid #ccc;}
</style>
<script>window.MathJax = {
   loader: { load: ["https://cdn.jsdelivr.net/gh/sonoisa/XyJax-v3@3.0.1/build/xypic.js"]},
   tex: {packages: {'[+]': ['xypic','bm']},
         macros: {  bm: ["\\boldsymbol{#1}", 1],
                    ut: ["\\underbrace{#1}_{\\text{#2}}", 2],
                    utt: ["\\underbrace{#1}_{\\substack{\\text{#2}\\\\\\text{#3}}}", 3],
                    rsucc: ["\\rotatebox[origin=c]{#1}{$\succ$}",1]
                    }
   }
};
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
<meta name="twitter:title" content="Bloodhounds and Bulldogs | Tom Cunningham">
<meta name="twitter:description" content="On Perception, Judgment, &amp; Decision-Making">
<meta name="twitter:card" content="summary">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Tom Cunningham</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href=".././about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/testingham"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/tom-cunningham-a9433/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://tecunningham.github.io/index.xml"> <i class="bi bi-rss-fill" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.com/citations?user=MDB_DgkAAAAJ"> 
<span class="menu-text">scholar</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title"><em>Bloodhounds and Bulldogs</em></h1>
            <p class="subtitle lead">On Perception, Judgment, &amp; Decision-Making</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Tom Cunningham </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 27, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">1</span> Summary</a></li>
  <li><a href="#history" id="toc-history" class="nav-link" data-scroll-target="#history"><span class="header-section-number">2</span> History</a></li>
  <li><a href="#a-model-of-inference" id="toc-a-model-of-inference" class="nav-link" data-scroll-target="#a-model-of-inference"><span class="header-section-number">3</span> A Model of Inference</a></li>
  <li><a href="#a-model-of-encapsulated-inference-bloodhound" id="toc-a-model-of-encapsulated-inference-bloodhound" class="nav-link" data-scroll-target="#a-model-of-encapsulated-inference-bloodhound"><span class="header-section-number">4</span> A Model of Encapsulated Inference (“Bloodhound”)</a>
  <ul class="collapse">
  <li><a href="#implications-of-encapsulated-inference" id="toc-implications-of-encapsulated-inference" class="nav-link" data-scroll-target="#implications-of-encapsulated-inference"><span class="header-section-number">4.1</span> Implications of Encapsulated Inference</a></li>
  </ul></li>
  <li><a href="#perception" id="toc-perception" class="nav-link" data-scroll-target="#perception"><span class="header-section-number">5</span> Perception</a>
  <ul class="collapse">
  <li><a href="#basic-facts" id="toc-basic-facts" class="nav-link" data-scroll-target="#basic-facts"><span class="header-section-number">5.1</span> Basic facts</a></li>
  <li><a href="#predictions-of-encapsulated-inference" id="toc-predictions-of-encapsulated-inference" class="nav-link" data-scroll-target="#predictions-of-encapsulated-inference"><span class="header-section-number">5.2</span> Predictions of Encapsulated Inference</a></li>
  </ul></li>
  <li><a href="#judgment" id="toc-judgment" class="nav-link" data-scroll-target="#judgment"><span class="header-section-number">6</span> Judgment</a>
  <ul class="collapse">
  <li><a href="#basic-facts-1" id="toc-basic-facts-1" class="nav-link" data-scroll-target="#basic-facts-1"><span class="header-section-number">6.1</span> Basic Facts</a></li>
  <li><a href="#judgment-and-encapsulated-inference" id="toc-judgment-and-encapsulated-inference" class="nav-link" data-scroll-target="#judgment-and-encapsulated-inference"><span class="header-section-number">6.2</span> Judgment and Encapsulated Inference</a></li>
  <li><a href="#implications-for-improving-judgments" id="toc-implications-for-improving-judgments" class="nav-link" data-scroll-target="#implications-for-improving-judgments"><span class="header-section-number">6.3</span> Implications for Improving Judgments</a></li>
  </ul></li>
  <li><a href="#decision-making-unfinished" id="toc-decision-making-unfinished" class="nav-link" data-scroll-target="#decision-making-unfinished"><span class="header-section-number">7</span> Decision-Making [UNFINISHED]</a>
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background"><span class="header-section-number">7.1</span> Background</a></li>
  <li><a href="#perspective-from-encapsulated-inference" id="toc-perspective-from-encapsulated-inference" class="nav-link" data-scroll-target="#perspective-from-encapsulated-inference"><span class="header-section-number">7.2</span> Perspective from Encapsulated Inference</a></li>
  </ul></li>
  <li><a href="#encapsulated-preferences" id="toc-encapsulated-preferences" class="nav-link" data-scroll-target="#encapsulated-preferences"><span class="header-section-number">8</span> Encapsulated Preferences</a>
  <ul class="collapse">
  <li><a href="#additional-notes-on-encapsulated-preferences" id="toc-additional-notes-on-encapsulated-preferences" class="nav-link" data-scroll-target="#additional-notes-on-encapsulated-preferences"><span class="header-section-number">8.1</span> Additional Notes on Encapsulated Preferences</a></li>
  <li><a href="#why-would-we-have-encapsulated-preferences" id="toc-why-would-we-have-encapsulated-preferences" class="nav-link" data-scroll-target="#why-would-we-have-encapsulated-preferences"><span class="header-section-number">8.2</span> Why would we have encapsulated preferences</a></li>
  </ul></li>
  <li><a href="#notes-on-literature" id="toc-notes-on-literature" class="nav-link" data-scroll-target="#notes-on-literature"><span class="header-section-number">9</span> Notes on Literature</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p>This note contains some ideas about hierarchical structure in perception, judgment and decision-making that I haven’t seen explained clearly elsewhere.</p>
<section id="summary" class="level1 page-columns page-full" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Summary</h1>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="images/bloodhound.jpeg" class="img-fluid"> <br><br><br></p>
</div></div><div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-10-24-manifesto-perception-judgment-decision-making_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div></div></div>
<ol type="1">
<li><p><strong>A model of encapsulated inference (“bloodhound”).</strong> Many puzzling phenomena in perception, judgment, and decision-making can be explained if we assume that initial judgments are formed <em>pre-consciously</em> in a way that both (a) incorporates information not accessible to the conscious brain, and (b) does not incorporate information that is accessible to the conscious brain. This “double encapsulation” of judgment is a necessary condition for biases to occur in a model of the sequential aggregation of information. As an analogy we can think of someone tracking a scent with a bloodhound on a leash.Suppose the dog has private information, i.e.&nbsp;it know things that the human does not: this itself will not lead to inefficient decisions. However when the human also has private information, known only to her, then there can be inefficient decision-making relative to the benchmark of decisions based on pooling information between the person and the dog.</p></li>
<li><p><strong>Applied to perception.</strong> Many existing explanation of perceptual biases and illusions can be stated in terms of sequential aggregation of information. A prototypical case occurs when a perceptual cue that is ordinarily informative appears in a context where we are consciously aware that it is uninformative. Because the informational value of the cue is known only to the pre-conscious system the cue will still affect our judgment even when we know it to be irrelevant. There is an additional set of biases in judging the strength of raw sensory stimuli, e.g.&nbsp;the light faling on your eye. If the conscious brain does not have direct access to those stimuli then it will be reverse-inferred from the signals received from the encapsulated processes, which will induce spillovers between signals and result in contrast effects and cross-modal effects.</p></li>
<li><p><strong>Applied to judgment.</strong> The model says that biases in factual and logical judgments (anchoring, framing, etc.) occur in the same way as perceptual biases. A prototypical bias occurs when an ordinarily-informative cue appears in a situation where we know consciously that it is irrelevant. In short: it is rational to trust our instincts, even though our instincts can be sensitive to features of the environment that we know to be irrelevant.</p></li>
<li><p><strong>Applied to decision-making.</strong> We can treat decision-making as a special case of judgment, but we are judging relative value of each alternative. As in judgment we rationally trust our intuitions of value, despite being uncertain about what influences them. This can cause inconsistencies in decision-making when we are in unusual contexts. Many people have attempted to formalize decision biases (ambiguity aversion, prospect theory, etc.) but I believe those formalizations have limited value because (1) the biases’ fundamental causes are statistical regularities in the environment, and so the biases will be context-dependent rather than universal; and (2) people are self-reflective about their biases and act to correct them, so treating them as hard-wired into utility or perception will give misleading predictions.</p></li>
<li><p><strong>I discuss a little the history of the study of human judgment.</strong> There have been many dramatic shifts in paradigm and many laws have been proposed which later were found to generalize poorly outside their original domain. There is still today a lack of consensus around the basic reasons why human judgment is good in some domains, bad in others.</p></li>
<li><p><strong>Observation: in most cases human judgment is a close approximation of efficient inference.</strong> Computers rarely outperform humans when given the same information. In the history of psychology many discoveries of laws in human judgment have turned out to reflect, on closer inspection, optimal responses to the environment. However there are some cases where judgment makes simple mistakes – illusions, biases, anomalies – and so some theory is needed to explain why those happen.</p></li>
<li><p><strong>Encapsulated preferences (“bulldog”).</strong> I briefly discuss a separate feature of decision-making: the existence of encapsulated <em>preferences</em>, distinct from encapsulated <em>information</em>. Encapsulated preferences are hard-wired instincts that are rational with respect to a broader set of goals given a limited information-set. As an analogy think of a person with a bulldog on a leash who pulls you where they want to go: now the person is influenced by their dog in two ways: by the information received and by the dog’s own preferences.</p></li>
</ol>
</section>
<section id="history" class="level1 page-columns page-full" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> History</h1>
<p><strong>The study of human judgment is intellectual quicksand.</strong> Many historical paradigms for studying human thought and decision-making have left little trace. Many smart people spent decades working on theories that seem, in retrospect, confused and unnecessarily complicated. There are still multiple schools of thought on most major questions. I believe the most significant progress it the general acceptance that human judgment typically corresponds to optimal inference, discussed further below.</p>
<p>Two factors that might explain the lack of progress: (1) scientists’ own introspection becomes distorted such that it confirms their own theories; (2) the language we use to talk about perception and judgment is highly ambiguous, and this makes it possible for theories to survive a long time, appearing to accommodate many facts, while being in practice unfalsifiable.</p>
<p><strong>Patterns have often failed to generalize.</strong> There are many standardized experimental tasks used to study judgment and decision-making: choice between stimuli (psychophysics); the Stroop task; the implicit association task; the Wason card task; the Iowa gambling task; learning with reinforcement; choice between gambles; two-player games.</p>
<p>Many laws have been proposed based on patterns found in these tasks, but there has been a consistent failure for these patterns to generalize outside the specific tasks, and even within these tasks the laws have often been found to be sensitive to minor tweaks of context, e.g.&nbsp;instrumental conditioning, lateral inhibition, probability-weighting, loss-aversion, reciprocity. One interpretation is that behavior is very context-sensitive, and generalization is difficult. Another interpretation, which I think is the principal explanation, is that behavior is typically well-calibrated for the cues in a given situation, meaning that behavior in a given situation reveals more about the statistics of that situation than about the wiring of decision-making processes.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;I give a more detailed argument for this interpretation of the history of psychology in <em><a href="https://tecunningham.github.io/posts/2017-04-15-the-mechanical-and-the-rational.html">The Repeated Failure of the Laws of Behaviour</a></em>, and in <em><a href="https://tecunningham.github.io/posts/2016-04-30-relative-thinking.html">Relative Thinking</a></em>.</p></div></div></section>
<section id="a-model-of-inference" class="level1 page-columns page-full" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> A Model of Inference</h1>

<div class="no-row-height column-margin column-container"><div class="">
<p><span class="math display">\[\xymatrix@R-2pc{
      &amp; \boxed{x_{1}}\ar[dddr] \\
      &amp; \boxed{x_{2}}\ar[ddr] \\
      &amp; \boxed{x_{3}}\ar[dr] \\
      v\ar[uuur]\ar[uur]\ar[ur]\ar[r]\ar[dr]\ar[ddr]\ar[dddr] &amp; \boxed{x_{4}}\ar[r] &amp; \hat{v}\\
      &amp; \boxed{x_{5}}\ar[ur]   \\
      &amp; \boxed{x_{6}}\ar[uur] \\
      &amp; \boxed{x_{7}}\ar[uuur] \\}
   \]</span></p>
</div></div><p>Let us start with a model of judgment as rational inference. There is some unobserved fact about the world, <span class="math inline">\(v\)</span>, a set of observations which relate to that fact, <span class="math inline">\(\bm{x}=(x_1,\ldots,x_n)\)</span>, and an estimate formed by the brain using those observations: <span class="math display">\[\hat{v}=E[v|x_1,\ldots,x_n].\]</span></p>
<p>A simple prediction of this model is that influences on judgment of <span class="math inline">\(v\)</span> should correspond to regularities in the world, i.e.:</p>
<p><span class="math display">\[\utt{\frac{d\hat{v}}{dx_i}(\bm{x})&gt;0}{cue $i$ positively affects}{judgment of value}
   \iff
   \utt{\text{corr}(v,x_i|\bm{x}_{-i})&gt;0}{cue $i$ is positively associated}{with value, all else equal}.
   \]</span></p>
<p><strong>Testing the model.</strong> The model’s predictions depend on the joint distribution of observed and unobserved characteristics in the decision-maker’s ordinary environment, <span class="math inline">\(f(v,\bm{x})\)</span>. This distribution can be difficult to credibly measure, however there have been many cases where laboratory findings about judgment turn out to be neatly rationalized by correlations in the world:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 44%">
<col style="width: 55%">
</colgroup>
<thead>
<tr class="header">
<th><strong>influence on judgment</strong></th>
<th><strong>correlation in world</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Blue objects look more distant</td>
<td>Distant objects are bluer (Rayleigh scattering)</td>
</tr>
<tr class="even">
<td>Cold objects feel heavier</td>
<td>Heavier objects transfer more heat</td>
</tr>
<tr class="odd">
<td>People repeat rewarded actions</td>
<td>Rewards are correlated over time</td>
</tr>
<tr class="even">
<td>Random rewards cause more persistence</td>
<td>Probability of reward is correlated</td>
</tr>
</tbody>
</table>
<p>In each of these cases psychologists initially discovered an influence on judgment (<span class="math inline">\(\frac{d\hat{v}}{dx_i}\)</span>), and proposed a mechanical explanation, e.g.&nbsp;based on how neurons are wired. Subsequently it was discovered that the influence on judgment explanations noticed that the influence could be rationalized by some correlation in the world. We can test these explanations by altering the context, finding a situation where we expect the real-world correlation between <span class="math inline">\(x_i\)</span> and <span class="math inline">\(v\)</span> to reverse, and we predict that the influence on judgment will reverse. Some examples of successful tests: (1) cold objects feel heavier, but hot objects feel heavier too, and this is consistent with the real-world association, because the effect of weight on heat-transfer depends on the <em>difference</em> from skin temperature. (2) when a rat finds a reward in a maze, it is then <em>less</em> likely to follow the same path subsequently (in contradiction to reinforcement learning), intuitively because they expect the food to be gone, i.e.&nbsp;they expect a negative correlation between past-rewards and future-rewards, instead of a positive one.</p>
<p>Feldman (2013):</p>
<blockquote class="blockquote">
<p>“[Bayesian] optimality helps explain why the perceptual system, notwithstanding its many apparent quirks and special rules, works the way it does— because these rules approximate the Bayesian posterior.”</p>
</blockquote>
<p>So far we have discussed evidence that perception and judgment are consistent with efficient use of evidence. However there are some patterns which resist rationalization, and for those we need a deeper theory.</p>
</section>
<section id="a-model-of-encapsulated-inference-bloodhound" class="level1 page-columns page-full" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> A Model of Encapsulated Inference (“Bloodhound”)</h1>

<div class="no-row-height column-margin column-container"><div class="">
<p><span class="math display">\[\xymatrix@R-2pc{
   &amp; \boxed{x_{1}}\ar[dr]\\
   &amp; \boxed{x_{2}}\ar[r] &amp; \circ \ar[dr]\\
   &amp; \boxed{x_{3}}\ar[rr] &amp;  &amp; \circ \ar[dr]\\
   v\ar[uuur]\ar[uur]\ar[ur]\ar[r]\ar[dr]\ar[ddr]\ar[dddr] &amp;  \boxed{x_{4}}\ar[rru] &amp;  &amp;  &amp; \hat{v}\\
   &amp; \boxed{x_{5}}\ar[r] &amp; \circ \ar[urr]\\
   &amp; \boxed{x_{6}}\ar[ur]\\
   &amp; \boxed{x_{7}}\ar[uuurrr]}
\]</span></p>
</div></div><p>The diagram shows a hierarchical model in which information is aggregated in stages, drawing on inputs that are not themselves directly accessible to the conscious brain.</p>
<p>The intermediate nodes can be thought of as automatic unconscious judgments – e.g.&nbsp;judgments about the distance of an object, the age of a person, or the value of a bottle of wine. The conscious brain only has access to those intermediate judgments, not the raw data, and it is this separation that can cause inconsistencies in judgment.</p>
<p><br><br><br></p>

<div class="no-row-height column-margin column-container"><div class="">
<p><span class="math display">\[\xymatrix@R-2pc{
   &amp; \overbrace{}^{\text{low-level}}\\
   &amp; \boxed{x_{1}}\ar[ddr] &amp; \\
   &amp; \ldots \\
   &amp; \boxed{x_{n}}\ar[r] &amp;  \hat{v}^1 \ar[dr]&amp; \\
v\ar[uuur]\ar[ur]\ar[dr]\ar[dddr]
   &amp;  &amp;  &amp; \hat{v}^2 &amp; \\
   &amp; \boxed{z_{1}}\ar[urr] &amp; \\
   &amp; \ldots \\
   &amp; \boxed{z_{n}}\ar[uuurr]\\
   &amp; \underbrace{}_{\text{high-level}}}
\]</span></p>
</div></div><p>For simplicity I will assume just one encapsulated node (<span class="math inline">\(\hat{v}_1\)</span>) and two types of cue: “low level” (available only to the encapsulated node), and “high level” (available only to the conscious brain, <span class="math inline">\(\hat{v}_2\)</span>). A bias occurs when this sequential aggregation of information reaches a different conclusion than would occur if all information was pooled:</p>
<p><span class="math display">\[\utt{E[v|E[v|\bm{x}],\bm{z}]}{encapsulated}{inference} \neq
      \utt{E[v|\bm{x},\bm{z}]}{pooled}{inference}.
   \]</span></p>
<p>Roughly speaking a bias will occur only when 3 conditions are met:<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;The model of doubly-encapsulated inference is formalized in my paper <a href="https://www.dropbox.com/s/guf8u1r1z5qoc6g/paper_heuristics.pdf">“Hierarchical Aggregation of Information and Decision-Making”</a>.</p></div></div><ol type="1">
<li>The encapsulated system receives information not expected by the conscious brain (<span class="math inline">\(\bm{x}\neq E[\bm{x}]\)</span>),</li>
<li>The conscious brain receives information not expected by the early system (<span class="math inline">\(\bm{z}\neq E[\bm{z}]\)</span>),</li>
<li>The two pieces of information interact, i.e.&nbsp;<span class="math inline">\(E[v|\bm{x},\bm{z}]\)</span> is non-separable in <span class="math inline">\(\bm{x}\)</span> and <span class="math inline">\(\bm{z}\)</span>.</li>
</ol>
<p><strong>What information is accessible to each stage?</strong></p>
<p>There are two types of information that are likely private to early processing. I will give discuss evidence below that this information is mostly inaccessible to the conscious brain.</p>
<ol type="1">
<li>Raw sensory experience - the intensity of stimulation on the retina, the skin, the ear canal.</li>
<li>Associations between outcomes – e.g.&nbsp;the correlations between different cues which are used to make inferences.</li>
</ol>
<p>The information private to the conscious brain is relatively abstract understanding of the situation.</p>
<p><strong>As a metaphor we can think of a person leading a bloodhound on a leash.</strong> Both the person and the dog are trying to find the same object, but the dog’s private information is not accessible to the person except through how they pull on the leash, i.e.&nbsp;the dog’s interpretation of the information. In typical cases the encapsulation of information does not cause problems: the person simply follows where the dog leads. However when the person is aware of additional context important in interpreting the bloodhound’s own information (i.e.&nbsp;there is an interaction) then the person will make mistakes relative to what they would have known if they’d been aware of all the dog’s information.</p>
<p><strong>The idea that judgment is encapsulated or modular is not new.</strong> It’s been argued by Helmholtz (1866), Pylyshyn (1980), Fodor (1983), Sloman (1996). However most discussion concentrates on the modules using a <em>subset</em> of the information available to the conscious brain, explaining biases in our automatic judgments, but not biases in conscious judgments. I put relatively more emphasis on the existence of information accessible only to the modules, which makes distinctive predictions about when reflective judgments will exhibit biases (I will call this “doubly encapsulated” processing of information).<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> </p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;<img src="images/brain_encapsulated.png" class="img-fluid"></p></div><div id="fn4"><p><sup>4</sup>&nbsp;<img src="images/brain_dblencapsulated.png" class="img-fluid"></p></div></div><p><strong>Why would information be encapsulated?</strong> Mammalians brains have been evolving for 65M years while the human forebrain grew rapidly in the last 200,000 years. It seems likely that our systems for conscious reasoning are somewhat separated from systems for automatic judgment.</p>
<section id="implications-of-encapsulated-inference" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="implications-of-encapsulated-inference"><span class="header-section-number">4.1</span> Implications of Encapsulated Inference</h2>
<p>Here I givae the basic predictions of the model, in subsequent sections I discuss evidence relevant to these predictions from perception, judgment, and decision-making.</p>
<ol type="1">
<li><p><strong>Judgment will degrade when presentation is unusual.</strong> We have very accurate judgments about cases which we have experience with but judgment degrades when some high-level information becomes relevant to interpretation. E.g., judgment will degrade when the same information is available but presented in an unusual way – upside-down, back to front, inverted.</p></li>
<li><p><strong>Judgment will be sensitive to irrelevant features.</strong> Judgment will be sensitive to a cue which the subjects knows to be irrelevant when (a) that cue is <em>usually</em> relevant in similar situations; (b) the fact that the cue is irrelevant in this situation is high-level information, not accessible to the encapsulated system.</p></li>
<li><p><strong>Judgment of hypotheticals will be poor.</strong> We will have poor ability to state how our judgment would change if one of the cues changed. E.g.: would this drawing look more like your cousin if the nostrils were more flared? Would you judge this candidate the same way if they were a woman as if they were a man? These are objective questions about your own judgments, but if judgment is encapsulated then people may give inaccurate answers to these questions.</p></li>
<li><p><strong>Judgment will be sensitive to comparisons.</strong> When someone is judging two objects at the same time the conscious brain will have access to two encapsulated judgments, and therefore will learn something about what cues influences judgment. Thus we should expect to see systematic comparison effects which will reveal the nature of the information that is encapsulated. We also should see irrelevant-influences affect judgment in between-subjects, but not in within-subjects, experiments. </p></li>
<li><p><strong>Persistence of biased intuitions.</strong> Even when we are consciously aware that an encapsulated judgment is incorrect the encapsulated system will still produce that inference, i.e.&nbsp;people retain a subjective <em>perception</em> which they know to be false (e.g., even after you learn that an illusion is misleading it still looks that way).</p></li>
</ol>
</section>
</section>
<section id="perception" class="level1 page-columns page-full" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Perception</h1>
<section id="basic-facts" class="level2 page-columns page-full" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="basic-facts"><span class="header-section-number">5.1</span> Basic facts</h2>
<p><strong>People are good judges of objects in the world.</strong><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> We are very good at judging the distance, size, or weight of an object, recognizing a face or a scene. Computers have only recently become comparable to humans after decades of dedicated work.</p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;<img src="images/2021-04-06-05-36-55.png" class="img-fluid"> How various visual cues affect the judgment of distance.</p></div></div><p><strong>People are poor judges of low-level perceptual stimuli.</strong> When asked to judge the magnitude of a raw sensation people are generally poor judges: e.g.&nbsp;comparing the brightness of two lights, the shade of two colours, the length of two lines. For computers these tasks are trivial.</p>
<p><strong>There exist a large set of perceptual illusions.</strong> Psychologists have collected a diverse set of perceptual illusions in which people make predictable mistakes in reporting raw sensations (Muller-Lyer, Ebbinghaus, McGurk, etc.). There are still multiple active schools of thought in explaining most of these illusions.</p>
</section>
<section id="predictions-of-encapsulated-inference" class="level2 page-columns page-full" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="predictions-of-encapsulated-inference"><span class="header-section-number">5.2</span> Predictions of Encapsulated Inference</h2>
<p>We can give a simple model of encapsulated inference:</p>
<ol type="1">
<li>Early perceptual processes infer real-world values (<span class="math inline">\(v\)</span>) using information about raw sensations (<span class="math inline">\(x\)</span>), and about associations between sensations and value.</li>
<li>Biases in judgment about the world occur because the early processes do not have access to high-level information available to the conscious brain (<span class="math inline">\(z\)</span>).</li>
<li>Biases in judgment about raw stimuli occur because the conscious infers the value of stimuli from the outputs of the early processes <span class="math inline">\(\hat{v}_1\)</span>.</li>
</ol>
<p>It is useful to make a distinction between raw sensations and their causes in the world. The causes can then be subdivided into value and noise, where “value” represents something of interest to the organism.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>sensation (<span class="math inline">\(x\)</span>)</th>
<th>value (<span class="math inline">\(v\)</span>)</th>
<th>noise (<span class="math inline">\(e\)</span>)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>light on retina</td>
<td>reflectance of object</td>
<td>illumination</td>
</tr>
<tr class="even">
<td>size on retina</td>
<td>size of object</td>
<td>distance of object</td>
</tr>
<tr class="odd">
<td>pressure on hand</td>
<td>weight of object</td>
<td>sensitivity of hand</td>
</tr>
<tr class="even">
<td>oriention on retina</td>
<td>orientation in world</td>
<td>orientation of head</td>
</tr>
<tr class="odd">
<td>motion on retina</td>
<td>motion of object</td>
<td>motion of eye</td>
</tr>
</tbody>
</table>
<p>This gives us a series of predictions:</p>
<p><strong>Sensitivity to presentation.</strong> Peoples’ ability to judge and recognize stimuli are notably worse when the stimuli are presented in a way that we’re not accustomed to: e.g.&nbsp;upside down, inverted, tinted, or back to front.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;e.g.&nbsp;Valentine (1988), Galper (1970), Kemp et al (1990).</p></div></div><p><strong>Influence of high-level context.</strong> It’s useful to distinguish three different aspects of high-level context, and the predictions of double encapsulations:</p>
<p><span class="math display">\[\begin{aligned}
      \frac{d\hat{v}^1}{dz} &amp;&amp;&amp; \text{contextual influences on automatic judgment of world}\\
      \frac{d\hat{v}^2}{dz} &amp;&amp;&amp; \text{contextual influences on conscious judgment of world}\\
      \frac{d\hat{x}^2}{dz} &amp;&amp;&amp; \text{contextual influences on conscious judgment of sensations}
   \end{aligned}
   \]</span></p>
<p>The double-encapsulation theory predicts that automatic judgments about the world are independent of contextual influences (<span class="math inline">\(\frac{d\hat{v}^1}{dz}=0\)</span>), while final judgments of both are dependent (<span class="math inline">\(\frac{d\hat{v}^2}{dz}\neq0\)</span>, <span class="math inline">\(\frac{d\hat{x}^2}{dz}\neq 0\)</span>).</p>
<p>I believe that this is broadly consistent with the empirical evidence:</p>
<ol type="1">
<li>perceptual inferences are resistant to modulation by contextual information, except for attention effects,</li>
<li>considered judgments of both sensations and values are commonly influenced by contextual information.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>.</li>
</ol>
<div class="no-row-height column-margin column-container"><div id="fn7"><p><sup>7</sup>&nbsp;Firestone &amp; Scholl (2016, BBS)</p></div><div id="fn8"><p><sup>8</sup>&nbsp;Cross-modal influences are often been cited as evidence <em>against</em> the encapsulation of perception, because they show influences across perceptual areas. However the fact that they show systematic errors in assessment of sensations demonstrates the existence of vertical encapsulation (i.e.&nbsp;lack of direct access to raw stimuli), at the same time as they show that the limits of horizontal encapsulation.</p></div></div><p><strong>Judgment of raw sensations.</strong> Because the conscious brain does not directly observe the raw stimuli, it must infer them from the encapsulated system’s outputs: <span class="math inline">\(E\hat{x}_1=[\hat{x}_1|\hat{v}^1]\)</span> and <span class="math inline">\(\hat{x}_2=E[\hat{x}_2|\hat{v}^1]\)</span>. This predicts cross-modal effects in judgment of sensations, where one sensation influences estimate of another sensation:<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<p><span class="math display">\[\underbrace{\frac{d\hat{x}_1}{dx_2}}_{\text{cross-modal}\atop\text{effect}}
         \propto \underbrace{corr(x_1,v)}_{\text{diagnostic value of $x_1$}}
            \Big/ \underbrace{corr(x_2,v).}_{\text{diagnostic value of $x_2$}}
   \]</span></p>
<p>This is consistent with many laboratory examples showing “cross-modal” effects, where one stimuli (e.g.&nbsp;auditory) is influenced by some other stimuli (e.g.&nbsp;visual).</p>
<p>Examples fitting this pattern: (1) the McGurk and anti-McGurk effects; (2) the Stroop effect; (3) confusing motion of beeps and flashes; (4) confusing numerosity of beeps and flashes; (5) phoneme restoration; (6) assimilation to expectations - proofreaders’ errors; (7) Simon interference - response location &amp; stimulus location.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="images/2024-04-15-18-43-00.png" class="img-fluid"> Contrast effects in shade, contrast, hue, and size. The central circle is identical in each case.</p>
</div></div><p><strong>Application: contrast and assimilation effects.</strong> A common finding in perception is a contrast effect, where some quality appears less-intense when placed next to a more-intense neighbor, although we also observe assimilation effects (the opposite) in some circumstances. I argue that (1) contrast effects in real-world perception are due to rational inference; (2) contrast effects in raw sensory stimuli are byproducts of double-encapsulation.</p>
<p>Suppose there are two neighboring objects, each with unobserved value (<span class="math inline">\(v_1,v_2\)</span>) and additive noise:</p>
<p><span class="math display">\[\underbrace{\binom{x_1}{x_2}}_{observed\atop signal}
      =\underbrace{\binom{v_1}{v_2}}_{unobserved\atop value}
         +\underbrace{\binom{e_1}{e_2}}_{unobserved\atop noise}.
   \]</span></p>
<p>If everything is normally distributed then we have the following: <span class="math display">\[\underbrace{\frac{dE[v_{1}|x_{1},x_{2}]}{dx_{2}}}_{\text{assimilation/contrast effect}}
      \propto \underbrace{\text{corr}(v_1,v_2)}_{\text{correlation}\atop\text{in values}}
               -\underbrace{\text{corr}(e_1,e_2)}_{\text{correlation}\atop\text{in noise}}.
   \]</span></p>
<p>In words this implies we expect an “assimilation” effect when the value is more correlated than the noise, and a “contrast” effect when the noise is more correlated than the value.</p>
<p>The equation above describes rational inferences of the encapsulated system about real-world values, but we additionally observe that contrast and assimilation effects occur in judgment of raw sensations, and for that reason they can properly be called “biases” or “illusions” relative to the full-information case. If we assume the conscious brain infers the sensations from the posteriors of the encapsulated system (<span class="math inline">\(\hat{x}_1\propto \hat{v}_1^1\)</span>), then we get the same comparative static:</p>
<p><span class="math display">\[\frac{d\hat{x}_1}{dx_{2}}\propto \text{corr}(v_1,v_2)-\text{corr}(e_1,e_2).\]</span></p>
<p>I believe this gives a good account of the existence of contrast and assimilation effects across a range of cases:</p>
<ol type="1">
<li>Adelson (1993) gives a series of examples demonstrating these effects in lightness illusions: contrast effects occur when context implies that noise is more correlated than value, and assimilation effects occur when context indicates that value is more correlated than noise.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></li>
<li>When judgment is affected by a dissimilar stimulus (cross-modal effects), contrast effects will tend to occur when the additional cue is associated with the stimulus, assimilation effects will occur when it is associated with the value.</li>
<li>These biases will tend to be smaller for more automatic responses - e.g.&nbsp;grasping responses - insofar as they receive signals prior to high-level processing.</li>
</ol>
<div class="no-row-height column-margin column-container"><div id="fn9"><p><sup>9</sup>&nbsp;Some papers also find Bayesian assimilation with very noisy stimuli, which I think is also consistent, but need more argument.</p></div></div><p><strong>Reproduction.</strong> People find it easy to recognize patterns but hard to reproduce them, for example to paint a picture or to transcribe a melody. This is consistent with the model above insofar as the recognition is done pre-consciously. The model also predicts certain biases in reproduction, e.g.&nbsp;that people will tend to fail to account for shadows when they do a drawing, because they are inferring the raw stimuli <span class="math inline">\(x\)</span> from the inferred object <span class="math inline">\(v\)</span>, and the brain’s inference has discarded most of the information it considers to be noise, such as illumination.</p>
<p><strong>Additional notes.</strong></p>
<ul>
<li><em>Differences in estimand.</em> We have assumed that the encapsulated system is estimating the same quantity that the conscious brain is trying to estimate, <span class="math inline">\(v\)</span>. In many cases the conscious brain will want to estimate some other quantity, and this discrepancy will cause a distinct type of bias. I think this accounts for the size-weight bias in which people judge a larger object to be lighter, all else equal: if the encapsulated system is inferring the <em>density</em> of an object (from size and weight), and passing that estimate to the conscious brain, this would account for a negative effect of size on conscious estimates of weight.</li>
<li><em>Bimodal posteriors.</em> When there are two plausible but distinct interpretations of a given stimulus, i.e.&nbsp;when posteriors are bimodal, then people often alternate between perceiving the two interpretations, e.g.&nbsp;the Necker cube and the black/gold dress. It’s interesting that the cognitive system seems incapable of representing bimodal posteriors directly. </li>
</ul>
</section>
</section>
<section id="judgment" class="level1 page-columns page-full" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Judgment</h1>
<section id="basic-facts-1" class="level2 page-columns page-full" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="basic-facts-1"><span class="header-section-number">6.1</span> Basic Facts</h2>
<p><strong>There are a set of well-known judgment illusions.</strong> There are a large set of simple judgment questions which people give consistently wrong answers to.</p>
<ul>
<li><em>Logical judgment:</em> bat-and-ball, Linda, Monty Hall, mathematics problems on exames.</li>
<li><em>Factual judgment:</em> anchoring, joint-separate inconsistencies.</li>
</ul>
<p>There are many proposed explanations of these biases but there is still relatively little consensus.</p>
<p><strong>People are generally poor at making statistical generalizations about features.</strong> A variety of laboratory tests give people a set of cases and ask them to either (a) judge the strength of correlation between two features, or (b) predict an unobserved feature of a case given the observed features. People are often much worse than simple computer programs at performing these tasks.</p>
<p><strong>Judgment in some domains can be very accurate very accurate.</strong> People can learn extremely subtle judgments when playing chess and Go, such that computers have only been able to beat them relatively recently.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> Other domains are harder to benchmark but it seems fair to say that judgment can be finely calibrated in domains such as interpersonal emotional judgment, medical diagnosis, music or literature.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn10"><p><sup>10</sup>&nbsp;Playing a game could be seen as a combination of judgment and decision-making, but because every player shares essentially the same preferences (they prefer to win) it’s informative about judgment.</p></div><div id="fn11"><p><sup>11</sup>&nbsp;Kahneman and Klein (2009) say that human judgment tends to be good when subjects have (i) a lot of experience, and (ii) quick feedback.</p></div></div></section>
<section id="judgment-and-encapsulated-inference" class="level2 page-columns page-full" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="judgment-and-encapsulated-inference"><span class="header-section-number">6.2</span> Judgment and Encapsulated Inference</h2>
<p>The encapsulated inference model says that judgments are largely instinctual and we have limited introspection into what determines them, e.g.&nbsp;when we are guessing the price of a good, judging the likelihood of an event, judging the trustworthiness of a person, we rationally trust our instincts. This has a number of consequences.</p>
<p><strong>Limited introspection.</strong> We have limited ability to explain our judgments, e.g.&nbsp;to formalize them in a way that a computer could reproduce them.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> The history of human sciences is consistent with this: e.g.&nbsp;linguists have worked for centuries on finding the rules which make a sentence grammatical, formalizing knowledge that we all posess intuitively.</p>
<div class="no-row-height column-margin column-container"><div id="fn12"><p><sup>12</sup>&nbsp;There is a long debate on what evidence would establish unconscious knowledge. Experimentalists have shown that subjects can learn a pattern but have trouble describing it. Critics have said (a) the subjects may have learned a different pattern but with the same extension (Quine), or (b) the questions asked of subjects are insufficiently detailed. In my view the problem is in the design of the experiments: implicit knowledge can be defined behaviorally, by observing when low-level and high-level information fail to be integrated.</p></div></div><p><strong>Hypothetical questions.</strong> The model predicts that people will be unable to accurately answer hypothetical questions about their own judgments, e.g.: Would you value this bottle of whisky the same if it had a different price on it? Would you like this house as much if it was a different colour?</p>
<p><strong>Influence of irrelevant cues.</strong> A common finding is that judgment is influenced by irrelevant cues, i.e.&nbsp;when told to ignore some fact people will still be moved by it. This occurs in the model when (1) the cue is integrated into preconscious judgments, (2) the conscious brain does not know how heavily the cue is weighted, and so cannot account for it.</p>
<p><strong>Effect of comparisons.</strong> When two judgments are being made at the same time – e.g., two items are being judged – then the conscious decision-maker will learn more about the unconscious knowledge. The patterns of comparison effects will reveal the nature of implicit knowledge.</p>
<p><strong>Internal consistency.</strong> We should expect that judgment anomalies will disappear in within-subject studies because the decision-maker becomes aware of the inconsistency and adjusts their judgments.</p>
<p><strong>Consistency of biases.</strong> A lot of academic literature tries to identify biases in judgment. In our analysis biases will be caused by correlations in the environment, and so we should expect them to vary or reverse from one environment to the next, and indeed we find that many biases reverse sign:</p>
<ul>
<li>the “contrast effect” vs the “assimilation effect”</li>
<li>the “gambler’s fallacy” vs the “hot hand fallacy”</li>
<li>the “recency effect” vs “confirmation bias”</li>
<li>“overweighting of low probabilities” vs “neglect of rare events”</li>
</ul>
<p><strong>Effect of incentives.</strong> We should see that incentives don’t materially affect biases, beyond the point where they simply get the person to pay attention. This is in contrast to inattention-based theories.</p>
<p><strong>Persistence of mistaken judgments.</strong> The encapsulated-inference theory predicts that after someone learns that a judgment is incorrect then the <em>feeling</em> will persist, because the encapsulated system operates independently of higher-level knowledge. Thus in many of the classic judgment illusions, even when you know the right answer the wrong answer still has some intuitive draw.<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn13"><p><sup>13</sup>&nbsp;Sloman (1996) described this as Criterion S in arguing for two systems of reasoning: “a reasoning problem satisfies Criterion S if it causes people to simultaneously believe two contradictory responses.”</p></div></div></section>
<section id="implications-for-improving-judgments" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="implications-for-improving-judgments"><span class="header-section-number">6.3</span> Implications for Improving Judgments</h2>
<ol type="1">
<li><strong>Organize information in a way that helps your instincts to recognize patterns.</strong> For example (a) visualizing data so that visual-processing modules can be used to recognize patterns; (b) describe uncertainty in language that’s similar to the way that uncertainty is experienced: in terms of frequencies (“1 out of 5”) instead of probabilities (“20%”); (c) when looking for different interpretations of data, present it in an unfamiliar way in order to route around your unconscious inferences.</li>
<li><strong>Remove information that you know to be irrelevant.</strong> Your instincts will pick up on all available cues, even irrelevant ones. Thus attempting to ignore cues is likely to be ineffective, it’s better to physically remove irrelevant information.</li>
<li><strong>Ask yourself variations on the same question.</strong> – it will help to extract more information from your instincts.</li>
</ol>
</section>
</section>
<section id="decision-making-unfinished" class="level1 page-columns page-full" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Decision-Making [UNFINISHED]</h1>
<section id="background" class="level2 page-columns page-full" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="background"><span class="header-section-number">7.1</span> Background</h2>
<p><strong>Motivating examples.</strong> Decision-making as a whole is an unwieldy topic, I’ll give some motivating examples focussed on economics:</p>
<ol type="1">
<li>Choosing which wine to buy for dinner.</li>
<li>Choosing how much of your income to spend vs save.</li>
<li>Choosing whether to move cities for a job.</li>
</ol>
<p><strong>We don’t know much about what influences decisions.</strong> There are two polar schools of thought: (1) that decisions maximize some objective outcomes; (2) that decisions are buffeted by all sorts of influences – context, custom, time of day. Concretely, given variation in choices (e.g.&nbsp;savings rate, hours worked, charitable giving, education), we can decompose into variation in (1) budgets, (2) consequentialist preferences, (3) other non-consequentialist influences. Perhaps 1/3 each.</p>
<p><strong>I will treat decision-making as judgment of value.</strong> i.e., people judge <span class="math inline">\(E[v|x]\)</span>, and choice is just selecting the outcome with the highest expected-value. This allows me to use the same framework as used in perception and judgment.</p>
<p><strong>In decision-making there’s no objective standard.</strong> When discussing perception and judgment we can determine whether people are right or wrong, but it’s not the same with decision-making. Here we never observe the true value of things, we can only talk about inconsistencies among decisions, which itself requires making assumptions over what are reasonable preferences.</p>
<p><strong>We have limited insight into our goals.</strong> I think we have limited insight both into ordinary value judgments (why do I prefer this coffee-cup to that one?), and into overarching goals (why do I marry? have children?). Philosophy, after thousands of years, still has not given us clarity regarding our tradeoffs between different ends (pleasure, moral imperatives and religious imperatives, providing for others, receiving love &amp; receiving esteem).</p>
<p><strong>Evolution must play some deep role in decision-making.</strong><a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> As with other animals, humans’ decision-making must have been shaped to favor reproduction. However I believe there remains relatively little consensus on exactly how it affects decision-making, outside some specific areas.</p>
<div class="no-row-height column-margin column-container"><div id="fn14"><p><sup>14</sup>&nbsp;I think there’s a common perception that although evolution must have importantly shaped human psychology, the evolutionary perspective has made few fundamental contributions to understanding psychology.</p></div><div id="fn15"><p><sup>15</sup>&nbsp;Some of this correlation can come from genetic effects or complementarity (when other people do X, then it’s in your interest to do X). However we see that when people migrate to a different culture in adulthood they retain a substantial part of their old preferences.</p></div></div><p><strong>We must absorb most of our preferences.</strong><a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> A large share of variation in decisions must be due to the preferences that we absorb when we grow up: taste in music, religion, political beliefs, career, who we marry, how many children to have, where to live, all must be heavily influenced by early experiences.</p>
<p><strong>Preferences vs associations.</strong> Instead of estimating objective quantity, can estimate instrumental <em>value</em>, payoff, utility.</p>
<p><strong>There are a set of known decision biases.</strong> There are some decision problems in which peoples’ choices consistently violate norms of rationality: Allais paradoxes, Ellsberg paradoxes, small-stakes risk-aversion, relative-thinking paradoxes, time inconsistency, anchoring effects, etc. There have been many attempts to fit these anomalies into generalizations about decision-making but there has been little consensus (e.g.&nbsp;with prospect theory, inattention, relative thinking).</p>
</section>
<section id="perspective-from-encapsulated-inference" class="level2 page-columns page-full" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="perspective-from-encapsulated-inference"><span class="header-section-number">7.2</span> Perspective from Encapsulated Inference</h2>
<p><strong>(1) Limited introspection.</strong> The model predicts that we have poor ability to introspect, e.g.&nbsp;to explain how different features influenced our decisions, or to predict what we would do in a different hypothetical situation.</p>
<p><strong>(2) Sensitivity to associations.</strong> The evaluation of an outcome should be sensitive to whatever details are informative about value, and we still respond to those details when we’re aware that they are uninformative in the current situation, insofar as that awareness is not available to the encapsulated system. Thus we expect that people may have well-calibrated judgment for usual situations, but make bad or inconsistent decisions in unusual situations. This is my interpretation of many laboratory biases such as framing, anchoring, etc..</p>
<p>The decision-theory community has developed sophisticated logic to model many decision anomalies (ambiguity aversion, relative thinking, probability weighting). In my opinion most of these anomalies are due to associations which are very sensitive to context, and formal modelling is relatively unfruitful. The imperatives of publication have, I think, caused too much effort to be put in this direction: if anomalies are context-specific then research is less publishable, for that reason academics keep trying to come up with general theories, beyond the point of plausibility.<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn16"><p><sup>16</sup>&nbsp;Examples: (1) people avoid ambiguity not intrinsically, but because it’s associated with bad outcomes in certain classes of situation, and they seek out ambiguity in other situations; (2) people are influenced by the choice-set because it’s often informative about relative value, but the nature of the influence varies drastically between situations (<a href="../_posts/2016-04-30-relative-thinking.md">discussion here</a>).</p></div><div id="fn17"><p><sup>17</sup>&nbsp;More precisely: when stakes are high enough such that people no longer choose dominated alternatives, most of the between-person inconsistency in choices remains.</p></div></div><p><strong>(3) Consistency within decisions.</strong> The model says that violations of rationality are mostly <em>inadvertent</em>. We therefore expect decisions to be consistent <em>within</em> situations, though they may be inconsistent <em>between</em> situations. This is consistent with laboratory evidence showing that people show large framing effects, but rarely choose dominated options.<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a></p>
<p><strong>(4) Implicit knowledge is revealed in comparisons.</strong> <a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a> When two objects are evaluated side by side, that reveals some of the unconscious information to the conscious brain, and so we should expect systematic comparison effects. In choice, we can show that characteristic intransitivities reveal implicit knowledge, e.g.&nbsp;the intransitive cycle to the right (a “figure 8”) reveals an explicit preference for male over female, but an implicit preference for male over female. Similarly if we observe that some bundle of attributes is evaluated more highly when the comparison bundle becomes more similar in some respect, this reveals implicit knowledge about the attributes (either a positive implicit association about a shared attribute, or a negative implicit association about a non-shared attribute). Jon and I formalize this logic in our paper “Implicit Preferences”.</p>
<div class="no-row-height column-margin column-container"><div id="fn18"><p><sup>18</sup>&nbsp;<span class="math display">\[\xymatrix{
         \binom{\text{female}}{\text{MBA}}\ar@{-}@/_.3pc/[dr]|(.4){\rsucc{135}}
         &amp; \binom{\text{female}}{\text{PhD}}\ar@{-}@/^.3pc/[dl]|(.4){\rsucc{45}}
         \\ \binom{\text{male}}{\text{MBA}}\ar@{-}@/^.3pc/[u]|{\rsucc{270}}
         &amp; \binom{\text{male}}{\text{PhD}}\ar@{-}@/_.3pc/[u]|{\rsucc{270}}
   }\]</span></p></div></div></section>
</section>
<section id="encapsulated-preferences" class="level1 page-columns page-full" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Encapsulated Preferences</h1>
<p><a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn19"><p><sup>19</sup>&nbsp;<span class="math display">\[\xymatrix@R-2pc{
   &amp; \overbrace{}^{\text{low-level}}\\
   &amp; \boxed{x_{1}}\ar[ddr] &amp; \\
   &amp; \ldots \\
   &amp; \boxed{x_{n}}\ar[r] &amp;  \circ \ar[dr]&amp; \\
v\ar[uuur]\ar[ur]\ar[dr]\ar[dddr]
   &amp;  &amp;  &amp; \hat{v} &amp; \\
   &amp; \boxed{z_{1}}\ar[urr] &amp; \\
   &amp; \ldots \\
   &amp; \boxed{z_{n}}\ar[uuurr]\\
   &amp; \underbrace{}_{\text{high-level}}}\]</span></p></div></div><p>Finally I introduce an additional model which I think is necessary to explain a lot of behaviours: <em>encapsulated preferences</em>, (as opposed to encapsulated information). As with the previous model I assume an informationally-encapsulated system, but now assume it has a direct effect on decision-making, e.g.&nbsp;as a simplification we could say the final decision is a weighted average of the output of the two systems:</p>
<p><span class="math display">\[\hat{v} = \lambda \underbrace{E[v|\bm{x}]}_{\text{low-level judgment}}
      + (1-\lambda) \underbrace{E[v|E[v|\bm{x}],\bm{z}]}_{\text{high-level judgment}}.\]</span></p>
<p>We could describe these low-level preferences as <em>hard-wired</em>, meaning that they intend to achieve the same value as high-level judgments (<span class="math inline">\(v\)</span>), but they respond just to superficial stimuli, here <span class="math inline">\(\bm{x}\)</span>. Put another way: we have an irreducible preference for characteristics which have historically been associated with value. In some cases that association is learned over the course of our life (learned preferences), in other cases it will be over evolutionary history (evolutionary preferences). This has a number of predictions:</p>
<ol type="1">
<li><p>Decisions fail to maximize value when the association between superficial stimuli (<span class="math inline">\(\bm{x}\)</span>) and value (<span class="math inline">\(v\)</span>) is different from the historical association. This is a weaker condition than encapsulated inference, because here the high-level system cannot override the low-level inferences.</p></li>
<li><p>People will choose to avoid situations where low-level and high-level judgments conflict. This follows if the high-level system has the power to choose future situations: she’ll avoid situations in which she anticipates a divergence between the preference of the low-level and high-level system.</p></li>
</ol>
<p>This is broadly consistent with some features of human behaviour:</p>
<ol type="1">
<li><p><strong>We are tempted when in situations involving immediate benefits: food, sex, tiredness, addictive drugs.</strong> These can be interpreted as evolutionary fail-safes that exist to prevent conscious reasoning from doing too much harm. They are distinct from ordinary preferences in a utility function because they are only activated in certain contexts, and for this reason the conscious brain can work around them, just as an adult can work around a child by putting certain things out of view.</p></li>
<li><p><strong>We have an aversion to things that are <em>superficially</em> unsafe.</strong> We dislike walking on a glass bridge even if we know it’s safe, we dislike drinking from vials marked “poison” even when we know it’s not poison, we dislike the smell of rotten meat even if we know there’s no danger. This has the same pattern as the examples above, but reversed.</p></li>
<li><p><strong>Developmental pathologies are adaptive at an evolutionary timescale conditional on superficial information.</strong> There are certain diseases specific to civilization: myopia, allergies, obesity, crooked teeth. For each of these there are persuasive arguments that the developmental response is optimal given some superficial information about the situation, and so the pathology is caused by the divergence between evolutionary-scale associations and contemporary associations.</p></li>
<li><p><strong>Nervous-system responses are optimal conditional on superficial information.</strong> Many bodily reactions are not under conscious control: heart-rate, sneezing, fever, pain, headaches. We can over-ride automatic responses, e.g.&nbsp;by taking medications, but we often don’t know whether it would be wise because we don’t have access to the private information used by the automatic system, and it’s resaonable to presume that its responses are optimal.</p></li>
</ol>
<section id="additional-notes-on-encapsulated-preferences" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="additional-notes-on-encapsulated-preferences"><span class="header-section-number">8.1</span> Additional Notes on Encapsulated Preferences</h2>
<p><strong>Puzzle: distortion of conscious reasoning.</strong> In many cases situations which activate a visceral temptation also seems to affect our conscious thoughts: we don’t just give in to temptations, we also <em>rationalize</em> it. In the dog metaphor it’s like having a very persuasive bulldog who can talk you into things. You might still avoid the situation but once in the situation you choose whole-heartedly. It’s unclear why we would reason in this way.</p>
<p><strong>Evolved desires vs encapsulated desires.</strong> Should be careful not to confuse encapsulated preferences with a different relation, where evolution gives us a goal which we consciously strive for (eat sweet things, have sex) which are only proximal relative to the evolutionary goal of reproducing. Those proximal goals could still be ipmlemented in a single system which would make entirely consistent maximizing choices (but it would be maximizing an outcome that is only correlated with evolution’s goal).</p>
<p><strong>Characteristic behaviors which reveal encapsulated preferences:</strong></p>
<ol type="1">
<li><p><strong>Preferences are stronger when made more salient.</strong> E.g., (1) more likely to choose a croissant when you smell it; (2) you’re scared by certain things only if you can see them, when giving blood you avoid looking at the needle; (3) you’re more likely to agree to have sex if you’re aroused. Just thinking about certain things can make us aroused or happy or scared, so we can strategically choose what to think about.</p></li>
<li><p><strong>Making personal rules.</strong> We set a certain time to start &amp; finish working; set a goal number of words to write each day; only getting ice-cream if you’ve been to the gym; setting a rule for how much money to save. Implies you don’t trust your future self, so you make up a rule, even though there’s no way to enforce it.</p></li>
<li><p><strong>Strategic choices.</strong> We choose to avoid certain options. E.g., (1) buying a house to force yourself to save; (2) avoiding situations where you think you’ll be tempted. Formally you can call this “choice over choice sets”, and there’s a a fair amount of decision-theory on how multiple-selves can be identified if you can observe this kind of choice.</p></li>
<li><p><strong>Effect of distraction.</strong> You are more likely to indulge in proximal goals when you are distracted - e.g.&nbsp;manipulation of cognitive load.</p></li>
<li><p><strong>implicit preferences.</strong> More influenced by an attribute in less-direct choice sets.</p></li>
</ol>
<p>Other variation in decision by context: Decisions made with salient outcomes, or abstract outcomes; decisions made under time pressure; decisions made with cognitive load; decisions made in advance; decisions over future choice sets; choices made in different moods, or after exerting willpower; decisions made directly or indirectly; from small or large choice sets; and attitudes which are expressed by involuntary responses (response time, skin conductance, pupil dilation).</p>
</section>
<section id="why-would-we-have-encapsulated-preferences" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="why-would-we-have-encapsulated-preferences"><span class="header-section-number">8.2</span> Why would we have encapsulated preferences</h2>
<p>Two types: (a) evolutionary proximal goals (sugar, sex, putrid smells); (b) learned proximal goals (coffee, wine, tobacco, learned food aversions).</p>
<p><strong>Proximal preferences from evolution.</strong> A lot of human preferences make sense as proximal goals for achieving a long-run evolutionary purpose: when we get a kick out of doing X, it’s because doing X was selected for in our evolutionary history. These goals are in some sense hard-wired because people still do X even when it no longer makes any evolutionary sense to do it: (1) we enjoy sex even when it doesn’t lead to reproduction; (2) we like the taste of sugar even when we know it’s bad for us; (3) we get scared of snakes, spiders, of heights, of blood even when we see them behind glass - we are even scared of <em>pictures</em> of these things; (4) we are disgusted by smells associated with infection, even when we know there’s no risk of infection. (There are also arguments that some emotions - such as anger, jealousy, love - are hardwired for a slightly different reason - because they serve as commitment devices in social interaction - Trivers).</p>
<p>Why would these be hardwired? Or rather, instead of hardwiring <em>preferences</em>, why didn’t evolution hardwire <em>beliefs</em>? It would seem to be more efficient to just have innate knowledge: that snakes are dangerous, that sex leads to reproduction, that rotting meat is an infection risk. Then we could treat each of these things as means, not as ends. I guess there are two reasons: (1) perhaps it’s harder to preinstall knowledge than to preinstall preferences, because each brain grows differently; (2) perhaps it’s safer to preinstall preferences, to prevent them being overridden by a malfunctioning conscious brain which thinks it knows better.</p>
<p><strong>Proximal preferences from learning.</strong> We often can explain peoples’ preference for X, because X has been associated with good outcomes in the past, yet people still choose X even when they are aware it no longer has those good associations. I.e., X has turned from a means into an end in itself. This can be described as a “habit”, “learned preference.” Some examples: (1) enjoying the smell of coffee, the taste of wine, or a cigarette, when those associations must be due principally to the psychoactive drugs that have been associated with them; (2) a learned phobia; (3) a learned food aversion, even when you know it’s irrelevant (e.g.&nbsp;chemotherapy patients develop aversions to whatever food they were eating during the chemotherapy).</p>
<p>It’s hard to answer why <em>learned</em> preferences should be hard-wired.</p>
<p>Different models which get at aspects of this type of behaviour: (1) a complementarity between a cue and consumption: the consumption becomes more valuable when exposed to an associated cue (Laibson); (2) a temptation cost - you have to pay a cost to not consume something when it is possible to choose it – (Gul and Pesendorfer) (3) preferences which depend on your state of arousal - e.g.&nbsp;willingness to be violent, have sex, changes preditably with context (Loewenstein on arousal).</p>
</section>
</section>
<section id="notes-on-literature" class="level1 page-columns page-full" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Notes on Literature</h1>
<p><strong>Unconscious knowledge.</strong> I wrote a discussion of unconscious knowledge <a href="../_posts/2017-12-10-unconscious-influences.md">here</a>. In short: there have been many proposals of how to identify unconscious knowledge or unconscious preferences over the last 150 years, but there remains little consensus.</p>
<p><strong>Modularity / top-down influences.</strong> In the 1950s the “new look” school in psychology argued that peoples’ perceptions are distorted by their beliefs and expectations. There was then a reaction in the 80s and 90s: Fodor &amp; Pylyshyn argued that perception is encapsulated, separated from expectations, &amp; you need this to explain illusions. Both are right, and in fact two types of illusions from different types of private info. System 1’s private info causes theory-biased report of sensation. System 2’s private info causes expectations-ignorant perceptions.</p>
<p><strong>Efficient coding, predictive coding, rational inattention.</strong> A general class of theories assumes that there is some kind of noise in the processing of information, so that the conscious brain makes inferences using a noisy signal about the stimuli <span class="math inline">\(x\)</span>. These models, like my model, assume an intermediary process, but one which does compression rather than inference, i.e.&nbsp;the signal minimizes error with respect to <span class="math inline">\(x\)</span>, instead of <span class="math inline">\(v\)</span>. I have further discussion elsewhere, but in short I think (1) efficient-coding theories do a poor job accounting for features of perception; (2) rational-inattention models do a poor job accounting for gross facts of judgment; and (3) it would be an inefficient design for the brain to pass compressed versions of raw stimuli (x), instead of inferences from those stimuli (v).<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a></p>


<div class="no-row-height column-margin column-container"><div id="fn20"><p><sup>20</sup>&nbsp;I need to think more about the relationship with “predictive coding” theories (where only the delta from the expectation is sent). Friston’s “free energy” theory is related to these theories but I haven’t been able to properly understand it.</p></div></div></section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("tecunningham\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>