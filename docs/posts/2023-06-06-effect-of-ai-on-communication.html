<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.357">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tom Cunningham">
<meta name="dcterms.date" content="2023-07-07">
<meta name="description" content="Tom Cunningham blog">

<title>The Influence of AI on Content Moderation and Communication | Tom Cunningham</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-12027453-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
<meta name="twitter:title" content="The Influence of AI on Content Moderation and Communication | Tom Cunningham">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="tecunningham.github.io/posts/images/2023-07-07-10-34-40.png">
<meta name="twitter:image-height" content="720">
<meta name="twitter:image-width" content="944">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Tom Cunningham</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href=".././about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/testingham" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/tom-cunningham-a9433/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://tecunningham.github.io/index.xml" rel="" target=""><i class="bi bi-rss-fill" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.com/citations?user=MDB_DgkAAAAJ" rel="" target="">
 <span class="menu-text">scholar</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">The Influence of AI on Content Moderation and Communication</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Tom Cunningham </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 7, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#predictions" id="toc-predictions" class="nav-link" data-scroll-target="#predictions">Predictions</a>
  <ul class="collapse">
  <li><a href="#the-prevalence-of-policy-violating-content-will-decline" id="toc-the-prevalence-of-policy-violating-content-will-decline" class="nav-link" data-scroll-target="#the-prevalence-of-policy-violating-content-will-decline">The Prevalence of Policy-Violating Content Will Decline</a></li>
  <li><a href="#the-prevalence-of-context-specific-violations-will-increase" id="toc-the-prevalence-of-context-specific-violations-will-increase" class="nav-link" data-scroll-target="#the-prevalence-of-context-specific-violations-will-increase">The Prevalence of <em>Context-Specific</em> Violations Will Increase</a></li>
  <li><a href="#the-prevalence-of-variants-of-known-violating-content-will-decline" id="toc-the-prevalence-of-variants-of-known-violating-content-will-decline" class="nav-link" data-scroll-target="#the-prevalence-of-variants-of-known-violating-content-will-decline">The Prevalence of Variants of Known-Violating Content Will Decline</a></li>
  <li><a href="#platforms-will-not-be-able-to-identify-bots-from-their-behavior" id="toc-platforms-will-not-be-able-to-identify-bots-from-their-behavior" class="nav-link" data-scroll-target="#platforms-will-not-be-able-to-identify-bots-from-their-behavior">Platforms Will Not Be Able to Identify Bots from Their Behavior</a></li>
  <li><a href="#platforms-will-find-it-hard-to-discriminate-between-real-and-fake-media" id="toc-platforms-will-find-it-hard-to-discriminate-between-real-and-fake-media" class="nav-link" data-scroll-target="#platforms-will-find-it-hard-to-discriminate-between-real-and-fake-media">Platforms Will Find It Hard to Discriminate between Real and Fake Media</a></li>
  <li><a href="#fake-media-deepfakes-will-not-have-a-substantial-influence-on-politics" id="toc-fake-media-deepfakes-will-not-have-a-substantial-influence-on-politics" class="nav-link" data-scroll-target="#fake-media-deepfakes-will-not-have-a-substantial-influence-on-politics">Fake Media (Deepfakes) Will Not Have a Substantial Influence on Politics</a></li>
  <li><a href="#communication-will-migrate-towards-large-closed-platforms" id="toc-communication-will-migrate-towards-large-closed-platforms" class="nav-link" data-scroll-target="#communication-will-migrate-towards-large-closed-platforms">Communication Will Migrate Towards Large Closed Platforms</a></li>
  <li><a href="#entertainment-will-become-largely-synthetic" id="toc-entertainment-will-become-largely-synthetic" class="nav-link" data-scroll-target="#entertainment-will-become-largely-synthetic">Entertainment will Become Largely Synthetic</a></li>
  <li><a href="#things-will-get-weird" id="toc-things-will-get-weird" class="nav-link" data-scroll-target="#things-will-get-weird">Things Will Get Weird</a></li>
  </ul></li>
  <li><a href="#appendix-historical-observations-on-forgeries" id="toc-appendix-historical-observations-on-forgeries" class="nav-link" data-scroll-target="#appendix-historical-observations-on-forgeries">Appendix: Historical Observations on Forgeries</a></li>
  <li><a href="#appendix-model-of-ai-and-internal-properties-venn-model" id="toc-appendix-model-of-ai-and-internal-properties-venn-model" class="nav-link" data-scroll-target="#appendix-model-of-ai-and-internal-properties-venn-model">Appendix: Model of AI and Internal Properties (Venn Model)</a>
  <ul class="collapse">
  <li><a href="#model" id="toc-model" class="nav-link" data-scroll-target="#model">Model</a></li>
  <li><a href="#implications-of-this-model" id="toc-implications-of-this-model" class="nav-link" data-scroll-target="#implications-of-this-model">Implications of this Model</a></li>
  </ul></li>
  <li><a href="#appendix-discrimination-model" id="toc-appendix-discrimination-model" class="nav-link" data-scroll-target="#appendix-discrimination-model">Appendix: Discrimination Model</a></li>
  <li><a href="#appendix-forecasts-from-metaculus" id="toc-appendix-forecasts-from-metaculus" class="nav-link" data-scroll-target="#appendix-forecasts-from-metaculus">Appendix: Forecasts from Metaculus</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<style>
    h1 {  border-bottom: 4px solid black;}
    h2 {  border-bottom: 1px solid gray; padding-bottom: 0px; font-size: 1.3em; color: black; }
</style>
<p><span style="background:yellow;">==Still a draft, not ready for general circulation.==</span></p>

<div class="no-row-height column-margin column-container"><div class="">
<p> <img src="images/2023-07-07-10-34-40.png" class="img-fluid"> Thanks to many comments, esp.&nbsp;Ravi Iyer, Sahar Massachi, Tal Yarkoni, Rafael Burde, Grady Ward, Ines Moreno de Barreda, and Daniel Quigley.</p>
</div></div><section id="summary" class="level1">
<h1>Summary</h1>
<p><strong>It is difficult to anticipate the effect of AI on online communication.</strong> AI models have already had big effects on content moderation but they are now starting to have effects on content production, e.g.&nbsp;through generating synthetic spam and deepfakes. How is the balance likely to play out?</p>
<p><strong>This note surveys what we know about the likely effect of AI on online communication, summarized with a set of predictions:</strong></p>
<ol type="1">
<li><strong>The prevalence of policy-violating content on platforms will decline.</strong> Classifiers are approaching human-level performance and so the prevalence of policy-violating content (e.g.&nbsp;nudity, hate speech) should decline to very low rates. The same argument applies to censorship: governments will be able to near-perfectly identify messages that include a forbidden sentiment.</li>
<li><strong>The prevalence of “context-specific” violating content will increase.</strong> This refers to content which appears to be non-violating to the average person but is interpreted in a policy-violating way by its intended audience.</li>
<li><strong>The prevalence of variations of known-violating content will decrease.</strong> Content that is a match against databases of illegal sexual media (PhotoDNA), IP-protected content (ContentID), or terrorist recruitment content (GIFCT) will become less frequent because AI will make obfuscation harder.</li>
<li><strong>Platforms will not be able to identify bots from their behavior.</strong> Behavioral tests like CAPTCHAs will become ineffective against sophisticated actors and so platforms will have to rely relatively more on direct proofs of identity.</li>
<li><strong>People will not be able to discriminate between real and fake media based only on the content.</strong> Since the invention of audio and visual recording in the 19th century the existence of a recording has been evidence for the event depicted having occurred. The evidentiary value of media will become much less strong because it will be impossible for a human to discriminate between real and fake.</li>
<li><strong>Platforms will not be able to discriminate between real and fake media based only on the content.</strong> It is unlikely that AI classifiers will be able to reliably detect AI-manipulated media.</li>
<li><strong>Fake media will not have a substantial influence on politics.</strong> Forged documents have circulated for thousands of years but generally with a limited influence on politics because documents have always been evaluted not just on their content but their provenance. Advances in forgery technology seem likely to be accompanied by advances in skepticism, and greater reliance on provenance.</li>
<li><strong>Computer-generated content will not be hyper-persuasive.</strong> LLMs are unlikely to allow substantial advances in the ability to manipulate public opinion. Social scientists have warned about “hyper persuasive” technologies for a century and been wrong every time.</li>
<li><strong>Communication will migrate further towards large closed platforms.</strong> The rise of synthetic content will make it harder for individuals to discriminate between reliable and unreliable information sources, and so likely to increase the demand for intermediaries, which implies greater demand for verification and closed platforms.</li>
<li><strong>Things will get weird.</strong> Our intuitions about meaning and interpretation are based on experience with human-created representations. When computers can generate representations then strange things are likely to happen.</li>
</ol>
<p><strong>I also sketch a broader theory of the effect of AI on communication.</strong> The most important distinction is between properties of a message that are “internal” and “external”. - An “internal” property of a message is a function solely of the content, e.g.&nbsp;whether an image contains nudity, whether text contains hate speech, whether a joke is funny. AI classifiers are rapidly approaching human-level accuracy for these properties and this means that platforms (and governments) will be able to near-perfectly filter out content that violates their rules, even when content-producers have access to the same technology. - An “external” property of a message depends on some fact outside the message’s content: e.g.&nbsp;whether an image was computer-generated, whether a headline is true, whether a message came from a specific person. Platforms will get better at predicting external properties but they will be outpaced by motivated actors who can manipulate their fakes until they become indistinguishable from genuine articles, and able to manipulate lies so they’re indistinguishable from the truth.</p>
<p>This note additionally has short appendices on the history of forged documents and on relevant forecasting questions from Metaculus.</p>
<p><strong>What I don’t talk about.</strong> Two very important topics that I do not discuss here: (1) super-intelligent AI and alignment; (2) social and cultural biases in AI.</p>
</section>
<section id="predictions" class="level1 page-columns page-full">
<h1>Predictions</h1>
<p><strong>Background on AI.</strong> Before discussing the predictions I note a couple of facts about recent progress in computer abilities:</p>
<ol type="1">
<li>Since the mid 20th century computers have been much better than humans at performing routine calculations.</li>
<li>Over the last 50 years computers have been steadily getting better at recognizing text and images, with particularly rapid progress since around 2012. Today computers can out-perform the average humans on many classification tasks.</li>
<li>Since around 2018 computers have additionally become good at <em>synthesizing</em> media, e.g.&nbsp;creating text, images, or video, to match a description.</li>
</ol>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="images/2023-09-19-09-55-57.png" class="img-fluid"></p>
<p>The graph above from <span class="citation" data-cites="kiela2023plottingprogress">Kiela et al. (<a href="#ref-kiela2023plottingprogress" role="doc-biblioref">2023</a>)</span> shows the very recent history of computer performance: AI systems are regularly achieving human performance on benchmark tasks within a year of them being introduced, and so new benchmarks are being introduced more frequently.</p>
</div></div><p><img src="images/2023-06-16-05-55-29.png" class="img-fluid"></p>
<section id="the-prevalence-of-policy-violating-content-will-decline" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-prevalence-of-policy-violating-content-will-decline">The Prevalence of Policy-Violating Content Will Decline</h2>
<p><strong>All large internet platforms use automated systems to detect policy-violating content.</strong> All major platforms ban or suppress various types of content, e.g.&nbsp;hate speech, incitement to violence, nudity, graphic content. It is not economical to have human moderation of every message and so automated systems have always been used. Early systems simply checked for the appearance of prohibited words or matched against media databases, later systems used classifiers trained on human labels.</p>
<p><strong>Simple classifiers often have high accuracy.</strong> Toxicity in text can be fairly well detected by identifying highly diagnostic phrases, however they have false positives (<span class="citation" data-cites="chen2022profanity">Chen (<a href="#ref-chen2022profanity" role="doc-biblioref">2022</a>)</span>) and false negatives (<span class="citation" data-cites="heiner2022toxic">Heiner (<a href="#ref-heiner2022toxic" role="doc-biblioref">2022</a>)</span>) which are easily spotted by humans.</p>
<p><strong>Simple classifiers are easily evaded.</strong> - <span class="citation" data-cites="han2020fortifying">Han and Tsvetkov (<a href="#ref-han2020fortifying" role="doc-biblioref">2020</a>)</span> note that simple models are poor at detecting “veiled toxicity” which they define as including “codewords, novel forms of offense, and subtle and often unintentional manifestations of social bias such as microaggressions and condescension.” - <span class="citation" data-cites="lees2021capturing">A. Lees et al. (<a href="#ref-lees2021capturing" role="doc-biblioref">2021</a>)</span> note that simple models are poor at detecting “covert toxicity” which includes “types of toxicity that may not be immediately obvious. Covertly toxic comments may use obfuscation, code words, suggestive emojis, dark humor, or sarcasm …[and] [m]icroaggressions.” Both papers train models to identify toxicity where the ground truth is human rating of the text alone, without additional information on context or audience.] - <span class="citation" data-cites="grondahl2018need">Gröndahl et al. (<a href="#ref-grondahl2018need" role="doc-biblioref">2018</a>)</span> note that hate speech detectors can easily be fooled if you “insert typos, change word boundaries or add innocuous words.”</p>
<div class="page-columns page-full"><p><strong>Recent classifiers have performance that meets or exceeds human levels.</strong> Google’s 2022 generation of text moderation models, which use transformer-based LLMs, are able to correctly classify many difficult cases (<span class="citation" data-cites="whitlocklees2022perspective">A. W. Lees et al. (<a href="#ref-whitlocklees2022perspective" role="doc-biblioref">2022</a>)</span>).[^employment] OpenAI say “Labeling quality by GPT-4 is similar to human moderators with light training … [h]owever, both are still overperformed by experienced, well-trained human moderators.” (<span class="citation" data-cites="weng2023gpt4moderation">Weng, Goel, and Vallone (<a href="#ref-weng2023gpt4moderation" role="doc-biblioref">2023</a>)</span>).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;Arnaud Norman <a href="https://bulkninja.notion.site/Email-Obfuscation-Rendered-almost-Ineffective-Against-ChatGPT-728fba1b948d42c6b8dfa73cb64984e4">writes about</a> how algorithms to scrape email addresses are often easy to evade, by adding special characters or other obfuscations, but that ChatGPT can straight-forwardly decode most such obfuscations.</p></li></div></div>
<div class="page-columns page-full"><p><strong>Prevalence of policy-violating content has declined dramatically.</strong> I think much of this decline can be attributed to improvements in the quality of classifiers. Meta reports that the prevalence of nudity, bullying, hate speech, and graphic content each declined by a factor of between 2 and 5 between 2017 and 2022, and that the share of identified-violating content that was first identified by an ML model (“proactive rate”) is approaching 100% for most categories.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;It is important to remember that the “proactive rate” is the share of <em>detected</em> content that is detected by AI, the share of <em>violating</em> content that is detected by AI will certainly be significantly lower but is not generally reported. See Meta’s <a href="https://transparency.fb.com/data/community-standards-enforcement/">Community Standards report</a> and <a href="http://tecunningham.github.io/2023-01-31-social-media-suspensions-data.html#meta-facebook-instagram">my visualization of this data</a>. It’s also worth noting that Mark Zuckerberg made a series of predictions that human raters could be substituted with AI, which I think has turned out to be largely correct despite widespread skepticism (including by me), e.g.&nbsp;in late 2018 he <a href="https://www.facebook.com/notes/751449002072082/">said</a> “through the end of 2019, we expect to have trained our systems to proactively detect the vast majority of problematic content.”</p></li></div></div>
<p><img src="./2023-01-31-social-media-suspensions-data_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid"></p>
<p><strong>Content producers have limited ability to use AI models to obsfucate.</strong> If a content-producer had access to the classifier used by the platform then they could keep testing different variants of a violating post until they found a variant that was not identified as violating, i.e.&nbsp;finding a false negative. However as the platform’s model becomes more accurate the task becomes more difficult for the adversary, as false positives will be rarer, thus the balance of power shifts in favor of the platform. Below I give a more formal argument for this (“Venn diagram model”).</p>
<p><strong>Employment of human moderators will likely decline.</strong> As computer accuracy improves fewer messages will need to be escalated for human review. Additionally fewer humans will be needed to label training data: <span class="citation" data-cites="whitlocklees2022perspective">A. W. Lees et al. (<a href="#ref-whitlocklees2022perspective" role="doc-biblioref">2022</a>)</span> and <span class="citation" data-cites="weng2023gpt4moderation">Weng, Goel, and Vallone (<a href="#ref-weng2023gpt4moderation" role="doc-biblioref">2023</a>)</span> describe LLM classifiers that perform well simply by being given the text of the policy, optionally with a small set of positive and negative examples (i.e.&nbsp;“zero shot” or “few shot”).</p>
<p><strong>This prediction also applies to government censorship.</strong> Governments which use simple word-matching to detect anti-government language can be circumvented by using indirect language. Better AI will allow governments to classify every post with reliability as high as if they had a human read each one, and so indirect language or obfuscation will no longer be an effective workaround for censorship.</p>
<p><strong>This prediction would fail if there were substantial limits on the performance of AI.</strong> If there were ways of obfuscating content so that a human would recognize it but no AI could recognize it then . It seems plausible that AI systems will remain less flexible than humans in understanding for a long time but, because they are trained on enormous quantities of data, if they miss a subclass of violating content in the short-run they would be able to quickly learn to identify it from fresh human-labeled data.</p>
<p><strong>Whether prevalence will decline all the way to zero depends on the definition of prevalence used.</strong> An AI model can never perfectly predict human-rater evaluation because humans are themselves noisy: there is both between-rater variation and within-rater variation in labelling for any given piece of content. Thus whenever the ground truth is human judgment then even an infallible classifier could not be used to drive prevalence all the way to zero.</p>
</section>
<section id="the-prevalence-of-context-specific-violations-will-increase" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-prevalence-of-context-specific-violations-will-increase">The Prevalence of <em>Context-Specific</em> Violations Will Increase</h2>
<p><strong>Some messages have a violating significance only to their intended audience.</strong> We can define a message as violating in one of two ways: (1) has a violating significance to the average person (average citizen or average user), or (2) has a violating significance to the intended audience of that message.[^definition]</p>
<div class="page-columns page-full"><p><strong>Many messages use contextual violations.</strong><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;A related phenomena is people using selective truths to give an impression that is false. E.g. it is common for anti-vaccination groups to refrain from posting provably false claims and instead post only those true claims which reflect badly on vaccines. People with a bias against some ethnic group likewise often refrain from posting provably false claims but post only those true claims that reflect badly on the hated group. Because the pool of true claims is enormous it is easy to collect a large set of true claims that collectively give a false impression.</p></li></div></div>
<ul>
<li>Saying “globalist” when your audience understands it to mean “jewish”</li>
<li>Saying the opposite of what is meant, e.g.&nbsp;a bigot saying excessively positive things about an ethnic group, or a pro-anorexia poster making anti-anorexic statements sarcastically.</li>
<li>Using euphemisms for illegal substances or illegal acts.</li>
<li>Using emojis of eggplants and peaches with sexual connotations.</li>
<li>Using photos without explicit nudity but which can be read as pornographic.</li>
</ul>
<p><strong>Improved detection of violations is likely to cause substitution towards contextual violations.</strong> As AI improves the ability to detect violations it seems likely that there will be at least some substitution towards context-specific violations, however as long as there is some cost then we would expect a less than one-for-one substitution.</p>
<div class="page-columns page-full"><p><strong>Platforms could detect contextual violations if they wanted to.</strong> When doing human evaluation then platforms could either (1) provide human raters with detail about the message’s context and audience, or (2) assign human raters to messages based on their experience with that community.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> Likewise AI models could be trained to include rich representation of the context. An additional advantage of adding context is that it can identify and exempt posts that violate the letter but not the spirit of the policy.</p><div class="no-row-height column-margin column-container"><li id="fn4"><p><sup>4</sup>&nbsp;Platforms already have some policies that include context, e.g.&nbsp;Facebook’s <a href="https://transparency.fb.com/policies/community-standards/bullying-harassment/">“Bullying and Harassment policy”</a> bans “repeatedly contacting someone in a manner that is unwanted or sexually harassing.”</p></li></div></div>
<p><strong>Platforms may not want to remove contextual violations.</strong> There are reasons why platforms may be reluctant to use context in determining violations: it is more complex, and can lead to awkward PR where the platform is shown to be censoring apparently harmless words and images. Additionally platforms may care more about being seen to restrict harmful content than about the actual harm prevented.</p>
<div class="page-columns page-full"><p><strong>Contextual violations have long existed in broadcast media.</strong> There have been many cases where contextual violations have been tolerated: e.g.&nbsp;newspapers would allow classified advertisments for prostitutes if described as masseuses, vibrators if described as massage wands, contraception if described as marital aids, and abortion if described as <a href="https://slate.com/human-interest/2014/08/history-of-contraception-19th-century-classified-ads-for-abortifacients-and-contraceptives.html">“removal of obstructions”</a>. Thus it seems plausible that platforms will tolerate a substantial amount of contextually-violating content to remain.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn5"><p><sup>5</sup>&nbsp;In Facebook’s Marketplace it is prohibited to list guns for sale. As a consequence people began to list gun <em>cases</em>, with the understanding that a case was standing in for a gun. Facebook then updated their policy to prohibit selling gun cases. In turn people began to list gun stickers as stand-ins for guns. See WSJ reports from <a href="https://www.wsj.com/articles/gun-sellers-are-sneaking-onto-facebooks-booming-secondhand-marketplace-11566315198">2020</a> and <a href="https://www.wsj.com/articles/gun-sellers-use-new-tactic-to-deal-on-facebook-marketplace-11598270872">2021</a>.</p></li></div></div>
<div class="page-columns page-full"><p><strong>Government censorship is unlikely to be constrained by context-specific violations.</strong> Once a censor discovers that a term has an anti-government significance in a certain context then they are likely to start censoring that term. E.g. China has suppressed online mentions of <a href="https://www.bbc.com/news/blogs-china-blog-40627855">Winnie the Pooh</a> because it is associated with criticism of Xi Jinping, and in 2022 Hong Kong police arrested protestors for holding blank pieces of paper.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn6"><p><sup>6</sup>&nbsp;https://www.axios.com/2022/11/28/china-protests-blank-paper-covid</p></li></div></div>
</section>
<section id="the-prevalence-of-variants-of-known-violating-content-will-decline" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-prevalence-of-variants-of-known-violating-content-will-decline">The Prevalence of Variants of Known-Violating Content Will Decline</h2>
<div class="page-columns page-full"><p><strong>Platforms check content against databases of known-violating content.</strong> In addition to running classifiers on content, platforms also check content against databases of known-violating content. The databases are often shared across platforms (“signal sharing”), e.g.&nbsp;databases of illegal sexual media (PhotoDNA), IP-protected content (Content ID), or terrorist recruitment content (GIFCT).<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> As a consequence sophisticated uploaders will obfuscate their content, e.g.&nbsp;by adding noise, and platforms expand their matching algorithms using fuzzy matching.</p><div class="no-row-height column-margin column-container"><li id="fn7"><p><sup>7</sup>&nbsp;other “signal sharing” programs: NCMEC, StopNCII, ThreatExchange.</p></li></div></div>
<p><strong>Improvements to AI will help platforms relatively more.</strong> As I argue in the model below: as AI recognition approaches a human level it will be difficult to upload a recognizable variant of a known piece of violating content without the platform automatically labelling it as such.</p>
</section>
<section id="platforms-will-not-be-able-to-identify-bots-from-their-behavior" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="platforms-will-not-be-able-to-identify-bots-from-their-behavior">Platforms Will Not Be Able to Identify Bots from Their Behavior</h2>
<div class="page-columns page-full"><p><strong>Most online platforms struggle with automated users who are disruptive in a variety of ways.</strong> One way of protecting against bots is with behavioral tests, e.g.&nbsp;a CAPTCHA test asking users an image-recognition task<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>, or by using on-platform behavior to detect whether a user is human. However improvements in AI mean that computers have human-level performance on image-recognition tasks, and can learn to imitate human-style behavior patterns, thus it seems likely these behavioral tests will become ineffective against sophisticated actors. <span class="citation" data-cites="searles2023empirical">Searles et al. (<a href="#ref-searles2023empirical" role="doc-biblioref">2023</a>)</span> finds that most contemporary types of CAPTCHAs can be solved by bots with higher than human accuracy (p10).<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn8"><p><sup>8</sup>&nbsp;CAPTCHA stands for Completely Automated Public Turing test to tell Computers and Humans Apart.</p></li><li id="fn9"><p><sup>9</sup>&nbsp;Similarly behavioural fingerprinting will become ineffective against advanced actors, e.g.&nbsp;using voice recognition to verify identity.</p></li></div></div>
<div class="page-columns page-full"><p><strong>This does not imply that the prevalence of bots will increase.</strong> All platforms need some defense against bots so they will have to rely relatively more on other forms of authentication, such as monetary payment, offline identity credentials (government ID, credit card number), hard-to-fake metadata (unique IP address, device ID), or 3rd-party identity provider (Sign in with Google, OpenID).<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> Thus the barriers to signing up for a service, and especially posting on it, will become higher.</p><div class="no-row-height column-margin column-container"><li id="fn10"><p><sup>10</sup>&nbsp;The 3rd-party identity providers will themselves have to rely on some other ground truth when accepting signups.</p></li></div></div>
</section>
<section id="platforms-will-find-it-hard-to-discriminate-between-real-and-fake-media" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="platforms-will-find-it-hard-to-discriminate-between-real-and-fake-media">Platforms Will Find It Hard to Discriminate between Real and Fake Media</h2>
<p><strong>In some cases the ground truth depends on properties outside the content.</strong> For example:</p>
<ul>
<li>Whether some media (audio, photo, video) has been manipulated or synthesized.</li>
<li>Whether text was written by a human or a computer.</li>
<li>Whether text was written by a specific person.</li>
</ul>
<p>I will refer to these properties as “external” in contrast to “internal” properties which depend only on the content, such as whether a picture depicts nudity.</p>
<p><strong>Advances in AI help with both forgery-detection and forgery-creation.</strong> It is clear that a better statistical model of genuine artefacts will help detect forgeries, but also help create convincing forgeries.</p>
<p><strong>Determined forgers will be able to .</strong> It seems likely that the latter effect will dominate: it will gradually become possible to camouflage computer-generated content such that neither a computer nor a human could tell them apart. If the content-producer has access to the platforms’ model then they can keep perturbing their fake media until it is labelled as non-fake.</p>
<p><strong>We cannot reliably discriminate between real and AI-generated media.</strong> As of late 2023, programs to detect synthetically generated media have relatively poor accuracy: OpenAI announced a model to detect LLM-created text in January 2023 <a href="https://decrypt.co/149826/openai-quietly-shutters-its-ai-detection-tool">shut it down</a> in July because of poor performance. In June 2023 the NY Times compared a variety of tools to detect computer-generated images and found that with minimal effort they could all be <a href="https://www.nytimes.com/interactive/2023/06/28/technology/ai-detection-midjourney-stable-diffusion-dalle.html">reliably fooled</a>.</p>
<div class="page-columns page-full"><p><strong>The prevalence of synthetic media will increase on unmoderated platforms.</strong> The major platforms have strong reason to reduce the spread of fake media<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>, and can control it with indirect means, e.g.&nbsp;Meta and YouTube dramatically decreased the prevalence of misinformation over 2016-2020 not primarily through better detection of whether a claim is false, but by a host of indirect measures. Thus I do not expect overall prevalence of fake factual media to substantially increase on the major platforms.</p><div class="no-row-height column-margin column-container"><li id="fn11"><p><sup>11</sup>&nbsp;The goals of platforms in content moderation are discussed in my note on ranking, <span class="citation" data-cites="cunningham2023ranking">Cunningham (<a href="#ref-cunningham2023ranking" role="doc-biblioref">2023</a>)</span>.</p></li></div></div>
</section>
<section id="fake-media-deepfakes-will-not-have-a-substantial-influence-on-politics" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="fake-media-deepfakes-will-not-have-a-substantial-influence-on-politics">Fake Media (Deepfakes) Will Not Have a Substantial Influence on Politics</h2>
<p><strong>As synthetic media becomes common people will rely more on provenance.</strong> As it becomes cheaper to manipulate and synthesize media then people are likely to become more skeptical and rely relatively more on the <em>provenance</em> of information. Thus although synthetic media will likely circulate I do not think it will have a substantial influence on beliefs in equilibrium.</p>
<p><strong>It has always been easy to create misleading documents.</strong>It is not difficult to forge or alter documents, or edit video in a misleading way. As a consequence mainstream media organizations typically do not publish leaked materials unless they have either a chain or provenance for the leaks or independent confirmation of their content.</p>
<div class="page-columns page-full"><p><strong>Influential forgeries of documents have been historically rare.</strong> Over the past 25 years I estimate perhaps 10% of all influential leaks were based on forged materials.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a><a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn12"><p><sup>12</sup>&nbsp;I know of two forged documents that were widely taken as true in the last 25 years, from around 15 substantial leaks that I could find: (1) the “yellowcake” letters from Iraq to Niger, cited in the 2002 US case for war against Iraq; (2) a fake G W Bush military transcript reported on by CBS and Dan Rather in 2004. It’s notable both that these cases are somewhat rare, and that each was passed through a chain of apparently reputable parties.</p></li><li id="fn13"><p><sup>13</sup>&nbsp;This argument implies that, prior to AI, anonymously leaked video would be more likely to be published and circulated than anonymously leaked documents, because video is harder to fake. In fact I cannot think of many cases of influential anonymous leaks of videos. When Trump’s “Access Hollywood” tape was leaked to the Washington Post they got confirmation before publishing it. In fact maybe leaked video has always been untrustworthy because it has always been easy to make deceptive edits.</p></li></div></div>
<div class="page-columns page-full"><p><strong>The quantity of false claims circulating on the internet is not primarily constrained by the quality of their content.</strong>A great deal of false claims already circulate on the internet, especially in loosely moderated parts: e.g.&nbsp;by email, on Telegram, 4chan, Truth Social, WhatsApp, Twitter. It’s not clear that the quality of the faked media is an important constraint on the volume that circulates. It’s not uncommon to find a clip of an interview with a politician edited to make it appear that they are admitting to a crime or secret agenda.<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> If people already take what they see at face value then adding deepfakes seems unlikely to change their opinions substantially. Alternatively if people are skeptical and look for corroborating sources then, again, deepfakes would be unpersuasive. It seems that deepfakes would only be influential if there are a significant population who are exposed to many lies but are not persuaded because the documentary evidence is not sufficiently strong.</p><div class="no-row-height column-margin column-container"><li id="fn14"><p><sup>14</sup>&nbsp;Snopes.com has an enormous database of both false claims and misleadingly manipulated media that has circulated since 1994. A typical <a href="https://www.factcheck.org/2021/03/scicheck-video-targets-gates-with-old-clip-misleading-edit/">recent example</a> is an edit of a Bill Gates interview to make it appear he wants to use vaccination to reduce population growth.</p></li></div></div>
<p></p>
<p></p>
<p></p>
</section>
<section id="communication-will-migrate-towards-large-closed-platforms" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="communication-will-migrate-towards-large-closed-platforms">Communication Will Migrate Towards Large Closed Platforms</h2>
<p><strong>Small platforms will be overrun with AI-created content.</strong> In particular, AI-created bots, spam, obfuscated violating content, and fake media. This would imply that consumers will tend to migrate to larger closed platforms with more effective defences, and which have more restriction on participation. This continues a general movement over the last 20 years of communication moving from small open platforms (independent email, small forums, mailing lists, independent websites) to large closed platforms (large email providers, large social media platforms).</p>
<p><strong>People will rely more on established sources of truth.</strong> E.g. they will rely relatively more on Wikipedia, Community Notes, and mainstream recognized media sources. The ordinary content-based signs of trustworthiness will become less reliable: having a professional website, well-edited text, well-argued reasoning, and documentary evidence.</p>
<p><strong>People will rely more on cryptographic signing to verify authenticity.</strong> I am note sure how strong this effect will be: it is generally more efficient for an intermediary to verify authenticity of senders (AKA filter out frauds) than for users to do it themselves. I think we’ve seen that in other domains: (1) PGP signing of email has been less important than email providers filtering spam and phishing; (2) SSL certificates in browsers have been less important than browsers giving warnings for suspected phishing sites (e.g.&nbsp;Google’s <a href="https://safebrowsing.google.com">safe browsing</a> database of sites with phishing or malware is used to give warnings in Chrome and Safari).</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="images/2023-06-23-10-30-49.png" class="img-fluid"></p>
</div></div></section>
<section id="entertainment-will-become-largely-synthetic" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="entertainment-will-become-largely-synthetic">Entertainment will Become Largely Synthetic</h2>
<div class="page-columns page-full"><p>A classifier that can detect whether a photo is pretty can also generate a synthetic photo that is pretty, and a classifier that can detect whether a joke is funny should also be able to generate funny jokes.<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> On average people spend around 3 hours per day watching entertainment (TV, YouTube, TikTok, Instagram). It seems likely that trained models will be able to synthesize content that is highly engaging though it’s hard to anticipate what it will look like.</p><div class="no-row-height column-margin column-container"><li id="fn15"><p><sup>15</sup>&nbsp;I think language models haven’t yet been very good at jokes because they generate one word at a time (autoregressive), while jokes typically have a logical structure such that the setup is probable given the punchline, but not the other way around. When we get language models which generate text using different statistical algorithms (e.g.&nbsp;diffusion instead of autoregressive generation) then it seems likely they’ll be able to create good jokes.</p></li></div></div>
</section>
<section id="things-will-get-weird" class="level2">
<h2 class="anchored" data-anchor-id="things-will-get-weird">Things Will Get Weird</h2>
<p>Much of our common-sense understanding of media will be violated when we routinely use AI models to manipulate and synthesize artefacts. Some examples:</p>
<ul>
<li><p><strong>People will synthesize completely new violating images/videos.</strong> <span class="citation" data-cites="thiel2023generative">Thiel, Stroebel, and Portnoff (<a href="#ref-thiel2023generative" role="doc-biblioref">2023</a>)</span> say that, as of early 2023, less than 1% of child sexual abuse media (CSAM) appears to be synthetically generated. However the ability to synthesize has been advancing rapidly, “to the point that some images are only distinguishable from reality if the viewer is very familiar with photography, lighting and the characteristics of diffusion model outputs … it is likely that in under a year it will become significantly easier to generate adult images that are indistinguishable from actual images.”</p></li>
<li><p><strong>Producers will synthesize content to sit on the <em>edge</em> of a category.</strong> If platforms take action whenever content passes some threshold then adversarial actors will generate or perturb content such that it sits right below the threshold. If a platform removes a photo whenever more than 50% of raters would say it depicts nudity then producers would upload photos which 49% of raters would say depicts nudity. People would upload movies which <em>almost</em> look like an existing IP-protected movie, and students might submit essays that are close to existing sources but don’t quite trigger the plagiarism detector.</p></li>
</ul>
</section>
</section>
<section id="appendix-historical-observations-on-forgeries" class="level1">
<h1>Appendix: Historical Observations on Forgeries</h1>
<p><strong>Influential leaks of political documents since 1997:</strong></p>
<table class="table">
<colgroup>
<col style="width: 43%">
<col style="width: 3%">
<col style="width: 14%">
<col style="width: 38%">
</colgroup>
<tbody>
<tr class="odd">
<td>Tripp Tapes</td>
<td>1997</td>
<td>audio</td>
<td>Linda Tripp to Kenneth Starr</td>
</tr>
<tr class="even">
<td>[<strong>FORGERY</strong>] Iraq letters to Niger (“yellowcake”)</td>
<td>2002</td>
<td>documents</td>
<td>Unknown to Italian intelligence to CIA</td>
</tr>
<tr class="odd">
<td>[<strong>FORGERY</strong>] Bush military transcripts (“Killian”)</td>
<td>2004</td>
<td>fax of 1970s memo</td>
<td>Unknown to retired colonel to Dan Rather / CBS</td>
</tr>
<tr class="even">
<td>Abu Ghraib photos</td>
<td>2004</td>
<td>photos</td>
<td>Unkown to CBS</td>
</tr>
<tr class="odd">
<td>Baghdad Airstrike (“Collateral Murder”)</td>
<td>2007</td>
<td>video</td>
<td>Chelsea Manning to Wikileaks</td>
</tr>
<tr class="even">
<td>US Iraq war logs</td>
<td>2010</td>
<td>digital docs</td>
<td>Chelsea Manning to Wikileaks</td>
</tr>
<tr class="odd">
<td>US Diplomatic cables</td>
<td>2010</td>
<td>digital docs</td>
<td>Chelsea Manning to Wikileaks</td>
</tr>
<tr class="even">
<td>Romney Fundraiser Tape (“47%”)</td>
<td>2012</td>
<td>audio</td>
<td>Bartender to Mother Jones</td>
</tr>
<tr class="odd">
<td>NSA Surveillance Leaks</td>
<td>2013</td>
<td>digital docs</td>
<td>Edward Snowden to the Guardian, WaPo</td>
</tr>
<tr class="even">
<td>DNC emails</td>
<td>2016</td>
<td>emails</td>
<td>Unknown to Wikileaks</td>
</tr>
<tr class="odd">
<td>Podesta emails</td>
<td>2016</td>
<td>emails</td>
<td>Unknown to Wikileaks</td>
</tr>
<tr class="even">
<td>Colin Powell emails</td>
<td>2016</td>
<td>emails</td>
<td>Unknown to DCLeaks</td>
</tr>
<tr class="odd">
<td>Panama papers</td>
<td>2016</td>
<td>documents</td>
<td>Unknown to Süddeutsche Zeitung</td>
</tr>
<tr class="even">
<td>Donald Trump Access Hollywood Tape</td>
<td>2016</td>
<td>video</td>
<td>Unknown to Washington Post</td>
</tr>
<tr class="odd">
<td>[<strong>MIXED</strong>] Macron emails</td>
<td>2017</td>
<td>emails</td>
<td>Unknown to Pastebin</td>
</tr>
<tr class="even">
<td>China Cables</td>
<td>2019</td>
<td>digital docs</td>
<td>Unknown to the ICIJ</td>
</tr>
<tr class="odd">
<td>Hunter Biden laptop</td>
<td>2020</td>
<td>docs,audio,video</td>
<td>computer shop to Giuliani to NY Post</td>
</tr>
<tr class="even">
<td>Los Angeles Council call (“changuito”)</td>
<td>2022</td>
<td>audio</td>
<td>Unknown to Reddit to LA Times</td>
</tr>
</tbody>
</table>
<p><strong>Why are forgeries not more common?</strong> I can think of three possible reasons:</p>
<ol type="1">
<li>It’s difficult to forge credible documents – e.g.&nbsp;even a simple memo is hard to fake because there are lots of small details like the letterforms and formatting and jargon used.</li>
<li>It’s easy to forge credible documents but intelligence agencies and the media won’t believe them without independent confirmation.</li>
<li>It’s easy to forge credible documents and for them to get coverage but not many people are motivated to try.</li>
</ol>
<p><strong>Older examples of influential forgeries.</strong></p>
<table class="table">
<colgroup>
<col style="width: 46%">
<col style="width: 3%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>Mark Antony’s will</td>
<td>33BC</td>
<td>read out by Octavian in the senate (disputed whether forgery)</td>
</tr>
<tr class="even">
<td>Dreyfus letters sharing military info w Germany</td>
<td>1894</td>
<td>fabricated by French military</td>
</tr>
<tr class="odd">
<td>Protocols of Elders of Zion (Jewish plans for domination)</td>
<td>1903</td>
<td></td>
</tr>
<tr class="even">
<td>Castle Document, letter to British govt in Dublin</td>
<td>1916</td>
<td>unclear source, contributed to 1916 Easter rising</td>
</tr>
<tr class="odd">
<td>Zinoviev letter from Russia to UK Labour party</td>
<td>1924</td>
<td>unclear source</td>
</tr>
<tr class="even">
<td>Tanaka Memorial (Japanese plans for world domination)</td>
<td>1929</td>
<td>unclear source</td>
</tr>
</tbody>
</table>
<p><strong>Notes.</strong></p>
<ul>
<li><p>The Macron email leaks seemed to include both real and fake content (<a href="https://www.csis.org/analysis/successfully-countering-russian-electoral-interference">ref</a>). In fact one report says that Macron’s team sent each other outrageous implausible emails as a pre-emptive defense to make any subsequent leaks seem less credible (<a href="https://www.lawfareblog.com/macron-leaks-are-they-real-and-it-russia">ref</a>).</p></li>
<li><p>The Steele dossier isn’t really a forgery: it doesn’t purport to have a different author than its true author. The problem with the dossier is that the author makes knowingly false claims of fact. This .</p></li>
</ul>
</section>
<section id="appendix-model-of-ai-and-internal-properties-venn-model" class="level1 page-columns page-full">
<h1>Appendix: Model of AI and Internal Properties (Venn Model)</h1>
<p><strong>In short: <em>improvements in AI are likely to reduce overall prevalence of violating content on platforms</em>.</strong></p>
<div class="page-columns page-full"><p><strong>Better models will help both sides in this war:</strong> they will help platforms detect violating content, but they also also help producers camouflage their violating content. I argue below that the net effect will likely be to help platforms, the basic argument is that if both sides had access to a <em>perfect</em> classifier then there would be zero violating content on the platform.<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn16"><p><sup>16</sup>&nbsp;Yann Lecunn made a similar argument in a <a href="https://twitter.com/ylecun/status/1664651158562979841">tweet</a> from June 2023: “AI is part of the solution here, not part of the problem! It is because of progress in natural language understanding in multiple languages (due to self-supervised transformers) that, for example, hate speech can be detected and taken down in hundreds of languages.”. Although I think the wording is misleading by implying that AI being part of the solution precludes it from also being part of the problem. Also worth noting that LeCunn misstates FB’s own statistics: he says “82% of hate speech is taken down automatically by AI before anyone sees it.” In fact it’s 82% of <em>detected</em> hate speech, and the 82% refers to the share that is actioned before it is <em>reported</em>, not actioned before it is <em>seen</em>. The share of true hate speech detected by AI is necessarily smaller but FB does not report that figure.</p></li></div></div>
<p><strong>Prevalence of violating content has fallen.</strong> Overall prevalence of violating content has shrunk dramatically over the past 5-10 years on the major social media platforms, and this can largely be attributed to improvements in classifiers.</p>
<p><strong>Model: a Venn-diagram model of content moderation with classifiers.</strong> I describe a game between a platform and a producer, each of whom has access to a classifier. We want to know the effect on total violating content that survives filtering by the platform. Conclusions:</p>
<ol type="1">
<li>If a plaform gets a better classifier then less violating content gets through.</li>
<li>If a producer gets a better classifier then the effect is ambiguous, but probably more violating content will get through. In practice this means producers using an AI model to rephrase text, add noise to photos, or synthesize video, such that the content remains violating but the platform’s classifier does not pick it up.</li>
<li>If both platform and producer get a better classifier then probably less violating content will get through.</li>
<li>A lot of content will sit <em>just on the threshold</em> for getting filtered.</li>
</ol>
<section id="model" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="model">Model</h2>
<div class="page-columns page-full"><p><strong>The diagram below illustrates three sets of posts:</strong> <a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn17"><p><sup>17</sup>&nbsp;I’m assuming that the universe is all possible posts, e.g.&nbsp;all possible strings of text, or sets of pixels. Then sets <span class="math inline">\(V\)</span> and <span class="math inline">\(\hat{V}\)</span> and <span class="math inline">\(M\)</span> will be enormous, but the actually existing posts are only a tiny tiny fraction of the set of possible posts. When calculating prevalence we use cardinality of these sets, implying (1) posts are drawn uniformly from the sets, and (2) there are no identical posts, i.e.&nbsp;each post is drawn at most 1 time.</p></li></div></div>
<ul>
<li><strong><span class="math inline">\(V\)</span>: posts that are violating</strong> – according to expert human raters. I’m concentrating on “self-contained” rules, e.g.&nbsp;nudity, hate speech, holocaust denial, where the violation depends only on the direct content of the post. I’m not considering categories like misinformation, deepfakes, or spam where violation depends on whether the content is true, or the provenance of the content.</li>
<li><strong><span class="math inline">\(\hat{V}\)</span>: posts that are classified as violating</strong> – by the platform’s classifier, can parameterize with a threshold (<span class="math inline">\(\hat{V}(k)\)</span>). The red segments below represent the false positives and false negatives of the classifier:</li>
<li><strong><span class="math inline">\(M\)</span>: posts that the producer wants to send</strong> – i.e., posts that express their message, <span class="math inline">\(M\)</span>. We can classify some producers as “good” (only wants to send non-violating <span class="math inline">\(M\cap V=\varnothing\)</span>), or as bad (only want to send violating <span class="math inline">\(M\cap V=M\)</span>).</li>
</ul>
<div class="cell" data-hash="2023-06-06-effect-of-ai-on-communication_cache/html/unnamed-chunk-1_9f281ad9b3be8306668017c47ab047c4">
<div class="cell-output-display">
<p><img src="2023-06-06-effect-of-ai-on-communication_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="implications-of-this-model" class="level2">
<h2 class="anchored" data-anchor-id="implications-of-this-model">Implications of this Model</h2>
<p>Suppose that we remove all detected violating posts (i.e.&nbsp;<span class="math inline">\(\hat{V}\)</span>). In the case illustrated above the posts removed (<span class="math inline">\(M\cap\hat{V}\)</span>) would be the majority of the producer’s posts, and of those that remain only a small share are violating. We can make a few observations given this setup:</p>
<ol type="1">
<li><p><strong>Improvements to the platform’s classifier will reduce prevalence of violating content.</strong> If we hold fixed the producer’s production, then as the classifier <span class="math inline">\(\hat{V}\)</span> gets closer to <span class="math inline">\(V\)</span> we should generally expect fewer false-positives and fewer false-negatives, so overall a better outcome for the platform (there are cases where this wouldn’t happen but they seem unusual.)</p></li>
<li><p><strong>Improvements to producer’s classifier will <em>probably</em> increase prevalence of violating content.</strong> Suppose that producers have their own estimate of the platform’s classifier, <span class="math inline">\(\tilde{V}\)</span>, and they will produce posts uniformly from the set they believe will not be removed, i.e.&nbsp;from the set <span class="math inline">\(M \backslash \tilde{V}\)</span>. If the producer learns the true classifier <span class="math inline">\(\tilde{V}=\hat{V}\)</span> then they will reduce their rate of deleted posts, which is good for the producer, but the effect on the platform can be ambiguous:</p>
<ul>
<li><strong>For good producers:</strong> For producer who do not wish to produce violating content (<span class="math inline">\(M\cap V=\varnothing\)</span>) knowledge of the classifier will prevent them from producing false positives, and they will produce more true negatives, which is good for the platform.</li>
<li><strong>For bad producers:</strong> For producers who <em>only</em> want to produce violating content (<span class="math inline">\(M\cap V=M\)</span>) they will increase their rate of violating but non-detected posts (false negatives), which is bad for the platform.</li>
<li><strong>For neutral producers:</strong> For neutral producers (where <span class="math inline">\(M\)</span> is neither a subset nor mutually exclusive with being violating), the net effect is ambiguous.</li>
</ul>
<p>In fact the net effect seems likely to be negative because in most cases people who produce violating content do it on purpose, e.g.&nbsp;those who produce nudity and hate speech and holocaust denial do it intentionally, and they couldn’t achieve their purpose without violating the policy.</p>
<p><strong>What this looks like in practice:</strong> tricking classifiers by misspelling words, using roundabout phrasing, inverting colours in a photo, adding noise to a video. Earlier classifiers had difficulty with these manipulations but deep neural nets are much better at recognizing the deep content and are harder to confuse.</p>
<p><strong>Qualification.</strong> In the argument above I’m holding fixed the platform’s classifier <span class="math inline">\(\hat{V}\)</span>. However if the producer changes the posts they produce then the performance of that classifier will change, e.g.&nbsp;precision might fall, and so the full effect should include an adjustment to that classifier. Could add an equilibrium condition that the classifier’s threshold <span class="math inline">\(k\)</span> will be set such that precision will be <span class="math inline">\(p\)</span> (<span class="math inline">\(\frac{|\hat{V}(k)\cap V \cap M|}{|\hat{V}(k)\cap M|}=p\)</span>). I don’t think this would change the qualitative conclusion.</p></li>
<li><p><strong>Improvements to a classifier used by both platform and producer will lower prevalence of violating content.</strong> Suppose both parties used the same classifier (<span class="math inline">\(\tilde{V}=\hat{V}\)</span>), and that classifier was perfect (<span class="math inline">\(\tilde{V}=\hat{V}=V\)</span>). Then there will be no violating posts shown: negative producers won’t post anything, and neutral and positive producers will only produce non-violating posts. This argument applies to the limit of having a perfect model, but it seems reasonable to presume that on the path to that limit the rate of violating posts will generally decline.</p></li>
<li><p><strong>Content will cluster just below the classifier threshold.</strong> So far we have discussed everything in binary terms, thought realistically most things are continuous. If we action posts in a binary manner, e.g.&nbsp;filtering posts with a classifier score above some threshold, then producers will have an incentive to produce posts which are just below the threshold for filtering.</p></li>
</ol>
</section>
</section>
<section id="appendix-discrimination-model" class="level1 page-columns page-full">
<h1>Appendix: Discrimination Model</h1>
<p><strong>Q: what happens when it gets easier to manufacture forgeries?</strong> We want to know the equilibrium effect on the rate at which people accept both real and fake goods. Of particular interest is the relative effect of deepfake technology on (1) false positives - forgeries believed to be genuine, and (2) false negatives - genuine images believed to be forgeries.</p>
<p><strong>Core prediction: if the current share of fakes is small then the primary effect of deepfakes will be more false positives rather than more false negatives.</strong> I.e. people will accept a lot more fake images as true, but they won’t reject many more real images as fakes. I’m not sure how convincing the argument is in reality, but there’s a nice crisp intuition of how it works in the model.</p>
<div class="cell page-columns page-full" data-hash="2023-06-06-effect-of-ai-on-communication_cache/html/unnamed-chunk-2_51b02641fcd5d99634b3c69e372e92a5">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="2023-06-06-effect-of-ai-on-communication_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<p><strong>Setup: you get a noisy signal of “genuineness”.</strong> After observing the signal you accept the good if <span class="math inline">\(P(\text{real}|\text{signal})\)</span> is above some probability threshold. We can draw two distributions of signals, and the intersection of the two curves will be the equilibrium threshold assuming that (1) fakes and real are equally likely; (2) the cost of a false positive is equal to the cost of a false negative.</p>
<div class="cell page-columns page-full" data-hash="2023-06-06-effect-of-ai-on-communication_cache/html/unnamed-chunk-3_34ccc761f953bbe8fe7831b629251bec">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="2023-06-06-effect-of-ai-on-communication_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<p><strong>Now let the technology for producing fakes gets better.</strong> We model this as a shift to the right in the “quality” curve for fakes:</p>
<p><strong>Implications.</strong> Reading off this diagram we can see a number of effects. I think these will all be true as long as the monotone likelihood ratio property holds.</p>
<ol type="1">
<li><strong>The threshold gets higher.</strong></li>
<li><strong>More fakes get accepted (more false positives).</strong> A larger share of all fakes will be above the threshold.</li>
<li><strong>More reals get rejected (more false negatives).</strong> A smaller share of genuine items will be above the threshold.</li>
<li><strong>Consumer welfare is lower.</strong> The consumer is accepting more fakes and fewer genuine articles.</li>
</ol>
<p><strong>Extensions/observations.</strong></p>
<ol type="1">
<li><strong>The size of each effect depends on the relative slope of the two distributions.</strong> If the distribution of fakes was uniform then, as that distribution moved up, the threshold wouldn’t change at all, and so the equilibrium effect would be entirely an increase in fakes accepted (false positives). If instead the distribution of reals was uniform then the threshold would move up, and so the effect would be entirely a decrease in genuine goods rejected (false negatives).</li>
<li><strong>If the prevalence of fakes is small then impact will mostly be on false positives.</strong> If the prevalence of fakes is small then the threshold will cut the distribution of fakes near the center, but will cut the distribution of reals near the tail. Thus a rightward shift in the distribution of fakes will have a small impact on the threshold.</li>
<li><strong>If there’s free entry then things will be worse.</strong> Suppose that the overall quantity of fakes is increasing in the probability of being accepted, then as the technology to produce fakes gets better then the volume will also get higher. The increase in volume will further increase the threshold. As before the relative effect on FP vs FN will depend on the relative curvature of the two distributions.</li>
<li><strong>Distribution of fakes will likely be skew.</strong> Suppose the forgers can create a bunch of <em>candidate</em> goods, and then measure the quality of each one, and only try to sell goods which exceed the cutoff threshold. Then the distribution of fake goods will be truncated. But this is no longer an equilibrium because all the low-quality goods are now genuine. Need to think this through more.</li>
</ol>
</section>
<section id="appendix-forecasts-from-metaculus" class="level1">
<h1>Appendix: Forecasts from Metaculus</h1>
<table class="table">
<colgroup>
<col style="width: 74%">
<col style="width: 8%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>deadline</th>
<th>Metaculus Jun 30 2023</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Will a deepfake cause damage &amp; make front page of a major news source?</td>
<td>2023</td>
<td>89%</td>
</tr>
<tr class="even">
<td>Will a deepfake be blamed by G20 politician for election loss?</td>
<td>2025</td>
<td>80%</td>
</tr>
<tr class="odd">
<td>Will AI be used in an attack on infrastructure costing &gt;$1B?</td>
<td>2025</td>
<td>4%</td>
</tr>
<tr class="even">
<td>Will AI be used in a theft of intellectual property cost &gt;$10M?</td>
<td>2025</td>
<td>30%</td>
</tr>
<tr class="odd">
<td>Will AI cause a stock exchange to halt trading for &gt;24 hours?</td>
<td>2025</td>
<td>15%</td>
</tr>
<tr class="even">
<td>Will AI be used in a major attack on voting systems in G20?</td>
<td>2025</td>
<td>10%</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Will a deepfake about politicial running for office get 2M+ views?</td>
<td>2018</td>
<td>(resolved false)</td>
</tr>
<tr class="odd">
<td>Will a wide-scale video hoax put words in a famous figure’s mouth?</td>
<td>2017</td>
<td>(resolved false</td>
</tr>
</tbody>
</table>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-chen2022profanity" class="csl-entry" role="listitem">
Chen, Edwin. 2022. <a href="https://www.surgehq.ai/blog/are-popular-toxicity-models-simply-profanity-detectors">https://www.surgehq.ai/blog/are-popular-toxicity-models-simply-profanity-detectors</a>.
</div>
<div id="ref-cunningham2023ranking" class="csl-entry" role="listitem">
Cunningham, Tom. 2023. <span>“Ranking by Engagement.”</span> <a href="http://tecunningham.github.io/2023-04-28-ranking-by-engagement.html">http://tecunningham.github.io/2023-04-28-ranking-by-engagement.html</a>.
</div>
<div id="ref-grondahl2018need" class="csl-entry" role="listitem">
Gröndahl, Tommi, Luca Pajola, Mika Juuti, Mauro Conti, and N. Asokan. 2018. <span>“All You Need Is "Love": Evading Hate-Speech Detection.”</span> <a href="https://arxiv.org/abs/1808.09115">https://arxiv.org/abs/1808.09115</a>.
</div>
<div id="ref-han2020fortifying" class="csl-entry" role="listitem">
Han, Xiaochuang, and Yulia Tsvetkov. 2020. <span>“Fortifying Toxic Speech Detectors Against Veiled Toxicity.”</span> In <em>Proceedings of the 2020 Conference on Empirical Methods in Natural Language Processing (EMNLP)</em>, 7732–39. Online: Association for Computational Linguistics. <a href="https://doi.org/10.18653/v1/2020.emnlp-main.622">https://doi.org/10.18653/v1/2020.emnlp-main.622</a>.
</div>
<div id="ref-heiner2022toxic" class="csl-entry" role="listitem">
Heiner, Scott. 2022. <span>“Real-World ML Failures: The Violence, Racism, and Sexism Uncaught by Twitter’s Content Moderation Systems.”</span> <a href="https://www.surgehq.ai/blog/25-examples-of-twitters-content-moderation-failures">https://www.surgehq.ai/blog/25-examples-of-twitters-content-moderation-failures</a>.
</div>
<div id="ref-kiela2023plottingprogress" class="csl-entry" role="listitem">
Kiela, Douwe, Tristan Thrush, Kawin Ethayarajh, and Amanpreet Singh. 2023. <span>“Plotting Progress in AI.”</span> <em>Contextual AI Blog</em>.
</div>
<div id="ref-whitlocklees2022perspective" class="csl-entry" role="listitem">
Lees, Alyssa Whitlock, Vinh Q. Tran, Yi Tay, Jeffrey Scott Sorensen, Jai Gupta, Donald Metzler, and Lucy Vasserman. 2022. <span>“A New Generation of Perspective API: Efficient Multilingual Character-Level Transformers.”</span> In. <a href="https://dl.acm.org/doi/10.1145/3534678.3539147">https://dl.acm.org/doi/10.1145/3534678.3539147</a>.
</div>
<div id="ref-lees2021capturing" class="csl-entry" role="listitem">
Lees, Alyssa, Daniel Borkan, Ian Kivlichan, Jorge Nario, and Tesh Goyal. 2021. <span>“Capturing Covertly Toxic Speech via Crowdsourcing.”</span> In <em>Proceedings of the First Workshop on Bridging Human<span>–</span>Computer Interaction and Natural Language Processing</em>, 14–20. Online: Association for Computational Linguistics. <a href="https://aclanthology.org/2021.hcinlp-1.3">https://aclanthology.org/2021.hcinlp-1.3</a>.
</div>
<div id="ref-searles2023empirical" class="csl-entry" role="listitem">
Searles, Andrew, Yoshimichi Nakatsuka, Ercan Ozturk, Andrew Paverd, Gene Tsudik, and Ai Enkoji. 2023. <span>“An Empirical Study &amp; Evaluation of Modern CAPTCHAs.”</span> <a href="https://arxiv.org/abs/2307.12108">https://arxiv.org/abs/2307.12108</a>.
</div>
<div id="ref-thiel2023generative" class="csl-entry" role="listitem">
Thiel, David, Melissa Stroebel, and Rebecca Portnoff. 2023. <span>“Generative ML and CSAM: Implications and Mitigations.”</span>
</div>
<div id="ref-weng2023gpt4moderation" class="csl-entry" role="listitem">
Weng, Lilian, Vik Goel, and Andrea Vallone. 2023. <span>“Using GPT-4 for Content Moderation.”</span> <a href="https://openai.com/blog/using-gpt-4-for-content-moderation">https://openai.com/blog/using-gpt-4-for-content-moderation</a>.
</div>
</div>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>