% Shared helpers for 2-player Tullock best-response diagrams
% Assumes pgfplots + tikz (and groupplots) are already loaded via preamble_quarto.

% Normalize prize value globally
\def\V{1}%

% Draw one BR panel (with its own axis) for given parameters:
%   #1 = r_1   (Tullock exponent for player 1)
%   #2 = r_2   (Tullock exponent for player 2)
%   #3 = c_1   (marginal cost for player 1)
%   #4 = c_2   (marginal cost for player 2)
\newcommand{\TullockBRContent}[4]{%
  % Derived constants (numerical, no global defs)
  \pgfmathsetmacro{\Kone}{#1*\V/#3}%
  \pgfmathsetmacro{\Ktwo}{#2*\V/#4}%
  \pgfmathsetmacro{\delta}{(#3*#2)/(#4*#1)}%
  %
  \nextgroupplot[
    axis lines=left,
    xlabel={$x_2$},
    ylabel={$x_1$},
    xmin=0, xmax=1,
    ymin=0, ymax=1,
    title={$\substack{r_1=#1,\ r_2=#2\\ c_1=#3,\ c_2=#4}$}
  ]
  %
  % Player 1 best-response locus (param t = x_1^{r_1} / x_2^{r_2})
  \addplot+[blue, thick, no markers, domain=0.03:40, samples=800, parametric]
    % (x_2(t), x_1(t))
    ({ pow(\Kone*pow(x,(#1-1)/(#1))/pow(1+x,2), #1/#2) },
     { \Kone * x / pow(1+x,2) });
  %
  % Player 2 best-response locus (param u = x_2^{r_2} / x_1^{r_1})
  \addplot+[red!70!black, thick, no markers, domain=0.03:40, samples=800, parametric]
    % (x_2(u), x_1(u))
    ({ \Ktwo * x / pow(1+x,2) },
     { pow(\Ktwo*pow(x,(#2-1)/(#2))/pow(1+x,2), #2/#1) });
  %
  % Spending-ratio line: x_2 = \delta x_1
  \addplot[densely dashed, domain=0:1.05*\V/#4] {x/\delta};
  %
  % Full rent-dissipation line: c_1 x_1 + c_2 x_2 = V
  \addplot[red, densely dotted, domain=0:\V/#4] {(\V - #4*x)/#3};
}


