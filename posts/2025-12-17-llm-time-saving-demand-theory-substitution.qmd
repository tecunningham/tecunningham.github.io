---
title: "LLM Time-Saving and Demand Theory"
author: "Tom Cunningham"
date: today
draft: true
bibliography: ai.bib
# format: typst
format: html
# format: 
#    pdf:
#     fontfamily: libertinus
#     fontsize: 10pt
#     geometry:
#       - margin=0.75in
engine: knitr
execute:
  echo: false
  warning: false
  error: false
  cache: true # caches chunk output
---

Many thanks to Elsie Jang for discussion.

##       Summary

I anticipate that we're going to be arguing a lot about LLM-speedups & task substitution over the next year.

: 
    - Suppose an LLM speeds you up by a factor $\beta$ on tasks that take up share $s$ of your work (pre-LLM), what's the overall efficiency gain?
    - How does the answer change if you measure the time-share $s$, *after* you adjust to use LLMs?
    - If we can observe the changes in both (1) per-task productivity impacts, and (2) per-task time-spent, can we back out the overall productivity impact?

Estimating aggregate productivity increase is hard.

:   1. **The total output gain will be between $\frac{1}{(1-s)+s/\beta}$ (if perfect complements) and $\beta$ (if perfect substitutes).** These numbers will only be similar only if the time-savings affect most tasks ($s \simeq 1$), or the productivity effect is small ($\beta\simeq 0$).

    2. **If the time-savings are very small then Hulten's theorem applies.** If $\beta\simeq0$ then $\Delta\ln y \approx s\ln\beta$, and time saved $\approx \Delta\ln y$.
    
    3. **If the time-savings are somewhat small then you can use elasticity of substitution.** There's a closed-form expression, given below.

    4. **If the time-savings are large then you should use the entire area under the demand curve.** If the time-savings are large then it's no longer reasonable to assume a constant elasticity. However even the demand curve will not be perfect if there are significant income effects. In that case one might need to estimate a more flexible demand system, however I don't have a good reference here.
   
    5. **Using pre-LLM time-shares will under-estimate productivity improvements; using post-LLM time-shares will over-estimate productivity improvements.** This holds strictly if using Amdahl's law to estimate aggregate productivity improvements, which assumes zero substitability.

    6. **We can estimate the aggregate productivity impact if we observe time allocation before and after the change.** This holds at least for small changes (where we can assume constant elasticity of substitution). Graphically, if we observe the change in budget constraint, and chagne in consumption point, we can infer substitutability, and therefore aggregate productivity improvement.

Applications to LLMs.
: @anthropic2025estimatingproductivitygains sample a range of tasks from Claude logs, and estimate the time-required with and without AI assistance. They estimate a typical speedup of 80%, but that AI is only used for around 25% of tasks, hence the total time-saving is around 20%. However Hulten's theorem only applies for *small* efficiency changes, these are large changes (80%), so the conclusion requires assuming Cobb-Douglas substitution, i.e. that time-shares are constant.

   @becker2025uplift estimate time-savings on tasks using LLMs. In this case the subjects mostly were *not* using AI, but in followup studies they *will* be using AI. This makes it hard to think about interpreting uplift studies over time, insofar as AI causes them to change the task distribution. It would be nice to have a good clear language here.


**Time savings using *ex-ante* time shares**

|                                                      | 10% saving on 50% | 50% saving on 10% | 80% saving on 10% |
| ---------------------------------------------------- | ----------------- | ----------------- | ----------------- |
| $\varepsilon=0$ (perfect complements/Amdahl)         | 5.0%              | 5.0%              | 8.0%              |
| $\varepsilon=1/2$ (complements)                      | 5.1%              | 5.8%              | 10.7%             |
| $\varepsilon=1$ (Cobb-Douglas/Hulten)                | 5.1%              | 6.7%              | 14.9%             |
| $\varepsilon\rightarrow\infty$ (perfect substitutes) | 10%               | 50%               | 80%               |

**Time savings using *ex-post* time shares:**

|                                                      | 10% saving on 50% | 50% saving on 10% | 80% saving on 10% |
| ---------------------------------------------------- | ----------------- | ----------------- | ----------------- |
| $\varepsilon=0$ (perfect complements/Amdahl)         | 5.3%              | 9.1%              | 28.6%             |
| $\varepsilon=1/2$ (complements)                      | 5.2%              | 7.8%              | 20.8%             |
| $\varepsilon=1$ (Cobb-Douglas/Hulten)                | 5.1%              | 6.7%              | 14.9%             |
| $\varepsilon\rightarrow\infty$ (perfect substitutes) | N/A               | N/A               | N/A               |

How these are calculated:
:  - **"X% saving"** means task-2 productivity increases so that time-per-unit falls by factor $(1-X)$, i.e., $\beta = 1/(1-X)$. So 10% saving → $\beta = 1.11$; 50% saving → $\beta = 2$; 80% saving → $\beta = 5$.
   - **"Y% of work"** means the time share on task 2 is $s = Y$.
   - **Output gain** from the CES formula: 
$$\frac{y'}{y} = \left((1-s_0) + s_0\,\beta^{\varepsilon-1}\right)^{1/(\varepsilon-1)}$$
where $s_0$ is the *ex-ante* share.
   - **Time savings** = $1 - (y'/y)^{-1}$, i.e., the fraction of time saved to produce the same output.
   - **Table 1:** The column header specifies the ex-ante share $s_0$ directly. Compute the output gain and convert to time savings.
   - **Table 2:** The column header specifies the ex-post share $s_1$. First back out the implied ex-ante share using: $$\frac{s_0}{1-s_0} = \frac{s_1}{1-s_1} \cdot \beta^{1-\varepsilon}$$ Then compute the true output gain using $s_0$.
   - **Perfect substitutes (Table 2):** After any productivity improvement, you reallocate entirely to the better task, so the ex-post share is always 100%. Specifying it as 10% or 50% is inconsistent with optimization—hence N/A.




An analogy: if we can turn lead into gold, what benefit do I get?
:  Using ex ante expenditure: my expenditure share on gold is ~0%, so my benefit is very small. 

    Using ex post expenditure: if gold is cheap then I'll start buying gold cutlery. Suppose I spend $1K on gold/year, then it makes it look like I'm getting value worth $100K/year, which is clearly wrong.

    I think the resolution is that gold has high substitutability with other goods (steel, bronze), and so demand is highly elastic. But that substitutability only appears when prices are low, so just estimating a CES function I think would get this wrong.

There are some nice crisp results from economics that apply here.
: I discuss some related literature below.

Loose ends:
: - I give bounds on aggregate time-savings with a CES model below, but I'm not sure whether you might not get wider bounds if you relax the CES assumption, e.g. with non-homotheticities so there are income effects.

#      Model

We set up a two-task CES production problem and derive the optimal time split, the implied output, and the response to productivity changes, with limits for common special cases.

**Practical implications (at a glance)**

Let $s\equiv t_2^*$ denote the optimal time share on task 2 (and $1-s=t_1^*$). Express all effects as log-changes $\Delta\ln y^*=\ln\!\big(y^{*'}/y^*\big)$ when task-2 productivity moves from $A_2$ to $A_2'=\beta A_2$. The last column plugs in $s=0.1$ and $\beta=2$.

| Case                                                 | Output effect ($\Delta\ln y^*$)                                         | Intuition                                       | Example $\Delta\ln y^*$ ($s=0.1,\ \beta=2$) |
| ---------------------------------------------------- | ----------------------------------------------------------------------- | ----------------------------------------------- | --------------------------------------------- |
| General finite change                                | $\dfrac{1}{\varepsilon-1}\ln\!\big((1-s)+s\,\beta^{\varepsilon-1}\big)$ | CES-weighted average of the shock               | $\dfrac{1}{\varepsilon-1}\ln\!\big(0.9+0.1\times2^{\varepsilon-1}\big)$ (depends on $\varepsilon$) |
| Perfect substitutes ($\varepsilon\rightarrow\infty$) | $\ln \beta$                                                             | All time moves to the better task               | $\approx 0.69$ |
| Cobb–Douglas ($\varepsilon=1$)                       | $s\,\ln \beta$                                                          | Log-linear weighting by the task share          | $\approx 0.069$ |
| Perfect complements ($\varepsilon\rightarrow0$)      | $-\ln\!\big((1-s)+s/\beta\big)$                                         | Bottlenecked by the slow task                   | $\approx 0.051$ |
| Infinitesimal change (Hulten)                        | $s\,d\ln A_2$                                                           | Percent gain equals time share on improved task | $0.1\times\ln 2\approx 0.069$ |

**Setup and parameters**

- Time endowment is $1$; choose $t_1\in[0,1]$ and $t_2=1-t_1$.
- Productivities: $A_1>0$ for task $1$, $A_2>0$ for task $2$.
- Taste weight: $\alpha\in(0,1)$ on task $1$.
- Substitution parameter: $\varepsilon>0$; take $\varepsilon\neq1$ for the algebra and then send $\varepsilon\rightarrow1$ for the Cobb–Douglas limit.
- Output aggregator (CES):
$$y(t_1,t_2)=\left(\alpha(A_1 t_1)^{\frac{\varepsilon-1}{\varepsilon}}+(1-\alpha)(A_2 t_2)^{\frac{\varepsilon-1}{\varepsilon}}\right)^{\frac{\varepsilon}{\varepsilon-1}}.$$

**Assumptions**

1. Feasible set: $t_1\in[0,1]$, $t_2=1-t_1$.
2. Parameters satisfy $A_i>0$ and $\alpha\in(0,1)$.
3. Decision problem: choose $t_1$ to maximise $y(t_1,1-t_1)$.

**Proposition 1 (optimal time split).** The interior optimum is
$$t_1^*=\frac{1}{1+\left(\frac{1-\alpha}{\alpha}\right)^{\varepsilon}\left(\frac{A_2}{A_1}\right)^{\varepsilon-1}},\qquad t_2^*=1-t_1^*.$$

*Proof (explicit)*

1. Write the Lagrangian $\mathcal{L}=y(t_1,t_2)+\lambda(1-t_1-t_2)$ with $y$ as above.
2. First-order conditions (interior): $\partial\mathcal{L}/\partial t_1=0$ and $\partial\mathcal{L}/\partial t_2=0$ give
   $$\lambda=\alpha\,A_1^{\frac{\varepsilon-1}{\varepsilon}}\,t_1^{-\frac{1}{\varepsilon}}\,y^{\frac{1}{\varepsilon}}=(1-\alpha)\,A_2^{\frac{\varepsilon-1}{\varepsilon}}\,t_2^{-\frac{1}{\varepsilon}}\,y^{\frac{1}{\varepsilon}}.$$
3. Cancel $y^{\frac{1}{\varepsilon}}$ and rearrange to obtain $\frac{t_2}{t_1}=\left(\frac{1-\alpha}{\alpha}\right)^{\varepsilon}\left(\frac{A_2}{A_1}\right)^{\varepsilon-1}$.
4. Impose $t_1+t_2=1$ and solve for $t_1^*$; set $t_2^*=1-t_1^*$.
5. The interior solution is valid for $\varepsilon>0$ with finite $A_i$; only the perfect-substitutes limit $\varepsilon\rightarrow\infty$ or $A_i\rightarrow0$ forces a corner.

**Proposition 2 (indirect output).** At $t_1^*,t_2^*$ the output is
$$y^*=\Big(\alpha^{\varepsilon}A_1^{\varepsilon-1}+(1-\alpha)^{\varepsilon}A_2^{\varepsilon-1}\Big)^{\frac{1}{\varepsilon-1}}.$$

*Proof (explicit)*

1. Substitute $t_1^*,t_2^*$ from Proposition 1 into $y(t_1,t_2)$.
2. Factor out $\alpha^{\varepsilon}A_1^{\varepsilon-1}+(1-\alpha)^{\varepsilon}A_2^{\varepsilon-1}$ inside the braces; the exponent $\frac{\varepsilon}{\varepsilon-1}$ collapses to the stated form.

**Proposition 3 (infinitesimal productivity change).** Holding $A_1$ fixed, a small change in $A_2$ satisfies
$$\frac{dy^*}{y^*}=t_2^*\,\frac{dA_2}{A_2}.$$

*Proof (explicit)*

1. Take $\log y^*=\frac{1}{\varepsilon-1}\log\big(\alpha^{\varepsilon}A_1^{\varepsilon-1}+(1-\alpha)^{\varepsilon}A_2^{\varepsilon-1}\big)$.
2. Differentiate with respect to $\log A_2$:
   $$\frac{dy^*}{y^*}=\frac{(1-\alpha)^{\varepsilon}A_2^{\varepsilon-1}}{\alpha^{\varepsilon}A_1^{\varepsilon-1}+(1-\alpha)^{\varepsilon}A_2^{\varepsilon-1}}\cdot\frac{dA_2}{A_2}.$$
3. The fraction equals $t_2^*$ from Proposition 1, so the result follows.

**Proposition 4 (finite productivity change on task 2).** If $A_2'=\beta A_2$ with $\beta>0$, then
$$\frac{y^{*'}}{y^*}=\left(t_1^*+(1-t_1^*)\beta^{\varepsilon-1}\right)^{\frac{1}{\varepsilon-1}}.$$

*Proof (explicit)*

1. Replace $A_2$ by $\beta A_2$ in $y^*$ from Proposition 2:
   $$y^{*'}=\Big(\alpha^{\varepsilon}A_1^{\varepsilon-1}+(1-\alpha)^{\varepsilon}(\beta A_2)^{\varepsilon-1}\Big)^{\frac{1}{\varepsilon-1}}.$$
2. Factor out the old level $y^*$ to form a ratio; the remaining weights inside the braces are $t_1^*$ and $t_2^*=1-t_1^*$, giving the stated expression.

**Proposition 5 (canonical limits).** Take limits of Proposition 4:

- Cobb–Douglas ($\varepsilon\rightarrow1$): $\frac{y^{*'}}{y^*}\rightarrow \beta^{1-\alpha}$ and $t_i^*$ is unchanged.
- Perfect complements ($\varepsilon\rightarrow0$): $\frac{y^{*'}}{y^*}\rightarrow \frac{1}{t_1^*+t_2^*/\beta}$.
- Perfect substitutes ($\varepsilon\rightarrow\infty$): $\frac{y^{*'}}{y^*}\rightarrow \beta$ with $t_2^*\rightarrow1$ if $\beta A_2>A_1$.

*Proof sketch* For $\varepsilon\rightarrow1$ apply L’Hôpital to the CES form. For $\varepsilon\rightarrow0$ the CES aggregator converges to $\min\{A_1 t_1,A_2 t_2\}$. For $\varepsilon\rightarrow\infty$ it converges to $\max\{A_1 t_1,A_2 t_2\}$. Substitute these limits into Proposition 4 and simplify.


#     Related Theory

The index numbers problem.
: @caves1982indexnumbers formalize why productivity (or “quantity”) measurement becomes an index-number problem as soon as *shares move endogenously*:
: - A Laspeyres-style measure (base-period weights) is biased toward *understating* gains when a shock makes you reallocate toward the improved input/task, because it freezes the old bundle.
: - A Paasche-style measure (end-period weights) is biased toward *overstating* gains if you implicitly treat the new bundle as if it had always been purchased at the old relative prices/technologies.
: - The object you actually want is a path (Divisia) integral of share-weighted growth rates; “superlative” discrete indices (e.g., Fisher/Törnqvist) are designed to approximate that integral well.

Consumer surplus / welfare for large “price” (time-cost) changes
: @willig1976consumerssurplus defends using Marshallian consumer surplus as a welfare proxy: the area under the (Marshallian) demand curve is close to the Hicksian objects (EV/CV) when income effects are small, and Willig provides conditions/bounds under which the approximation error is limited.
: @hausman1981exact shows how to compute exact welfare measures (EV/CV, deadweight loss) from an estimated demand curve by imposing integrability (i.e., that the demand actually comes from some underlying utility/expenditure function).
: @deaton1980aids provides a workhorse *integrable* demand system (AIDS) that flexibly captures income effects and substitution patterns while keeping welfare calculations coherent.
: In our model you can interpert the task outputs as the goods, and productivities are inverse prices. An LLM that raises $A_2$ by $\beta$ is literally a price drop for good 2 by a factor $1/\beta$. For small task shares ($s=t_2^*$), the Willig logic says income effects are small, so the demand curve is OK. When the effective budget share is not small, or when the shock is large, then you want an *integrable system*.

Economics of time allocation (time is a scarce input with shadow prices)
: @deserpa1971time is a classic reference on time allocation, and time-saving innovations as relaxing the budget constraint.

Task substitution and computerization as task-specific technology shocks
: @autor2003skill gives the modern “tasks” approach: computerization substitutes for routine tasks and complements non-routine tasks, shifting task content within occupations and generating distributional consequences (e.g., polarization). You cannot summarize tech change as “labor-augmenting” in the aggregate.
: @acemoglu2011handbook synthesizes and formalizes this task-based view. A central message is that the impact of a task-specific productivity shock depends on: (i) which tasks are affected, (ii) how substitutable tasks are, and (iii) how the economy re-optimizes task assignment across workers/technologies.

Hulten’s theorem and when first-order share-weighting breaks
: @hulten1978growth shows (in a competitive, CRS setting with intermediates) that a *small* productivity shock’s effect on aggregate productivity can be summarized by share-weighted sectoral TFP growth (Domar/revenue-share weights). The key takeaway is the legitimacy of first-order share weighting—but only locally.
: @baqaee2019macro shows that in production networks, micro shocks can have macro consequences and nonlinearities/higher-order terms matter.
: @baqaeeBurstein2021incomeeffects and @cominLashkariMestieri2021structuralchange take into account income effects.

Amdahl’s law as the perfect-complements benchmark
: Amdahl’s law in computer science says the speedup from improving one component is bounded by the unimproved fraction. This corresponds to the perfect-complements case.

<!-- 
   Reallocation and aggregation across units (Olley–Pakes)
   : @olley1996telecom shows that aggregate productivity can be decomposed into: (i) the unweighted mean productivity across firms (“within”), plus (ii) a covariance between productivity and market share (“between” / reallocation). Their empirical contribution is that changes in aggregate productivity can come as much from reallocating activity toward more productive firms as from within-firm improvements.
-->



#      Illustrations


##      Indifference Curve

```{tikz}
#| fig-cap: "Budget constraint and optimal allocations under different elasticities"
#| fig-align: center
\begin{tikzpicture}[scale=5]
    \draw[->] (0,0) -- (1.1,0) node[anchor=north east] {time on $A$};
    \draw[->] (0,0) -- (0,1.1) node[above,align=center] {time\\on $B$};

   \draw (.5,0)--(0,.5) node[left]{old budget};
   \draw[blue] (.5,0)--(0,1) node[left]{new budget};

   \fill[black] (.25,.25) circle[radius=.01] node[anchor=north east,align=center]{original\\consumption};

   \fill[blue] (.33,.33) circle[radius=.01] node[right]{$\varepsilon=0$, perfect complements};
   \fill[blue] (0,1) circle[radius=.01] node[right]{$\varepsilon=\infty$ perfect substitutes};
   \fill[blue] (.25,.5) circle[radius=.01] node[right]{$\varepsilon=1$ Cobb-Douglas};
\end{tikzpicture}
```



##    Demand Curve

```{tikz}
#| fig-cap: "Demand curves with different price elasticities"
#| fig-align: center
\begin{tikzpicture}[scale=1.0]
  \def\Q0{1}
  \def\P0{1}

  %%%%%%%%%%%%%% Panel 1: Inelastic demand
  \begin{scope}
    % Axes
    \draw[->] (0,0) -- (3,0) node[below right] {$Q$};
    \draw[->] (0,0) -- (0,3) node[above left] {$P$};

    % Center point guides
    \draw[dashed] (\Q0,0) -- (\Q0,3);
    \draw[dashed] (0,\P0) -- (3,\P0);

    % Inelastic (steep) demand through (Q0,P0)
    \draw[domain=0.6:1.5,smooth,variable=\q,thick,blue]
      plot (\q,{1/(\q*\q)});
    \fill[blue] (\Q0,\P0) circle[radius=1pt];

    \node[above] at (1.5,2.8) {inelastic, $|\eta|<1$};
  \end{scope}

  %%%%%%%%%%%%%%% Panel 2: Unit elastic demand
  \begin{scope}[xshift=4cm]
    % Axes
    \draw[->] (0,0) -- (3,0) node[below right] {$Q$};
    \draw[->] (0,0) -- (0,3) node[above left] {$P$};

    % Center point guides
    \draw[dashed] (\Q0,0) -- (\Q0,3);
    \draw[dashed] (0,\P0) -- (3,\P0);

    % Unit elastic demand: rectangular hyperbola P = 1/Q
    \draw[domain=0.4:2.5,smooth,variable=\q,thick,blue]
      plot (\q,{1/\q});
    \fill[blue] (\Q0,\P0) circle[radius=1pt];

    \node[above] at (1.5,2.8) {unit elastic, $|\eta|=1$};
  \end{scope}

  %-----------------------------
  % Panel 3: Elastic demand
  %-----------------------------
  \begin{scope}[xshift=8cm]
    % Axes
    \draw[->] (0,0) -- (3,0) node[below right] {$Q$};
    \draw[->] (0,0) -- (0,3) node[above left] {$P$};

    % Center point guides
    \draw[dashed] (\Q0,0) -- (\Q0,3);
    \draw[dashed] (0,\P0) -- (3,\P0);

    % Elastic (flat) demand through (Q0,P0)
    \draw[domain=0.3:3.0,smooth,variable=\q,thick,blue]
      plot (\q,{\q^(-1/4)});
    \fill[blue] (\Q0,\P0) circle[radius=1pt];

    \node[above] at (1.5,2.8) {elastic, $|\eta|>1$};
  \end{scope}
\end{tikzpicture}
```

